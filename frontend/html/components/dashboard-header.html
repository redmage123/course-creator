<!-- Dashboard Header Component - Reusable Header with User Dropdown -->
<header class="site-header" role="banner">
    <div class="header-container">
        <a href="/html/index.html" class="header-logo" aria-label="Course Creator Home">
            <i class="fas fa-graduation-cap"></i>
            <span>Course Creator</span>
        </a>

        <div class="header-actions">
            <div id="userDropdown" class="user-dropdown">
                <button
                    class="user-trigger"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-label="User menu"
                >
                    <div class="user-avatar" aria-hidden="true">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="userNameDisplay">{{userName}}</span>
                    <i class="fas fa-chevron-down"></i>
                </button>

                <div class="user-menu" role="menu" aria-label="User menu">
                    <a href="/html/password-change.html" role="menuitem">
                        <i class="fas fa-key"></i>
                        <span>Change Password</span>
                    </a>
                    <a href="#" id="logoutBtn" role="menuitem">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
    // User dropdown toggle
    (function() {
        const userTrigger = document.querySelector('.user-trigger');
        const userMenu = document.querySelector('.user-menu');

        if (userTrigger && userMenu) {
            userTrigger.addEventListener('click', (e) => {
                e.stopPropagation();
                const isActive = userMenu.classList.toggle('active');
                userTrigger.setAttribute('aria-expanded', isActive);
            });

            // Close on outside click
            document.addEventListener('click', () => {
                userMenu.classList.remove('active');
                userTrigger.setAttribute('aria-expanded', 'false');
            });
        }

        // Logout handler
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.clear();
                sessionStorage.clear();
                window.location.href = '/html/index.html';
            });
        }

        // Set username from localStorage
        const userName = localStorage.getItem('userName') || 'User';
        const userNameDisplay = document.getElementById('userNameDisplay');
        if (userNameDisplay) {
            userNameDisplay.textContent = userName;
        }
    })();
</script>
