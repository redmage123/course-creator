{"version":3,"file":"Register-D5dMD1kA.js","sources":["../../src/features/auth/pages/RegistrationPage/RegistrationPage.tsx"],"sourcesContent":["/**\n * Registration Page Component\n *\n * BUSINESS CONTEXT:\n * User registration entry point for the Course Creator Platform.\n * Collects user information and ensures consent to terms and privacy policy.\n *\n * TECHNICAL IMPLEMENTATION:\n * Form validation with controlled inputs, auth service integration,\n * error handling, loading states, and legal compliance.\n *\n * DESIGN PRINCIPLES:\n * - Clean, centered layout with Tami design system\n * - Client-side validation before submission\n * - Clear error messages for failed registration\n * - Accessible form with proper labels and ARIA attributes\n * - GDPR/CCPA compliant with explicit consent checkboxes\n */\n\nimport React, { useState, FormEvent } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { SEO } from '../../../../components/common/SEO';\nimport { Input } from '../../../../components/atoms/Input';\nimport { Button } from '../../../../components/atoms/Button';\nimport { Checkbox } from '../../../../components/atoms/Checkbox';\nimport { Heading } from '../../../../components/atoms/Heading';\nimport { Card } from '../../../../components/atoms/Card';\nimport { useAuth } from '../../../../hooks/useAuth';\nimport styles from './RegistrationPage.module.css';\n\ninterface RegistrationFormData {\n  email: string;\n  username: string;\n  password: string;\n  confirmPassword: string;\n  acceptTerms: boolean;\n  acceptPrivacy: boolean;\n  newsletterOptIn: boolean;\n}\n\ninterface RegistrationFormErrors {\n  email?: string;\n  username?: string;\n  password?: string;\n  confirmPassword?: string;\n  acceptTerms?: string;\n  acceptPrivacy?: string;\n  submit?: string;\n}\n\n/**\n * Registration Page Component\n *\n * WHY THIS APPROACH:\n * - Controlled form inputs for validation\n * - useAuth hook for authentication state management\n * - Client-side validation before API call\n * - Loading states to prevent double submission\n * - Role-based redirects after successful registration\n * - Clear error messages for user feedback\n * - GDPR/CCPA compliance with explicit consent\n *\n * @example\n * ```tsx\n * <Route path=\"/register\" element={<RegistrationPage />} />\n * ```\n */\nexport const RegistrationPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { register, isLoading } = useAuth();\n\n  const [formData, setFormData] = useState<RegistrationFormData>({\n    email: '',\n    username: '',\n    password: '',\n    confirmPassword: '',\n    acceptTerms: false,\n    acceptPrivacy: false,\n    newsletterOptIn: false,\n  });\n\n  const [errors, setErrors] = useState<RegistrationFormErrors>({});\n\n  /**\n   * Validate form data\n   */\n  const validateForm = (): boolean => {\n    const newErrors: RegistrationFormErrors = {};\n\n    // Email validation\n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    // Username validation\n    if (!formData.username) {\n      newErrors.username = 'Username is required';\n    } else if (formData.username.length < 3) {\n      newErrors.username = 'Username must be at least 3 characters';\n    } else if (formData.username.length > 30) {\n      newErrors.username = 'Username must be at most 30 characters';\n    } else if (!/^[a-zA-Z0-9_-]+$/.test(formData.username)) {\n      newErrors.username = 'Username can only contain letters, numbers, hyphens, and underscores';\n    }\n\n    // Password validation\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      newErrors.password = 'Password must be at least 8 characters';\n    } else if (!/(?=.*[a-z])/.test(formData.password)) {\n      newErrors.password = 'Password must contain at least one lowercase letter';\n    } else if (!/(?=.*[A-Z])/.test(formData.password)) {\n      newErrors.password = 'Password must contain at least one uppercase letter';\n    } else if (!/(?=.*\\d)/.test(formData.password)) {\n      newErrors.password = 'Password must contain at least one number';\n    }\n\n    // Confirm password validation\n    if (!formData.confirmPassword) {\n      newErrors.confirmPassword = 'Please confirm your password';\n    } else if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match';\n    }\n\n    // Terms acceptance validation\n    if (!formData.acceptTerms) {\n      newErrors.acceptTerms = 'You must accept the Terms of Service';\n    }\n\n    // Privacy policy acceptance validation\n    if (!formData.acceptPrivacy) {\n      newErrors.acceptPrivacy = 'You must accept the Privacy Policy';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    // Clear previous submit errors\n    setErrors((prev) => ({ ...prev, submit: undefined }));\n\n    // Validate form\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      // Attempt registration\n      await register({\n        email: formData.email,\n        username: formData.username,\n        password: formData.password,\n        acceptTerms: formData.acceptTerms,\n        acceptPrivacy: formData.acceptPrivacy,\n        newsletterOptIn: formData.newsletterOptIn,\n      });\n\n      // Redirect will be handled by useAuth hook based on user role\n      // Default is likely /dashboard for new users\n    } catch (error) {\n      // Handle registration error\n      setErrors({\n        submit:\n          error instanceof Error\n            ? error.message\n            : 'Registration failed. Please try again.',\n      });\n    }\n  };\n\n  /**\n   * Handle input change\n   */\n  const handleChange = (field: keyof RegistrationFormData) => (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const value =\n      field === 'acceptTerms' ||\n      field === 'acceptPrivacy' ||\n      field === 'newsletterOptIn'\n        ? e.target.checked\n        : e.target.value;\n\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    // Clear field error on change\n    if (errors[field as keyof RegistrationFormErrors]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: undefined,\n      }));\n    }\n  };\n\n  return (\n    <>\n      <SEO\n        title=\"Register\"\n        description=\"Create your Course Creator Platform account. Join thousands of learners and instructors. GDPR and CCPA compliant registration with secure data handling.\"\n        keywords=\"register, sign up, create account, join course creator, student registration, instructor registration\"\n      />\n      <main className={styles['registration-page']}>\n      <div className={styles['registration-container']}>\n        <div className={styles['registration-header']}>\n          <Heading level=\"h1\" align=\"center\" gutterBottom={false}>\n            Create Account\n          </Heading>\n          <p className={styles['registration-subtitle']}>\n            Join the Course Creator Platform\n          </p>\n        </div>\n\n        <Card variant=\"elevated\" padding=\"large\">\n          <form\n            onSubmit={handleSubmit}\n            className={styles['registration-form']}\n            noValidate\n          >\n            {/* Submit Error Message */}\n            {errors.submit && (\n              <div className={styles['registration-error-banner']} role=\"alert\">\n                {errors.submit}\n              </div>\n            )}\n\n            {/* Email Input */}\n            <Input\n              type=\"email\"\n              label=\"Email Address\"\n              placeholder=\"you@example.com\"\n              value={formData.email}\n              onChange={handleChange('email')}\n              error={errors.email}\n              required\n              autoComplete=\"email\"\n              autoFocus\n              disabled={isLoading}\n            />\n\n            {/* Username Input */}\n            <Input\n              type=\"text\"\n              label=\"Username\"\n              placeholder=\"Choose a unique username\"\n              value={formData.username}\n              onChange={handleChange('username')}\n              error={errors.username}\n              required\n              autoComplete=\"username\"\n              disabled={isLoading}\n            />\n\n            {/* Password Input */}\n            <Input\n              type=\"password\"\n              label=\"Password\"\n              placeholder=\"Create a strong password\"\n              value={formData.password}\n              onChange={handleChange('password')}\n              error={errors.password}\n              required\n              autoComplete=\"new-password\"\n              disabled={isLoading}\n            />\n\n            {/* Confirm Password Input */}\n            <Input\n              type=\"password\"\n              label=\"Confirm Password\"\n              placeholder=\"Re-enter your password\"\n              value={formData.confirmPassword}\n              onChange={handleChange('confirmPassword')}\n              error={errors.confirmPassword}\n              required\n              autoComplete=\"new-password\"\n              disabled={isLoading}\n            />\n\n            {/* Terms and Privacy Section */}\n            <div className={styles['registration-legal']}>\n              <Checkbox\n                label={\n                  <span>\n                    I accept the{' '}\n                    <Link\n                      to=\"/terms\"\n                      className={styles['registration-link']}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Terms of Service\n                    </Link>\n                  </span>\n                }\n                checked={formData.acceptTerms}\n                onChange={handleChange('acceptTerms')}\n                error={errors.acceptTerms}\n                disabled={isLoading}\n                required\n              />\n\n              <Checkbox\n                label={\n                  <span>\n                    I accept the{' '}\n                    <Link\n                      to=\"/privacy\"\n                      className={styles['registration-link']}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Privacy Policy\n                    </Link>\n                  </span>\n                }\n                checked={formData.acceptPrivacy}\n                onChange={handleChange('acceptPrivacy')}\n                error={errors.acceptPrivacy}\n                disabled={isLoading}\n                required\n              />\n\n              <Checkbox\n                label=\"Send me updates and educational content via email\"\n                checked={formData.newsletterOptIn}\n                onChange={handleChange('newsletterOptIn')}\n                disabled={isLoading}\n              />\n            </div>\n\n            {/* Submit Button */}\n            <Button\n              type=\"submit\"\n              variant=\"primary\"\n              size=\"large\"\n              fullWidth\n              loading={isLoading}\n              disabled={isLoading}\n            >\n              {isLoading ? 'Creating Account...' : 'Create Account'}\n            </Button>\n\n            {/* Login Link */}\n            <div className={styles['registration-footer']}>\n              <p className={styles['registration-footer-text']}>\n                Already have an account?{' '}\n                <Link to=\"/login\" className={styles['registration-link']}>\n                  Sign in\n                </Link>\n              </p>\n            </div>\n          </form>\n        </Card>\n      </div>\n    </main>\n    </>\n  );\n};\n"],"names":["RegistrationPage","useNavigate","register","isLoading","useAuth","formData","setFormData","useState","errors","setErrors","validateForm","newErrors","handleSubmit","e","prev","error","handleChange","field","value","jsxs","Fragment","jsx","SEO","styles","Heading","Card","Input","Checkbox","Link","Button"],"mappings":"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"}