{"version":3,"file":"Textarea-B4yEwRZH.js","sources":["../../src/components/atoms/Textarea/Textarea.tsx"],"sourcesContent":["/**\n * Textarea Component - Tami Design System\n *\n * BUSINESS CONTEXT:\n * Multi-line text input component for forms across the platform.\n * Used for course descriptions, feedback, comments, and long-form content.\n *\n * TECHNICAL IMPLEMENTATION:\n * Auto-resize textarea with character counting and validation states.\n * Supports controlled/uncontrolled modes with full accessibility.\n *\n * DESIGN PRINCIPLES:\n * - Platform blue (#2563eb) for focus states\n * - 8px border radius\n * - Auto-resize with min/max constraints\n * - Character counter with warning states\n * - WCAG 2.1 AA+ compliant\n */\n\nimport React, { forwardRef, useEffect, useRef, useState, ChangeEvent } from 'react';\nimport styles from './Textarea.module.css';\n\nexport type TextareaResize = 'none' | 'vertical' | 'both';\n\nexport interface TextareaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'size'> {\n  /**\n   * Label for the textarea\n   */\n  label?: string;\n\n  /**\n   * Helper text below textarea\n   */\n  helperText?: string;\n\n  /**\n   * Error message (shows error state)\n   */\n  error?: string;\n\n  /**\n   * Success message (shows success state)\n   */\n  success?: string;\n\n  /**\n   * Warning message (shows warning state)\n   */\n  warning?: string;\n\n  /**\n   * Required field indicator\n   */\n  required?: boolean;\n\n  /**\n   * Enable auto-resize\n   * @default true\n   */\n  autoResize?: boolean;\n\n  /**\n   * Minimum number of rows\n   * @default 3\n   */\n  minRows?: number;\n\n  /**\n   * Maximum number of rows\n   * @default 10\n   */\n  maxRows?: number;\n\n  /**\n   * Show character counter\n   * @default false\n   */\n  showCharacterCount?: boolean;\n\n  /**\n   * Resize behavior\n   * @default \"vertical\"\n   */\n  resize?: TextareaResize;\n\n  /**\n   * Custom className\n   */\n  className?: string;\n}\n\n/**\n * Textarea Component\n *\n * WHY THIS APPROACH:\n * - Auto-resize improves UX by expanding as user types\n * - Character counter helps users stay within limits\n * - Validation states provide immediate feedback\n * - forwardRef enables integration with form libraries\n * - Controlled/uncontrolled modes for flexibility\n *\n * @example\n * ```tsx\n * // Basic textarea\n * <Textarea\n *   label=\"Description\"\n *   placeholder=\"Enter course description...\"\n *   maxLength={500}\n *   showCharacterCount\n * />\n *\n * // Controlled with validation\n * <Textarea\n *   label=\"Feedback\"\n *   value={feedback}\n *   onChange={(e) => setFeedback(e.target.value)}\n *   error={feedbackError}\n *   required\n * />\n *\n * // Auto-resize with constraints\n * <Textarea\n *   label=\"Comment\"\n *   autoResize\n *   minRows={2}\n *   maxRows={8}\n *   placeholder=\"Add your comment...\"\n * />\n * ```\n */\nexport const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(({\n  label,\n  helperText,\n  error,\n  success,\n  warning,\n  required = false,\n  autoResize = true,\n  minRows = 3,\n  maxRows = 10,\n  showCharacterCount = false,\n  resize = 'vertical',\n  className,\n  value,\n  defaultValue,\n  onChange,\n  maxLength,\n  id,\n  disabled,\n  ...rest\n}, ref) => {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const [charCount, setCharCount] = useState(0);\n\n  // Handle ref forwarding\n  useEffect(() => {\n    if (ref && textareaRef.current) {\n      if (typeof ref === 'function') {\n        ref(textareaRef.current);\n      } else {\n        ref.current = textareaRef.current;\n      }\n    }\n  }, [ref]);\n\n  // Auto-resize functionality\n  const adjustHeight = () => {\n    if (!autoResize || !textareaRef.current) return;\n\n    const textarea = textareaRef.current;\n    const lineHeight = parseInt(getComputedStyle(textarea).lineHeight) || 24;\n    const minHeight = minRows * lineHeight;\n    const maxHeight = maxRows * lineHeight;\n\n    // Reset height to auto to get correct scrollHeight\n    textarea.style.height = 'auto';\n\n    // Calculate new height\n    const newHeight = Math.min(Math.max(textarea.scrollHeight, minHeight), maxHeight);\n\n    // Set new height\n    textarea.style.height = `${newHeight}px`;\n\n    // Add overflow if max height is reached\n    textarea.style.overflowY = textarea.scrollHeight > maxHeight ? 'auto' : 'hidden';\n  };\n\n  // Adjust height on mount and when value changes\n  useEffect(() => {\n    adjustHeight();\n  }, [value, defaultValue, autoResize, minRows, maxRows]);\n\n  // Handle change with character counting\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const newValue = e.target.value;\n    setCharCount(newValue.length);\n    adjustHeight();\n    onChange?.(e);\n  };\n\n  // Initialize character count\n  useEffect(() => {\n    const initialValue = (value || defaultValue || '') as string;\n    setCharCount(initialValue.length);\n  }, []);\n\n  // Determine validation state\n  const validationState = error ? 'error' : success ? 'success' : warning ? 'warning' : 'default';\n\n  // Build container classes\n  const containerClasses = [\n    styles['textarea-container'],\n    styles[`textarea-${validationState}`],\n    disabled && styles['textarea-disabled'],\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  // Build textarea classes\n  const textareaClasses = [\n    styles.textarea,\n    !autoResize && styles[`textarea-resize-${resize}`],\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  // Generate unique ID if not provided\n  const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;\n\n  // Calculate character count percentage for warning\n  const charPercentage = maxLength ? (charCount / maxLength) * 100 : 0;\n  const showCharWarning = maxLength && charPercentage >= 90;\n\n  return (\n    <div className={containerClasses}>\n      {/* Label */}\n      {label && (\n        <label htmlFor={textareaId} className={styles['textarea-label']}>\n          {label}\n          {required && <span className={styles['textarea-required']}>*</span>}\n        </label>\n      )}\n\n      {/* Textarea */}\n      <textarea\n        ref={textareaRef}\n        id={textareaId}\n        className={textareaClasses}\n        value={value}\n        defaultValue={defaultValue}\n        onChange={handleChange}\n        maxLength={maxLength}\n        disabled={disabled}\n        aria-invalid={!!error}\n        aria-required={required}\n        aria-describedby={\n          error || success || warning || helperText\n            ? `${textareaId}-message`\n            : undefined\n        }\n        rows={minRows}\n        {...rest}\n      />\n\n      {/* Character counter and message container */}\n      <div className={styles['textarea-footer']}>\n        {/* Helper text or validation message */}\n        {(helperText || error || success || warning) && (\n          <div id={`${textareaId}-message`} className={styles['textarea-message']}>\n            {error && <span className={styles['textarea-error-text']}>{error}</span>}\n            {!error && success && <span className={styles['textarea-success-text']}>{success}</span>}\n            {!error && !success && warning && (\n              <span className={styles['textarea-warning-text']}>{warning}</span>\n            )}\n            {!error && !success && !warning && helperText && (\n              <span className={styles['textarea-helper-text']}>{helperText}</span>\n            )}\n          </div>\n        )}\n\n        {/* Character counter */}\n        {showCharacterCount && (\n          <div\n            className={`${styles['textarea-char-count']} ${\n              showCharWarning ? styles['textarea-char-count-warning'] : ''\n            }`}\n          >\n            {charCount}\n            {maxLength && ` / ${maxLength}`}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\nTextarea.displayName = 'Textarea';\n"],"names":["Textarea","forwardRef","label","helperText","error","success","warning","required","autoResize","minRows","maxRows","showCharacterCount","resize","className","value","defaultValue","onChange","maxLength","id","disabled","rest","ref","textareaRef","useRef","charCount","setCharCount","useState","useEffect","adjustHeight","textarea","lineHeight","minHeight","maxHeight","newHeight","handleChange","e","newValue","validationState","containerClasses","styles","textareaClasses","textareaId","charPercentage","showCharWarning","jsxs","jsx"],"mappings":"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"}