{"version":3,"file":"StudentCertificates-BrZH7jjg.js","sources":["../../src/pages/StudentCertificates.tsx"],"sourcesContent":["/**\n * Student Certificates Page\n *\n * BUSINESS CONTEXT:\n * Displays certificates earned by students upon course completion.\n * Students can view, download (PDF), and share their certificates.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Fetches certificates from analytics/progress API\n * - Displays empty state when no certificates exist\n * - Provides download and share functionality\n * - Protected route (student role only)\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { DashboardLayout } from '../components/templates/DashboardLayout';\nimport { Card } from '../components/atoms/Card';\nimport { Button } from '../components/atoms/Button';\nimport { Heading } from '../components/atoms/Heading';\nimport { Spinner } from '../components/atoms/Spinner';\nimport { SEO } from '../components/common/SEO';\nimport { useAuth } from '../hooks/useAuth';\nimport { analyticsService } from '../services';\nimport styles from './StudentCertificates.module.css';\n\n/**\n * Certificate Interface\n */\nexport interface Certificate {\n  id: string;\n  course_id: string;\n  course_name: string;\n  course_title: string;\n  earned_date: string;\n  certificate_id: string;\n  pdf_url?: string;\n  share_url?: string;\n  completion_percentage: number;\n  grade?: string;\n}\n\n/**\n * Student Certificates Page Component\n *\n * WHY THIS APPROACH:\n * - Shows achievements to motivate students\n * - Provides shareable credentials\n * - Empty state encourages course enrollment\n * - Download functionality for portfolio use\n */\nexport const StudentCertificates: React.FC = () => {\n  const { user } = useAuth();\n\n  // Fetch certificates from API\n  const {\n    data: certificates = [],\n    isLoading,\n    error,\n  } = useQuery<Certificate[]>({\n    queryKey: ['certificates', user?.id],\n    queryFn: async () => {\n      // TODO: Replace with actual API call when endpoint is ready\n      // return await analyticsService.getStudentCertificates(user!.id);\n\n      // Mock data for now\n      return [];\n    },\n    enabled: !!user?.id,\n  });\n\n  /**\n   * Handle certificate download\n   */\n  const handleDownload = async (certificate: Certificate) => {\n    if (certificate.pdf_url) {\n      window.open(certificate.pdf_url, '_blank');\n    } else {\n      // Generate PDF via API\n      try {\n        const response = await fetch(`/api/v1/certificates/${certificate.id}/download`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        });\n\n        if (response.ok) {\n          const blob = await response.blob();\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement('a');\n          a.href = url;\n          a.download = `certificate-${certificate.certificate_id}.pdf`;\n          document.body.appendChild(a);\n          a.click();\n          window.URL.revokeObjectURL(url);\n          document.body.removeChild(a);\n        }\n      } catch (error) {\n        console.error('Failed to download certificate:', error);\n        alert('Failed to download certificate. Please try again.');\n      }\n    }\n  };\n\n  /**\n   * Handle certificate share\n   */\n  const handleShare = (certificate: Certificate) => {\n    const shareUrl = certificate.share_url || `${window.location.origin}/certificates/verify/${certificate.certificate_id}`;\n\n    if (navigator.share) {\n      navigator.share({\n        title: `Certificate: ${certificate.course_name}`,\n        text: `I earned a certificate in ${certificate.course_name}!`,\n        url: shareUrl,\n      }).catch((error) => console.log('Error sharing:', error));\n    } else {\n      // Fallback: Copy to clipboard\n      navigator.clipboard.writeText(shareUrl).then(() => {\n        alert('Certificate link copied to clipboard!');\n      });\n    }\n  };\n\n  /**\n   * Format date for display\n   */\n  const formatDate = (dateString: string): string => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const seoElement = (\n    <SEO\n      title=\"My Certificates\"\n      description=\"View and download your earned course completion certificates\"\n      keywords=\"certificates, achievements, course completion, credentials\"\n    />\n  );\n\n  return (\n    <DashboardLayout seo={seoElement}>\n      <div className={styles.certificatesContainer}>\n        <div className={styles.header}>\n          <Heading level={1} className={styles.pageTitle}>\n            My Certificates\n          </Heading>\n          <Link to=\"/dashboard/student\" className={styles.backLink}>\n            <i className=\"fas fa-arrow-left\"></i>\n            Back to Dashboard\n          </Link>\n        </div>\n\n        {isLoading ? (\n          <div className={styles.loadingState}>\n            <Spinner size=\"large\" />\n            <p>Loading your certificates...</p>\n          </div>\n        ) : error ? (\n          <Card className={styles.errorState}>\n            <i className=\"fas fa-exclamation-circle\"></i>\n            <p>Failed to load certificates. Please refresh the page.</p>\n          </Card>\n        ) : certificates.length === 0 ? (\n          // Empty State\n          <Card className={styles.noCertificates}>\n            <div className={styles.noCertificatesIcon}>\n              <i className=\"fas fa-certificate\"></i>\n            </div>\n            <Heading level={2} className={styles.noCertificatesTitle}>\n              No Certificates Yet\n            </Heading>\n            <p className={styles.noCertificatesMessage}>\n              Complete your courses to earn certificates and showcase your achievements!\n            </p>\n            <Link to=\"/courses/my-courses\">\n              <Button variant=\"primary\" size=\"large\">\n                <i className=\"fas fa-book\"></i>\n                Browse Your Courses\n              </Button>\n            </Link>\n          </Card>\n        ) : (\n          // Certificates Grid\n          <div className={styles.certificatesGrid}>\n            {certificates.map((certificate) => (\n              <Card key={certificate.id} className={styles.certificateCard}>\n                <div className={styles.certificateHeader}>\n                  <div className={styles.certificateBadge}>\n                    <i className=\"fas fa-award\"></i>\n                  </div>\n\n                  <div className={styles.certificateInfo}>\n                    <Heading level={3} className={styles.certificateTitle}>\n                      {certificate.course_name}\n                    </Heading>\n\n                    <div className={styles.certificateDate}>\n                      <i className=\"fas fa-calendar\"></i>\n                      <span>Earned on {formatDate(certificate.earned_date)}</span>\n                    </div>\n\n                    {certificate.grade && (\n                      <div className={styles.certificateGrade}>\n                        <i className=\"fas fa-star\"></i>\n                        <span>Final Grade: {certificate.grade}</span>\n                      </div>\n                    )}\n\n                    <div className={styles.certificateId}>\n                      Certificate ID: {certificate.certificate_id}\n                    </div>\n                  </div>\n\n                  <div className={styles.certificateActions}>\n                    <Button\n                      onClick={() => handleDownload(certificate)}\n                      variant=\"secondary\"\n                      size=\"small\"\n                      className={styles.downloadBtn}\n                    >\n                      <i className=\"fas fa-download\"></i>\n                      Download\n                    </Button>\n\n                    <Button\n                      onClick={() => handleShare(certificate)}\n                      variant=\"secondary\"\n                      size=\"small\"\n                      className={styles.shareBtn}\n                    >\n                      <i className=\"fas fa-share\"></i>\n                      Share\n                    </Button>\n                  </div>\n                </div>\n\n                {certificate.completion_percentage === 100 && (\n                  <div className={styles.completionBadge}>\n                    <i className=\"fas fa-check-circle\"></i>\n                    100% Complete\n                  </div>\n                )}\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n};\n"],"names":["StudentCertificates","user","useAuth","certificates","isLoading","error","useQuery","handleDownload","certificate","response","blob","url","a","handleShare","shareUrl","formatDate","dateString","seoElement","jsx","SEO","DashboardLayout","styles","jsxs","Heading","Link","Spinner","Card","Button"],"mappings":"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"}