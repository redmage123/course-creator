import{j as e}from"./query-vendor-D-Supqfh.js";import{u as B,a,L as D}from"./react-vendor-DF6vRnOe.js";import{D as w}from"./DashboardLayout-nEWu0G2I.js";import{H as p,C as c,B as g,S as R,c as F}from"./index-DRoPcouX.js";import{u as A}from"./hooks-Dtke09KW.js";import"./state-vendor-CcNjB5Go.js";const N=()=>{const b=B(),f=A(r=>r.user.profile),[o,u]=a.useState(null),[h,m]=a.useState(!1),[i,x]=a.useState(!1),[n,j]=a.useState(null),[y,s]=a.useState(null),v=a.useCallback(r=>{r.preventDefault(),m(!1);const t=r.dataTransfer.files[0];if(t){const l=["application/json","text/yaml","application/x-yaml"],T=[".json",".yaml",".yml"].some(L=>t.name.toLowerCase().endsWith(L));l.includes(t.type)||T?(u(t),s(null)):s("Please upload a JSON or YAML file.")}},[]),C=a.useCallback(r=>{r.preventDefault(),m(!0)},[]),S=a.useCallback(r=>{r.preventDefault(),m(!1)},[]),k=r=>{const t=r.target.files?.[0];t&&(u(t),s(null))},z=async()=>{if(!(!o||!f?.organizationId)){x(!0),s(null),j(null);try{const r=new FormData;r.append("template",o),r.append("organization_id",f.organizationId);const t=await F.post("/api/v1/organizations/import-template",r,{headers:{"Content-Type":"multipart/form-data"}});j(t.data),t.data.success&&setTimeout(()=>b("/dashboard/org-admin"),3e3)}catch(r){console.error("Failed to import template:",r),s(r.response?.data?.message||"Failed to import template. Please check the file format and try again.")}finally{x(!1)}}},I=()=>{const r={name:"Sample Organization Template",version:"1.0",description:"A sample template for creating training projects and tracks",projects:[{name:"AI Fundamentals Training",description:"Comprehensive AI training program for corporate teams",tracks:[{name:"Machine Learning Basics",description:"Introduction to ML concepts",courses:[{title:"Introduction to Machine Learning",description:"Learn ML fundamentals",difficulty_level:"beginner",duration_hours:8}]}]}]},t=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),d=document.createElement("a");d.href=l,d.download="organization_template_sample.json",d.click(),URL.revokeObjectURL(l)};return e.jsx(w,{children:e.jsxs("main",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(p,{level:"h1",gutterBottom:!0,children:"Import Organization Template"}),e.jsx("p",{style:{color:"#666",fontSize:"0.95rem",marginBottom:"1rem"},children:"Import a template to automatically create projects, tracks, and courses for your organization"}),e.jsx(c,{variant:"outlined",padding:"medium",style:{backgroundColor:"#eff6ff"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"#1e40af"},children:[e.jsx("strong",{children:"üí° Tip:"})," Templates can define complete training programs with multiple tracks and courses. AI will help populate course content based on the template structure."]})})]}),y&&e.jsx(c,{variant:"outlined",padding:"medium",style:{marginBottom:"1.5rem",borderColor:"#ef4444",backgroundColor:"#fee2e2"},children:e.jsx("p",{style:{color:"#dc2626",margin:0,fontWeight:500},children:y})}),n&&e.jsxs(c,{variant:"elevated",padding:"large",style:{marginBottom:"1.5rem",backgroundColor:n.success?"#d1fae5":"#fee2e2",borderColor:n.success?"#10b981":"#ef4444"},children:[e.jsx(p,{level:"h3",style:{fontSize:"1.1rem",marginBottom:"1rem"},children:n.success?"‚úÖ Import Successful!":"‚ö†Ô∏è Import Completed with Issues"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"Projects Created"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"1.5rem",fontWeight:"bold"},children:n.projectsCreated})]}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"Tracks Created"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"1.5rem",fontWeight:"bold"},children:n.tracksCreated})]}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"Courses Created"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"1.5rem",fontWeight:"bold"},children:n.coursesCreated})]})]}),n.errors.length>0&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem"},children:[e.jsx("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"#dc2626"},children:"Errors:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:n.errors.map((r,t)=>e.jsx("li",{style:{color:"#dc2626",fontSize:"0.875rem"},children:r},t))})]})]}),e.jsxs(c,{variant:"outlined",padding:"large",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx(p,{level:"h2",style:{fontSize:"1.25rem",margin:0},children:"Upload Template File"}),e.jsx(g,{variant:"text",size:"small",onClick:I,children:"üì• Download Sample Template"})]}),e.jsxs("div",{onDrop:v,onDragOver:C,onDragLeave:S,style:{border:`2px dashed ${h?"#3b82f6":"#d1d5db"}`,borderRadius:"0.5rem",padding:"3rem 2rem",textAlign:"center",backgroundColor:h?"#eff6ff":"#f9fafb",cursor:"pointer",transition:"all 0.2s"},onClick:()=>document.getElementById("templateFile")?.click(),children:[e.jsx("input",{id:"templateFile",type:"file",accept:".json,.yaml,.yml",onChange:k,style:{display:"none"},disabled:i}),e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"üìÅ"}),o?e.jsxs("div",{children:[e.jsxs("p",{style:{fontSize:"1.1rem",fontWeight:500,color:"#10b981",marginBottom:"0.5rem"},children:["‚úÖ ",o.name]}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#666"},children:[(o.size/1024).toFixed(2)," KB ‚Ä¢ Click to replace"]})]}):e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:500,marginBottom:"0.5rem"},children:"Drag & drop your template file here"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666"},children:"or click to browse ‚Ä¢ Supports JSON, YAML"})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f0f9ff",borderRadius:"0.375rem",border:"1px solid #bae6fd"},children:[e.jsx("p",{style:{margin:"0 0 0.5rem",fontWeight:500,fontSize:"0.875rem",color:"#0c4a6e"},children:"Template Structure:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"0.875rem",color:"#0c4a6e"},children:[e.jsxs("li",{children:[e.jsx("code",{style:{backgroundColor:"#e0f2fe",padding:"0.125rem 0.25rem",borderRadius:"0.25rem"},children:"projects[]"})," - Array of training projects"]}),e.jsxs("li",{children:[e.jsx("code",{style:{backgroundColor:"#e0f2fe",padding:"0.125rem 0.25rem",borderRadius:"0.25rem"},children:"tracks[]"})," - Learning tracks within projects"]}),e.jsxs("li",{children:[e.jsx("code",{style:{backgroundColor:"#e0f2fe",padding:"0.125rem 0.25rem",borderRadius:"0.25rem"},children:"courses[]"})," - Courses within tracks"]}),e.jsx("li",{children:"AI will generate content for courses based on titles and descriptions"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx(D,{to:"/dashboard/org-admin",children:e.jsx(g,{variant:"secondary",disabled:i,children:"Cancel"})}),e.jsx(g,{variant:"primary",onClick:z,disabled:!o||i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{size:"small"})," Importing..."]}):"üöÄ Import Template"})]})]})})};export{N as ImportTemplatePage};
//# sourceMappingURL=ImportTemplatePage-B2-MFvJ2.js.map
