import{j as e}from"./query-vendor-D-Supqfh.js";import{u as T,h as S,a as m}from"./react-vendor-DF6vRnOe.js";import{c as d,u as k}from"./index-DRoPcouX.js";import"./state-vendor-CcNjB5Go.js";class F{async getCourses(t){const a=new URLSearchParams;t&&(t.organization_id&&a.append("organization_id",t.organization_id),t.track_id&&a.append("track_id",t.track_id),t.instructor_id&&a.append("instructor_id",t.instructor_id),t.difficulty_level&&a.append("difficulty_level",t.difficulty_level),t.category&&a.append("category",t.category),t.published_only!==void 0&&a.append("published_only",String(t.published_only)));const i=a.toString(),h=`/courses${i?`?${i}`:""}`;return await d.get(h)}async getCourseById(t){return await d.get(`/courses/${t}`)}async createCourse(t){return await d.post("/courses",t)}async updateCourse(t,a){return await d.put(`/courses/${t}`,a)}async deleteCourse(t){await d.delete(`/courses/${t}`)}async publishCourse(t){return await d.post(`/courses/${t}/publish`,{})}async unpublishCourse(t){return await d.post(`/courses/${t}/unpublish`,{})}async getCoursesByTrack(t){return this.getCourses({track_id:t})}async getCoursesByOrganization(t,a=!1){return this.getCourses({organization_id:t,published_only:a})}}const I=new F,G="_container_1eced_5",q="_header_1eced_11",D="_subtitle_1eced_22",P="_form_1eced_27",z="_section_1eced_34",E="_formGroup_1eced_51",L="_required_1eced_63",R="_charCount_1eced_92",$="_helpText_1eced_100",A="_formRow_1eced_107",U="_error_1eced_113",O="_tagInputContainer_1eced_123",K="_addTagBtn_1eced_132",H="_tagsList_1eced_149",J="_tag_1eced_123",M="_removeTagBtn_1eced_167",Q="_actions_1eced_188",V="_cancelBtn_1eced_197",W="_submitBtn_1eced_198",s={container:G,header:q,subtitle:D,form:P,section:z,formGroup:E,required:L,charCount:R,helpText:$,formRow:A,error:U,tagInputContainer:O,addTagBtn:K,tagsList:H,tag:J,removeTagBtn:M,actions:Q,cancelBtn:V,submitBtn:W},te=()=>{const u=T(),[t]=S(),{user:a}=k(),i=t.get("track_id"),h=a?.organization_id,[n,g]=m.useState({title:"",description:"",category:"",difficulty_level:"beginner",estimated_duration:void 0,duration_unit:"weeks",price:0,tags:[],organization_id:h,track_id:i||void 0}),[p,x]=m.useState(""),[_,f]=m.useState(!1),[y,j]=m.useState(null),v=["beginner","intermediate","advanced"],b=["hours","days","weeks","months"],c=r=>{const{name:o,value:l}=r.target;g(B=>({...B,[o]:o==="estimated_duration"||o==="price"?l?parseFloat(l):void 0:l}))},C=()=>{p.trim()&&!n.tags?.includes(p.trim())&&(g(r=>({...r,tags:[...r.tags||[],p.trim()]})),x(""))},N=r=>{g(o=>({...o,tags:o.tags?.filter(l=>l!==r)||[]}))},w=async r=>{r.preventDefault(),f(!0),j(null);try{if(!n.title.trim())throw new Error("Course title is required");if(!n.description.trim())throw new Error("Course description is required");await I.createCourse(n),u(i?"/organization/tracks":"/dashboard/org-admin")}catch(o){j(o instanceof Error?o.message:"Failed to create course"),console.error("Course creation error:",o)}finally{f(!1)}};return e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.header,children:[e.jsx("h1",{children:"Create New Course"}),e.jsx("p",{className:s.subtitle,children:i?"Add a new course to your learning track":"Create a standalone course"})]}),e.jsxs("form",{className:s.form,onSubmit:w,children:[y&&e.jsx("div",{className:s.error,role:"alert",children:y}),e.jsxs("section",{className:s.section,children:[e.jsx("h2",{children:"Basic Information"}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"title",children:["Course Title ",e.jsx("span",{className:s.required,children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:c,placeholder:"e.g., Introduction to Python Programming",required:!0,maxLength:200})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"description",children:["Description ",e.jsx("span",{className:s.required,children:"*"})]}),e.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:c,placeholder:"Provide a detailed description of the course...",required:!0,maxLength:2e3,rows:5}),e.jsxs("span",{className:s.charCount,children:[n.description.length," / 2000"]})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"category",children:"Category"}),e.jsx("input",{type:"text",id:"category",name:"category",value:n.category||"",onChange:c,placeholder:"e.g., Programming, Data Science, Business"})]})]}),e.jsxs("section",{className:s.section,children:[e.jsx("h2",{children:"Course Settings"}),e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"difficulty_level",children:"Difficulty Level"}),e.jsx("select",{id:"difficulty_level",name:"difficulty_level",value:n.difficulty_level,onChange:c,children:v.map(r=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"estimated_duration",children:"Estimated Duration"}),e.jsx("input",{type:"number",id:"estimated_duration",name:"estimated_duration",value:n.estimated_duration||"",onChange:c,min:"1",placeholder:"e.g., 8"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"duration_unit",children:"Duration Unit"}),e.jsx("select",{id:"duration_unit",name:"duration_unit",value:n.duration_unit,onChange:c,children:b.map(r=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"price",children:"Price (USD)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:n.price,onChange:c,min:"0",step:"0.01",placeholder:"0.00"}),e.jsx("span",{className:s.helpText,children:"Set to 0 for free courses"})]})]}),e.jsxs("section",{className:s.section,children:[e.jsx("h2",{children:"Tags"}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:"tag-input",children:"Add Tags"}),e.jsxs("div",{className:s.tagInputContainer,children:[e.jsx("input",{type:"text",id:"tag-input",value:p,onChange:r=>x(r.target.value),onKeyPress:r=>{r.key==="Enter"&&(r.preventDefault(),C())},placeholder:"Type a tag and press Enter"}),e.jsx("button",{type:"button",onClick:C,className:s.addTagBtn,children:"Add Tag"})]}),n.tags&&n.tags.length>0&&e.jsx("div",{className:s.tagsList,children:n.tags.map(r=>e.jsxs("span",{className:s.tag,children:[r,e.jsx("button",{type:"button",onClick:()=>N(r),className:s.removeTagBtn,"aria-label":`Remove ${r}`,children:"Ã—"})]},r))})]})]}),e.jsxs("div",{className:s.actions,children:[e.jsx("button",{type:"button",onClick:()=>u(-1),className:s.cancelBtn,disabled:_,children:"Cancel"}),e.jsx("button",{type:"submit",className:s.submitBtn,disabled:_,children:_?"Creating...":"Create Course"})]})]})]})};export{te as CourseCreatePage};
//# sourceMappingURL=CourseCreatePage-BkpcVbpS.js.map
