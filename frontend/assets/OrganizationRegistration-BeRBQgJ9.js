import{j as e}from"./query-vendor-DXemzGoE.js";import{u as A,a as d,L as z}from"./react-vendor-DLPaXABT.js";import{C as O,H as T,B as w,S as E}from"./index-tkTXbn0O.js";import{I as t}from"./Input-I95rkvnn.js";import{T as D}from"./Textarea-B4yEwRZH.js";import{S}from"./Select-5dtzX9qU.js";import{o as F}from"./organizationService-BO5XOmW1.js";import"./state-vendor-DnXO85Wm.js";const B="_registrationContainer_1xdfz_7",U="_backLink_1xdfz_17",R="_registrationCard_1xdfz_34",H="_registrationHeader_1xdfz_55",J="_title_1xdfz_60",Y="_subtitle_1xdfz_66",M="_professionalBadge_1xdfz_72",$="_form_1xdfz_84",K="_formSection_1xdfz_90",W="_sectionTitle_1xdfz_98",Z="_sectionDescription_1xdfz_110",Q="_formGrid_1xdfz_120",V="_formGridSingle_1xdfz_126",X="_formGroup_1xdfz_132",ee="_formLabel_1xdfz_136",ae="_optional_1xdfz_144",re="_required_1xdfz_150",se="_logoUploadArea_1xdfz_154",oe="_uploadPlaceholder_1xdfz_169",ne="_logoPreview_1xdfz_187",ie="_previewImage_1xdfz_192",te="_removeLogo_1xdfz_199",le="_hiddenFileInput_1xdfz_203",ce="_phoneGroup_1xdfz_207",de="_countryCodeSelect_1xdfz_214",me="_checkboxGroup_1xdfz_218",ue="_checkboxLabel_1xdfz_224",pe="_checkbox_1xdfz_218",_e="_error_1xdfz_248",fe="_submitSection_1xdfz_254",he="_submitError_1xdfz_259",ge="_submitButton_1xdfz_273",xe="_loginLink_1xdfz_277",r={registrationContainer:B,backLink:U,registrationCard:R,registrationHeader:H,title:J,subtitle:Y,professionalBadge:M,form:$,formSection:K,sectionTitle:W,sectionDescription:Z,formGrid:Q,formGridSingle:V,formGroup:X,formLabel:ee,optional:ae,required:re,logoUploadArea:se,uploadPlaceholder:oe,logoPreview:ne,previewImage:ie,removeLogo:te,hiddenFileInput:le,phoneGroup:ce,countryCodeSelect:de,checkboxGroup:me,checkboxLabel:ue,checkbox:pe,error:_e,submitSection:fe,submitError:he,submitButton:ge,loginLink:xe},Se=()=>{const k=A(),_=d.useRef(null),[a,u]=d.useState({name:"",slug:"",description:"",domain:"",logo:null,street_address:"",city:"",state_province:"",postal_code:"",country:"",contact_phone_country:"+1",contact_phone:"",contact_email:"",admin_full_name:"",admin_username:"",admin_email:"",admin_password:"",admin_password_confirm:"",terms_accepted:!1,privacy_accepted:!1}),[n,m]=d.useState({}),[g,x]=d.useState(null),[v,b]=d.useState(!1),[j,p]=d.useState(null),[y,P]=d.useState(!1);d.useEffect(()=>{if(a.name&&!y){const o=a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");u(s=>({...s,slug:o}))}},[a.name,y]);const i=o=>{const{name:s,value:c,type:l}=o.target,f=o.target.checked;u(h=>({...h,[s]:l==="checkbox"?f:c})),n[s]&&m(h=>{const C={...h};return delete C[s],C}),s==="slug"&&P(!0)},N=o=>s=>{u(c=>({...c,[o]:s})),n[o]&&m(c=>{const l={...c};return delete l[o],l})},L=o=>{const s=o.target.files?.[0];if(s){if(!s.type.startsWith("image/")){m(l=>({...l,logo:"Please select an image file"}));return}if(s.size>5*1024*1024){m(l=>({...l,logo:"Logo file must be less than 5MB"}));return}u(l=>({...l,logo:s}));const c=new FileReader;c.onloadend=()=>{x(c.result)},c.readAsDataURL(s),n.logo&&m(l=>{const f={...l};return delete f.logo,f})}},G=()=>{u(o=>({...o,logo:null})),x(null),_.current&&(_.current.value="")},q=()=>{const o={};return a.name.trim()||(o.name="Organization name is required"),a.slug.trim()||(o.slug="Organization slug is required"),a.domain.trim()||(o.domain="Organization domain is required"),a.country||(o.country="Country is required"),a.contact_email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.contact_email)||(o.contact_email="Invalid email format"):o.contact_email="Contact email is required",a.admin_full_name.trim()||(o.admin_full_name="Admin name is required"),a.admin_username.trim()||(o.admin_username="Admin username is required"),a.admin_email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.admin_email)||(o.admin_email="Invalid email format"):o.admin_email="Admin email is required",a.admin_password?a.admin_password.length<8?o.admin_password="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(a.admin_password)||(o.admin_password="Password must contain uppercase, lowercase, and number"):o.admin_password="Password is required",a.admin_password!==a.admin_password_confirm&&(o.admin_password_confirm="Passwords do not match"),a.terms_accepted||(o.terms_accepted="You must accept the Terms of Service"),a.privacy_accepted||(o.privacy_accepted="You must accept the Privacy Policy"),m(o),Object.keys(o).length===0},I=async o=>{if(o.preventDefault(),!q()){p("Please fix the errors above before submitting");return}b(!0),p(null);try{const s=new FormData;s.append("name",a.name),s.append("slug",a.slug),s.append("description",a.description),s.append("domain",a.domain),a.logo&&s.append("logo",a.logo),s.append("street_address",a.street_address),s.append("city",a.city),s.append("state_province",a.state_province),s.append("postal_code",a.postal_code),s.append("country",a.country),s.append("contact_phone_country",a.contact_phone_country),s.append("contact_phone",a.contact_phone),s.append("contact_email",a.contact_email),s.append("admin_full_name",a.admin_full_name),s.append("admin_username",a.admin_username),s.append("admin_email",a.admin_email),s.append("admin_password",a.admin_password);const c=await F.registerOrganization(s);k("/login?message=registration_success")}catch(s){console.error("Organization registration error:",s),s.response?.data?.detail?p(s.response.data.detail):s.response?.data?.message?p(s.response.data.message):p("Failed to register organization. Please try again.")}finally{b(!1)}};return e.jsxs("div",{className:r.registrationContainer,children:[e.jsxs(z,{to:"/",className:r.backLink,children:[e.jsx("i",{className:"fas fa-arrow-left"}),"Back to Homepage"]}),e.jsxs(O,{className:r.registrationCard,children:[e.jsxs("div",{className:r.registrationHeader,children:[e.jsx(T,{level:"h1",className:r.title,children:"Register Your Organization"}),e.jsx("p",{className:r.subtitle,children:"Join the Course Creator Platform and start delivering world-class training programs"}),e.jsxs("div",{className:r.professionalBadge,children:[e.jsx("i",{className:"fas fa-check-circle"}),"Professional Training Platform"]})]}),e.jsxs("form",{onSubmit:I,className:r.form,children:[e.jsxs("div",{className:r.formSection,children:[e.jsxs("div",{className:r.sectionTitle,children:[e.jsx("i",{className:"fas fa-building"}),"Organization Details"]}),e.jsxs("div",{className:r.formGrid,children:[e.jsx(t,{label:"Organization Name",name:"name",value:a.name,onChange:i,error:n.name,required:!0,placeholder:"Enter your organization name"}),e.jsx(t,{label:"Organization Slug",name:"slug",value:a.slug,onChange:i,error:n.slug,required:!0,placeholder:"organization-slug",helpText:"Used in URLs. Auto-generated from name."})]}),e.jsxs("div",{className:r.formGridSingle,children:[e.jsx(D,{label:"Organization Description",name:"description",value:a.description,onChange:i,error:n.description,placeholder:"Brief description of your organization",helpText:"Optional: Tell us about your organization"}),e.jsx(t,{label:"Organization Domain",name:"domain",value:a.domain,onChange:i,error:n.domain,required:!0,placeholder:"example.com",helpText:"Your organization's website domain"})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsxs("label",{className:r.formLabel,children:["Organization Logo",e.jsx("span",{className:r.optional,children:"(Optional)"})]}),e.jsx("div",{className:r.logoUploadArea,onClick:()=>_.current?.click(),children:g?e.jsxs("div",{className:r.logoPreview,children:[e.jsx("img",{src:g,alt:"Logo preview",className:r.previewImage}),e.jsxs(w,{type:"button",onClick:o=>{o.stopPropagation(),G()},variant:"danger",size:"small",className:r.removeLogo,children:[e.jsx("i",{className:"fas fa-times"}),"Remove"]})]}):e.jsxs("div",{className:r.uploadPlaceholder,children:[e.jsx("i",{className:"fas fa-cloud-upload-alt fa-3x"}),e.jsx("p",{children:"Click to upload logo or drag and drop"}),e.jsx("small",{children:"PNG, JPG, GIF up to 5MB"})]})}),e.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:L,className:r.hiddenFileInput}),n.logo&&e.jsx("p",{className:r.error,children:n.logo})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsxs("div",{className:r.sectionTitle,children:[e.jsx("i",{className:"fas fa-map-marker-alt"}),"Organization Address"]}),e.jsx("div",{className:r.formGridSingle,children:e.jsx(t,{label:"Street Address",name:"street_address",value:a.street_address,onChange:i,error:n.street_address,placeholder:"Street address"})}),e.jsxs("div",{className:r.formGrid,children:[e.jsx(t,{label:"City",name:"city",value:a.city,onChange:i,error:n.city,placeholder:"City"}),e.jsx(t,{label:"State/Province",name:"state_province",value:a.state_province,onChange:i,error:n.state_province,placeholder:"State or Province"}),e.jsx(t,{label:"Postal Code",name:"postal_code",value:a.postal_code,onChange:i,error:n.postal_code,placeholder:"Postal code"}),e.jsx(S,{label:"Country",name:"country",value:a.country,onChange:N("country"),error:n.country,required:!0,options:[{value:"",label:"Select Country"},{value:"US",label:"United States"},{value:"CA",label:"Canada"},{value:"GB",label:"United Kingdom"},{value:"AU",label:"Australia"},{value:"DE",label:"Germany"},{value:"FR",label:"France"},{value:"IN",label:"India"},{value:"JP",label:"Japan"},{value:"Other",label:"Other"}]})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsxs("div",{className:r.sectionTitle,children:[e.jsx("i",{className:"fas fa-phone"}),"Contact Information"]}),e.jsxs("div",{className:r.formGrid,children:[e.jsxs("div",{className:r.phoneGroup,children:[e.jsx(S,{label:"Phone Country",name:"contact_phone_country",value:a.contact_phone_country,onChange:N("contact_phone_country"),required:!0,options:[{value:"+1",label:"+1 (US/CA)"},{value:"+44",label:"+44 (UK)"},{value:"+61",label:"+61 (AU)"},{value:"+49",label:"+49 (DE)"},{value:"+33",label:"+33 (FR)"},{value:"+91",label:"+91 (IN)"},{value:"+81",label:"+81 (JP)"}],className:r.countryCodeSelect}),e.jsx(t,{label:"Phone Number",name:"contact_phone",value:a.contact_phone,onChange:i,error:n.contact_phone,placeholder:"Phone number",type:"tel"})]}),e.jsx(t,{label:"Contact Email",name:"contact_email",value:a.contact_email,onChange:i,error:n.contact_email,required:!0,placeholder:"contact@example.com",type:"email"})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsxs("div",{className:r.sectionTitle,children:[e.jsx("i",{className:"fas fa-user-shield"}),"Administrator Account"]}),e.jsx("p",{className:r.sectionDescription,children:"Create the primary administrator account for your organization. This account will have full access to manage users, courses, and settings."}),e.jsxs("div",{className:r.formGrid,children:[e.jsx(t,{label:"Full Name",name:"admin_full_name",value:a.admin_full_name,onChange:i,error:n.admin_full_name,required:!0,placeholder:"John Doe"}),e.jsx(t,{label:"Username",name:"admin_username",value:a.admin_username,onChange:i,error:n.admin_username,required:!0,placeholder:"admin_username"}),e.jsx(t,{label:"Email",name:"admin_email",value:a.admin_email,onChange:i,error:n.admin_email,required:!0,placeholder:"admin@example.com",type:"email"}),e.jsx("div",{})," ",e.jsx(t,{label:"Password",name:"admin_password",value:a.admin_password,onChange:i,error:n.admin_password,required:!0,placeholder:"Create a strong password",type:"password",helpText:"Min 8 chars, uppercase, lowercase, and number"}),e.jsx(t,{label:"Confirm Password",name:"admin_password_confirm",value:a.admin_password_confirm,onChange:i,error:n.admin_password_confirm,required:!0,placeholder:"Confirm your password",type:"password"})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsxs("div",{className:r.sectionTitle,children:[e.jsx("i",{className:"fas fa-file-contract"}),"Terms & Conditions"]}),e.jsxs("div",{className:r.checkboxGroup,children:[e.jsxs("label",{className:r.checkboxLabel,children:[e.jsx("input",{type:"checkbox",name:"terms_accepted",checked:a.terms_accepted,onChange:i,className:r.checkbox}),e.jsxs("span",{children:["I accept the ",e.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),e.jsx("span",{className:r.required,children:"*"})]})]}),n.terms_accepted&&e.jsx("p",{className:r.error,children:n.terms_accepted}),e.jsxs("label",{className:r.checkboxLabel,children:[e.jsx("input",{type:"checkbox",name:"privacy_accepted",checked:a.privacy_accepted,onChange:i,className:r.checkbox}),e.jsxs("span",{children:["I accept the ",e.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),e.jsx("span",{className:r.required,children:"*"})]})]}),n.privacy_accepted&&e.jsx("p",{className:r.error,children:n.privacy_accepted})]})]}),e.jsxs("div",{className:r.submitSection,children:[j&&e.jsxs("div",{className:r.submitError,children:[e.jsx("i",{className:"fas fa-exclamation-circle"}),j]}),e.jsx(w,{type:"submit",variant:"primary",size:"large",disabled:v,className:r.submitButton,children:v?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"small"}),"Creating Organization..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check-circle"}),"Complete Registration"]})}),e.jsxs("p",{className:r.loginLink,children:["Already have an account? ",e.jsx(z,{to:"/login",children:"Sign in here"})]})]})]})]})]})};export{Se as OrganizationRegistration};
//# sourceMappingURL=OrganizationRegistration-BeRBQgJ9.js.map
