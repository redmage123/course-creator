import{j as e}from"./query-vendor-D-Supqfh.js";import{a as N,i as W}from"./react-vendor-DF6vRnOe.js";import{c as b}from"./index-DybP5Hyb.js";import{L as F,C as M,a as B,b as A,P,c as T,p as R,d as D,e as q,i as z,R as U,g as H,B as G,h as O,f as Q,A as K}from"./index-BNrFBUg1.js";import"./state-vendor-CcNjB5Go.js";class Y{baseUrl="/analytics/learning";async getStudentLearningAnalytics(o){return await b.get(`${this.baseUrl}/student/${o}/summary`)}async getMyLearningAnalytics(){return await b.get(`${this.baseUrl}/student/me/summary`)}async getLearningPathProgress(o,d){return await b.get(`${this.baseUrl}/student/${o}/path/${d}`)}async getStudentLearningPaths(o){return await b.get(`${this.baseUrl}/student/${o}/paths`)}async getSkillMastery(o,d){const _=d?{course_id:d}:{};return await b.get(`${this.baseUrl}/student/${o}/skills`,{params:_})}async getSkillMasteryDetail(o,d){return await b.get(`${this.baseUrl}/student/${o}/skill/${encodeURIComponent(d)}`)}async getSkillsNeedingReview(o){return await b.get(`${this.baseUrl}/student/${o}/skills/review-needed`)}async getSessionActivity(o,d="30d"){return await b.get(`${this.baseUrl}/student/${o}/sessions`,{params:{range:d}})}async getLearningProgressTimeSeries(o,d,_="30d"){const m={range:_};return d&&(m.course_id=d),await b.get(`${this.baseUrl}/student/${o}/progress-timeline`,{params:m})}async getCourseLearningAnalytics(o){return await b.get(`${this.baseUrl}/course/${o}/summary`)}async getOrganizationLearningAnalytics(o){return await b.get(`${this.baseUrl}/organization/${o}/summary`)}async exportLearningAnalytics(o,d="pdf"){return await b.get(`${this.baseUrl}/student/${o}/export`,{params:{format:d},responseType:"blob"})}}const x=new Y,Z=(a,o,d="30d")=>{const[_,m]=N.useState(null),[h,v]=N.useState(null),[i,g]=N.useState(null),[n,s]=N.useState(null),[u,j]=N.useState(null),[w,f]=N.useState(!0),[$,L]=N.useState(null),I=async()=>{try{f(!0),L(null);const[S,k,p,V,E]=await Promise.all([a?x.getStudentLearningAnalytics(a):x.getMyLearningAnalytics(),a?x.getStudentLearningPaths(a):x.getMyLearningAnalytics().then(C=>x.getStudentLearningPaths(C.student_id)),a?x.getSkillMastery(a,o):x.getMyLearningAnalytics().then(C=>x.getSkillMastery(C.student_id,o)),a?x.getSessionActivity(a,d):x.getMyLearningAnalytics().then(C=>x.getSessionActivity(C.student_id,d)),a?x.getLearningProgressTimeSeries(a,o,d):x.getMyLearningAnalytics().then(C=>x.getLearningProgressTimeSeries(C.student_id,o,d))]);m(S),v(k),g(p),s(V),j(E)}catch(S){const k=S instanceof Error?S.message:"Failed to load learning analytics";L(k),console.error("Learning analytics fetch error:",S),m(null),v(null),g(null),s(null),j(null)}finally{f(!1)}};return N.useEffect(()=>{I()},[a,o,d]),{summary:_,learningPaths:h,skillMastery:i,sessionActivity:n,progressTimeSeries:u,isLoading:w,error:$,refetch:I}},J="_chartContainer_y26c0_3",X="_chartWrapper_y26c0_7",ee="_statsRow_y26c0_12",se="_statItem_y26c0_20",te="_statLabel_y26c0_27",ae="_statValue_y26c0_34",ne="_emptyState_y26c0_40",re="_emptyIcon_y26c0_49",y={chartContainer:J,chartWrapper:X,statsRow:ee,statItem:se,statLabel:te,statValue:ae,emptyState:ne,emptyIcon:re};M.register(B,A,P,T,R,D,q,z);const ie=({data:a})=>{if(!a||a.length===0)return e.jsxs("div",{className:y.emptyState,children:[e.jsx("p",{children:"No progress data available"}),e.jsx("span",{className:y.emptyIcon,children:"üìä"})]});const d={labels:a.map(m=>{const h=new Date(m.date);return`${h.getMonth()+1}/${h.getDate()}`}),datasets:[{label:"Progress %",data:a.map(m=>m.progress_percentage),borderColor:"#2196f3",backgroundColor:"rgba(33, 150, 243, 0.1)",fill:!0,tension:.4,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointBorderWidth:2},{label:"Engagement Score",data:a.map(m=>m.engagement_score),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.1)",fill:!0,tension:.4,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#4caf50",pointBorderColor:"#fff",pointBorderWidth:2}]},_={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15}},tooltip:{callbacks:{title:m=>{const h=m[0].dataIndex;return new Date(a[h].date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},afterBody:m=>{const h=m[0].dataIndex,v=a[h];return[`
Items Completed: ${v.items_completed}`,`Time Spent: ${Math.round(v.time_spent_minutes/60)}h ${v.time_spent_minutes%60}m`]}}}},scales:{y:{min:0,max:100,ticks:{callback:m=>`${m}%`},grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}};return e.jsxs("div",{className:y.chartContainer,children:[e.jsx("div",{className:y.chartWrapper,children:e.jsx(F,{data:d,options:_})}),e.jsxs("div",{className:y.statsRow,children:[e.jsxs("div",{className:y.statItem,children:[e.jsx("span",{className:y.statLabel,children:"Total Items"}),e.jsx("span",{className:y.statValue,children:a[a.length-1]?.items_completed||0})]}),e.jsxs("div",{className:y.statItem,children:[e.jsx("span",{className:y.statLabel,children:"Total Time"}),e.jsxs("span",{className:y.statValue,children:[Math.round(a.reduce((m,h)=>m+h.time_spent_minutes,0)/60),"h"]})]}),e.jsxs("div",{className:y.statItem,children:[e.jsx("span",{className:y.statLabel,children:"Avg Engagement"}),e.jsxs("span",{className:y.statValue,children:[Math.round(a.reduce((m,h)=>m+h.engagement_score,0)/a.length),"%"]})]})]})]})},ce="_widgetContainer_h0vi7_3",le="_controls_h0vi7_7",oe="_viewToggle_h0vi7_16",de="_toggleBtn_h0vi7_21",me="_active_h0vi7_36",_e="_sortSelector_h0vi7_42",ge="_sortSelect_h0vi7_42",ue="_chartView_h0vi7_63",he="_radarChart_h0vi7_69",pe="_chartNote_h0vi7_76",ve="_listView_h0vi7_83",xe="_skillCard_h0vi7_89",ye="_skillHeader_h0vi7_95",je="_skillName_h0vi7_102",Ne="_masteryBadge_h0vi7_109",be="_progressSection_h0vi7_117",we="_progressBar_h0vi7_124",Se="_progressFill_h0vi7_132",Ce="_progressValue_h0vi7_137",fe="_skillMetrics_h0vi7_145",Le="_metric_h0vi7_152",ke="_metricLabel_h0vi7_158",Ie="_metricValue_h0vi7_165",$e="_repetitionInfo_h0vi7_171",Ve="_repetitionMetric_h0vi7_179",Me="_repetitionLabel_h0vi7_185",De="_repetitionValue_h0vi7_190",qe="_lastPractice_h0vi7_196",Be="_summaryStats_h0vi7_202",Ae="_summaryItem_h0vi7_210",Pe="_summaryLabel_h0vi7_217",Te="_summaryValue_h0vi7_224",Re="_emptyState_h0vi7_230",ze="_emptyIcon_h0vi7_239",l={widgetContainer:ce,controls:le,viewToggle:oe,toggleBtn:de,active:me,sortSelector:_e,sortSelect:ge,chartView:ue,radarChart:he,chartNote:pe,listView:ve,skillCard:xe,skillHeader:ye,skillName:je,masteryBadge:Ne,progressSection:be,progressBar:we,progressFill:Se,progressValue:Ce,skillMetrics:fe,metric:Le,metricLabel:ke,metricValue:Ie,repetitionInfo:$e,repetitionMetric:Ve,repetitionLabel:Me,repetitionValue:De,lastPractice:qe,summaryStats:Be,summaryItem:Ae,summaryLabel:Pe,summaryValue:Te,emptyState:Re,emptyIcon:ze};M.register(H,P,T,z,D,q);const Ee=({skills:a})=>{const[o,d]=N.useState("mastery"),[_,m]=N.useState("chart");if(!a||a.length===0)return e.jsxs("div",{className:l.emptyState,children:[e.jsx("p",{children:"No skills tracked yet"}),e.jsx("span",{className:l.emptyIcon,children:"üéØ"})]});const h=s=>({novice:"#f44336",beginner:"#ff9800",intermediate:"#ffeb3b",proficient:"#8bc34a",expert:"#4caf50",master:"#2196f3"})[s]||"#9e9e9e",v=[...a].sort((s,u)=>{switch(o){case"mastery":return u.mastery_score-s.mastery_score;case"recent":return s.last_practiced_at?u.last_practiced_at?new Date(u.last_practiced_at).getTime()-new Date(s.last_practiced_at).getTime():-1:1;case"name":return s.skill_topic.localeCompare(u.skill_topic);case"review":return s.current_interval_days-u.current_interval_days;default:return 0}}),i=v.slice(0,8),g={labels:i.map(s=>s.skill_topic),datasets:[{label:"Mastery Score",data:i.map(s=>s.mastery_score),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",borderWidth:2,pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},n={responsive:!0,maintainAspectRatio:!1,scales:{r:{min:0,max:100,ticks:{stepSize:20},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:s=>`Mastery: ${s.parsed.r}%`}}}};return e.jsxs("div",{className:l.widgetContainer,children:[e.jsxs("div",{className:l.controls,children:[e.jsxs("div",{className:l.viewToggle,children:[e.jsx("button",{className:`${l.toggleBtn} ${_==="chart"?l.active:""}`,onClick:()=>m("chart"),"aria-pressed":_==="chart",children:"Chart View"}),e.jsx("button",{className:`${l.toggleBtn} ${_==="list"?l.active:""}`,onClick:()=>m("list"),"aria-pressed":_==="list",children:"List View"})]}),e.jsxs("div",{className:l.sortSelector,children:[e.jsx("label",{htmlFor:"sort-skills",children:"Sort by:"}),e.jsxs("select",{id:"sort-skills",value:o,onChange:s=>d(s.target.value),className:l.sortSelect,children:[e.jsx("option",{value:"mastery",children:"Mastery Level"}),e.jsx("option",{value:"recent",children:"Recently Practiced"}),e.jsx("option",{value:"name",children:"Skill Name"}),e.jsx("option",{value:"review",children:"Review Due"})]})]})]}),_==="chart"&&e.jsxs("div",{className:l.chartView,children:[e.jsx("div",{className:l.radarChart,children:e.jsx(U,{data:g,options:n})}),e.jsx("p",{className:l.chartNote,children:"Showing top 8 skills by mastery score"})]}),_==="list"&&e.jsx("div",{className:l.listView,children:v.map(s=>e.jsxs("div",{className:l.skillCard,children:[e.jsxs("div",{className:l.skillHeader,children:[e.jsx("h3",{className:l.skillName,children:s.skill_topic}),e.jsx("span",{className:l.masteryBadge,style:{backgroundColor:h(s.mastery_level)},children:s.mastery_level.charAt(0).toUpperCase()+s.mastery_level.slice(1)})]}),e.jsxs("div",{className:l.progressSection,children:[e.jsx("div",{className:l.progressBar,children:e.jsx("div",{className:l.progressFill,style:{width:`${s.mastery_score}%`,backgroundColor:h(s.mastery_level)}})}),e.jsxs("span",{className:l.progressValue,children:[s.mastery_score,"%"]})]}),e.jsxs("div",{className:l.skillMetrics,children:[e.jsxs("div",{className:l.metric,children:[e.jsx("span",{className:l.metricLabel,children:"Assessments"}),e.jsxs("span",{className:l.metricValue,children:[s.assessments_passed,"/",s.assessments_completed]})]}),e.jsxs("div",{className:l.metric,children:[e.jsx("span",{className:l.metricLabel,children:"Practice Time"}),e.jsxs("span",{className:l.metricValue,children:[Math.round(s.total_practice_time_minutes/60),"h"]})]}),e.jsxs("div",{className:l.metric,children:[e.jsx("span",{className:l.metricLabel,children:"Streak"}),e.jsxs("span",{className:l.metricValue,children:[s.practice_streak_days," days"]})]})]}),e.jsxs("div",{className:l.repetitionInfo,children:[e.jsxs("div",{className:l.repetitionMetric,children:[e.jsx("span",{className:l.repetitionLabel,children:"Retention:"}),e.jsxs("span",{className:l.repetitionValue,children:[Math.round(s.retention_estimate*100),"%"]})]}),e.jsxs("div",{className:l.repetitionMetric,children:[e.jsx("span",{className:l.repetitionLabel,children:"Review Interval:"}),e.jsxs("span",{className:l.repetitionValue,children:[s.current_interval_days," days"]})]}),e.jsxs("div",{className:l.repetitionMetric,children:[e.jsx("span",{className:l.repetitionLabel,children:"Ease Factor:"}),e.jsx("span",{className:l.repetitionValue,children:s.ease_factor.toFixed(2)})]})]}),s.last_practiced_at&&e.jsxs("p",{className:l.lastPractice,children:["Last practiced:"," ",new Date(s.last_practiced_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]},s.id))}),e.jsxs("div",{className:l.summaryStats,children:[e.jsxs("div",{className:l.summaryItem,children:[e.jsx("span",{className:l.summaryLabel,children:"Total Skills"}),e.jsx("span",{className:l.summaryValue,children:a.length})]}),e.jsxs("div",{className:l.summaryItem,children:[e.jsx("span",{className:l.summaryLabel,children:"Avg Mastery"}),e.jsxs("span",{className:l.summaryValue,children:[Math.round(a.reduce((s,u)=>s+u.mastery_score,0)/a.length),"%"]})]}),e.jsxs("div",{className:l.summaryItem,children:[e.jsx("span",{className:l.summaryLabel,children:"Total Practice"}),e.jsxs("span",{className:l.summaryValue,children:[Math.round(a.reduce((s,u)=>s+u.total_practice_time_minutes,0)/60),"h"]})]})]})]})},We="_pathsContainer_192ug_3",Fe="_pathCard_192ug_9",Ue="_pathHeader_192ug_15",He="_pathTitleSection_192ug_29",Ge="_pathTitle_192ug_29",Oe="_statusBadge_192ug_42",Qe="_expandButton_192ug_50",Ke="_progressSection_192ug_60",Ye="_progressBar_192ug_67",Ze="_progressFill_192ug_75",Je="_progressValue_192ug_80",Xe="_quickStats_192ug_88",es="_stat_192ug_42",ss="_statIcon_192ug_100",ts="_statText_192ug_104",as="_timeDiff_192ug_110",ns="_timeDiffSuccess_192ug_117",rs="_timeDiffWarning_192ug_121",is="_expandedContent_192ug_125",cs="_currentPosition_192ug_131",ls="_datesSection_192ug_150",os="_datesList_192ug_163",ds="_dateItem_192ug_169",ms="_dateLabel_192ug_175",_s="_dateValue_192ug_179",gs="_milestonesSection_192ug_184",us="_milestonesList_192ug_197",hs="_milestoneItem_192ug_203",ps="_milestoneIcon_192ug_212",vs="_milestoneContent_192ug_217",xs="_milestoneName_192ug_221",ys="_milestoneDate_192ug_228",js="_milestoneScore_192ug_234",Ns="_performanceMetrics_192ug_241",bs="_metricsGrid_192ug_250",ws="_metricItem_192ug_256",Ss="_metricLabel_192ug_262",Cs="_metricValue_192ug_267",fs="_emptyState_192ug_273",Ls="_emptyIcon_192ug_282",r={pathsContainer:We,pathCard:Fe,pathHeader:Ue,pathTitleSection:He,pathTitle:Ge,statusBadge:Oe,expandButton:Qe,progressSection:Ke,progressBar:Ye,progressFill:Ze,progressValue:Je,quickStats:Xe,stat:es,statIcon:ss,statText:ts,timeDiff:as,timeDiffSuccess:ns,timeDiffWarning:rs,expandedContent:is,currentPosition:cs,datesSection:ls,datesList:os,dateItem:ds,dateLabel:ms,dateValue:_s,milestonesSection:gs,milestonesList:us,milestoneItem:hs,milestoneIcon:ps,milestoneContent:vs,milestoneName:xs,milestoneDate:ys,milestoneScore:js,performanceMetrics:Ns,metricsGrid:bs,metricItem:ws,metricLabel:Ss,metricValue:Cs,emptyState:fs,emptyIcon:Ls},ks=({paths:a})=>{const[o,d]=N.useState(null);if(!a||a.length===0)return e.jsxs("div",{className:r.emptyState,children:[e.jsx("p",{children:"No active learning paths"}),e.jsx("span",{className:r.emptyIcon,children:"üõ§Ô∏è"})]});const _=i=>({not_started:"#9e9e9e",in_progress:"#2196f3",on_track:"#4caf50",behind:"#ff9800",at_risk:"#f44336",completed:"#8bc34a",abandoned:"#757575"})[i]||"#9e9e9e",m=i=>i.split("_").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" "),h=i=>{d(o===i?null:i)},v=i=>{if(!i.estimated_completion_at)return null;const g=new Date,n=new Date(i.estimated_completion_at),s=Math.ceil((n.getTime()-g.getTime())/(1e3*60*60*24));if(i.actual_completion_at){const u=new Date(i.actual_completion_at),j=Math.ceil((u.getTime()-n.getTime())/(1e3*60*60*24));return j>0?`Completed ${j} days late`:`Completed ${Math.abs(j)} days early`}return s<0?`${Math.abs(s)} days overdue`:s===0?"Due today":`${s} days remaining`};return e.jsx("div",{className:r.pathsContainer,children:a.map(i=>{const g=o===i.id,n=v(i);return e.jsxs("div",{className:r.pathCard,children:[e.jsxs("div",{className:r.pathHeader,onClick:()=>h(i.id),role:"button",tabIndex:0,onKeyPress:s=>{(s.key==="Enter"||s.key===" ")&&h(i.id)},children:[e.jsxs("div",{className:r.pathTitleSection,children:[e.jsxs("h3",{className:r.pathTitle,children:["Learning Path ",i.track_id]}),e.jsx("span",{className:r.statusBadge,style:{backgroundColor:_(i.status)},children:m(i.status)})]}),e.jsx("button",{className:r.expandButton,"aria-expanded":g,children:g?"‚ñº":"‚ñ∂"})]}),e.jsxs("div",{className:r.progressSection,children:[e.jsx("div",{className:r.progressBar,children:e.jsx("div",{className:r.progressFill,style:{width:`${i.overall_progress}%`,backgroundColor:_(i.status)}})}),e.jsxs("span",{className:r.progressValue,children:[i.overall_progress.toFixed(1),"%"]})]}),e.jsxs("div",{className:r.quickStats,children:[e.jsxs("div",{className:r.stat,children:[e.jsx("span",{className:r.statIcon,children:"‚è±Ô∏è"}),e.jsxs("span",{className:r.statText,children:[Math.round(i.total_time_spent_minutes/60),"h"]})]}),i.avg_quiz_score!==void 0&&e.jsxs("div",{className:r.stat,children:[e.jsx("span",{className:r.statIcon,children:"üìù"}),e.jsxs("span",{className:r.statText,children:[i.avg_quiz_score.toFixed(0),"%"]})]}),i.milestones_completed&&i.milestones_completed.length>0&&e.jsxs("div",{className:r.stat,children:[e.jsx("span",{className:r.statIcon,children:"üèÜ"}),e.jsxs("span",{className:r.statText,children:[i.milestones_completed.length," milestones"]})]})]}),n&&e.jsx("p",{className:`${r.timeDiff} ${n.includes("overdue")||n.includes("late")?r.timeDiffWarning:r.timeDiffSuccess}`,children:n}),g&&e.jsxs("div",{className:r.expandedContent,children:[i.current_course_id&&e.jsxs("div",{className:r.currentPosition,children:[e.jsx("h4",{children:"Current Position"}),e.jsxs("p",{children:["Course ID: ",i.current_course_id]}),i.current_module_order&&e.jsxs("p",{children:["Module: ",i.current_module_order]})]}),e.jsxs("div",{className:r.datesSection,children:[e.jsx("h4",{children:"Timeline"}),e.jsxs("div",{className:r.datesList,children:[i.started_at&&e.jsxs("div",{className:r.dateItem,children:[e.jsx("span",{className:r.dateLabel,children:"Started:"}),e.jsx("span",{className:r.dateValue,children:new Date(i.started_at).toLocaleDateString()})]}),i.estimated_completion_at&&e.jsxs("div",{className:r.dateItem,children:[e.jsx("span",{className:r.dateLabel,children:"Est. Completion:"}),e.jsx("span",{className:r.dateValue,children:new Date(i.estimated_completion_at).toLocaleDateString()})]}),i.actual_completion_at&&e.jsxs("div",{className:r.dateItem,children:[e.jsx("span",{className:r.dateLabel,children:"Completed:"}),e.jsx("span",{className:r.dateValue,children:new Date(i.actual_completion_at).toLocaleDateString()})]}),i.last_activity_at&&e.jsxs("div",{className:r.dateItem,children:[e.jsx("span",{className:r.dateLabel,children:"Last Activity:"}),e.jsx("span",{className:r.dateValue,children:new Date(i.last_activity_at).toLocaleDateString()})]})]})]}),i.milestones_completed&&i.milestones_completed.length>0&&e.jsxs("div",{className:r.milestonesSection,children:[e.jsx("h4",{children:"Completed Milestones"}),e.jsx("div",{className:r.milestonesList,children:i.milestones_completed.map((s,u)=>e.jsxs("div",{className:r.milestoneItem,children:[e.jsx("span",{className:r.milestoneIcon,children:"‚úì"}),e.jsxs("div",{className:r.milestoneContent,children:[e.jsx("p",{className:r.milestoneName,children:s.name}),e.jsx("p",{className:r.milestoneDate,children:new Date(s.completed_at).toLocaleDateString()}),s.score!==void 0&&e.jsxs("p",{className:r.milestoneScore,children:["Score: ",s.score,"%"]})]})]},u))})]}),e.jsxs("div",{className:r.performanceMetrics,children:[e.jsx("h4",{children:"Performance"}),e.jsxs("div",{className:r.metricsGrid,children:[i.avg_quiz_score!==void 0&&e.jsxs("div",{className:r.metricItem,children:[e.jsx("span",{className:r.metricLabel,children:"Avg Quiz Score"}),e.jsxs("span",{className:r.metricValue,children:[i.avg_quiz_score.toFixed(1),"%"]})]}),i.avg_assignment_score!==void 0&&e.jsxs("div",{className:r.metricItem,children:[e.jsx("span",{className:r.metricLabel,children:"Avg Assignment Score"}),e.jsxs("span",{className:r.metricValue,children:[i.avg_assignment_score.toFixed(1),"%"]})]})]})]})]})]},i.id)})})},Is="_widgetContainer_2mpqt_3",$s="_viewToggle_2mpqt_7",Vs="_toggleBtn_2mpqt_13",Ms="_active_2mpqt_28",Ds="_chartView_2mpqt_34",qs="_chartContainer_2mpqt_39",Bs="_chartLegend_2mpqt_45",As="_legendItem_2mpqt_54",Ps="_legendDot_2mpqt_62",Ts="_pieChartContainer_2mpqt_69",Rs="_breakdownStats_2mpqt_75",zs="_breakdownItem_2mpqt_84",Es="_breakdownLabel_2mpqt_91",Ws="_breakdownValue_2mpqt_98",Fs="_listView_2mpqt_104",Us="_sessionCard_2mpqt_112",Hs="_sessionHeader_2mpqt_118",Gs="_sessionDate_2mpqt_125",Os="_engagementBadge_2mpqt_131",Qs="_sessionMetrics_2mpqt_139",Ks="_sessionMetric_2mpqt_139",Ys="_metricIcon_2mpqt_154",Zs="_sessionActivities_2mpqt_158",Js="_summaryStats_2mpqt_164",Xs="_summaryItem_2mpqt_174",et="_summaryLabel_2mpqt_181",st="_summaryValue_2mpqt_189",tt="_emptyState_2mpqt_195",at="_emptyIcon_2mpqt_204",t={widgetContainer:Is,viewToggle:$s,toggleBtn:Vs,active:Ms,chartView:Ds,chartContainer:qs,chartLegend:Bs,legendItem:As,legendDot:Ps,pieChartContainer:Ts,breakdownStats:Rs,breakdownItem:zs,breakdownLabel:Es,breakdownValue:Ws,listView:Fs,sessionCard:Us,sessionHeader:Hs,sessionDate:Gs,engagementBadge:Os,sessionMetrics:Qs,sessionMetric:Ks,metricIcon:Ys,sessionActivities:Zs,summaryStats:Js,summaryItem:Xs,summaryLabel:et,summaryValue:st,emptyState:tt,emptyIcon:at};M.register(B,A,Q,K,R,D,q);const nt=({sessions:a})=>{const[o,d]=N.useState("timeline");if(!a||a.length===0)return e.jsxs("div",{className:t.emptyState,children:[e.jsx("p",{children:"No session activity recorded"}),e.jsx("span",{className:t.emptyIcon,children:"üìä"})]});const _=a.reduce((n,s)=>(n.contentViewed+=s.content_items_viewed,n.quizzesAttempted+=s.quizzes_attempted,n.labsWorked+=s.labs_worked_on,n),{contentViewed:0,quizzesAttempted:0,labsWorked:0}),m={labels:a.map(n=>{const s=new Date(n.started_at);return`${s.getMonth()+1}/${s.getDate()}`}),datasets:[{label:"Session Duration (minutes)",data:a.map(n=>n.duration_minutes),backgroundColor:a.map(n=>n.engagement_score>=80?"rgba(76, 175, 80, 0.7)":n.engagement_score>=60?"rgba(33, 150, 243, 0.7)":n.engagement_score>=40?"rgba(255, 152, 0, 0.7)":"rgba(244, 67, 54, 0.7)"),borderColor:a.map(n=>n.engagement_score>=80?"#4caf50":n.engagement_score>=60?"#2196f3":n.engagement_score>=40?"#ff9800":"#f44336"),borderWidth:2,borderRadius:4}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:n=>{const s=a[n[0].dataIndex];return new Date(s.started_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},afterBody:n=>{const s=a[n[0].dataIndex];return[`Engagement: ${s.engagement_score}%`,`Activities: ${s.activities_count}`,`Content Viewed: ${s.content_items_viewed}`]}}}},scales:{y:{beginAtZero:!0,ticks:{callback:n=>`${n}m`}}}},v={labels:["Content Viewed","Quizzes Attempted","Labs Worked On"],datasets:[{data:[_.contentViewed,_.quizzesAttempted,_.labsWorked],backgroundColor:["rgba(33, 150, 243, 0.7)","rgba(255, 152, 0, 0.7)","rgba(156, 39, 176, 0.7)"],borderColor:["#2196f3","#ff9800","#9c27b0"],borderWidth:2}]},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:n=>{const s=n.label||"",u=n.parsed||0,j=_.contentViewed+_.quizzesAttempted+_.labsWorked,w=j>0?(u/j*100).toFixed(1):"0";return`${s}: ${u} (${w}%)`}}}}},g={totalSessions:a.length,totalDuration:a.reduce((n,s)=>n+s.duration_minutes,0),avgDuration:Math.round(a.reduce((n,s)=>n+s.duration_minutes,0)/a.length),avgEngagement:Math.round(a.reduce((n,s)=>n+s.engagement_score,0)/a.length),totalActivities:a.reduce((n,s)=>n+s.activities_count,0)};return e.jsxs("div",{className:t.widgetContainer,children:[e.jsxs("div",{className:t.viewToggle,children:[e.jsx("button",{className:`${t.toggleBtn} ${o==="timeline"?t.active:""}`,onClick:()=>d("timeline"),"aria-pressed":o==="timeline",children:"Timeline"}),e.jsx("button",{className:`${t.toggleBtn} ${o==="breakdown"?t.active:""}`,onClick:()=>d("breakdown"),"aria-pressed":o==="breakdown",children:"Breakdown"}),e.jsx("button",{className:`${t.toggleBtn} ${o==="list"?t.active:""}`,onClick:()=>d("list"),"aria-pressed":o==="list",children:"List"})]}),o==="timeline"&&e.jsxs("div",{className:t.chartView,children:[e.jsx("div",{className:t.chartContainer,children:e.jsx(G,{data:m,options:h})}),e.jsxs("div",{className:t.chartLegend,children:[e.jsxs("div",{className:t.legendItem,children:[e.jsx("span",{className:t.legendDot,style:{backgroundColor:"#4caf50"}}),e.jsx("span",{children:"High Engagement (80%+)"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("span",{className:t.legendDot,style:{backgroundColor:"#2196f3"}}),e.jsx("span",{children:"Good Engagement (60-79%)"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("span",{className:t.legendDot,style:{backgroundColor:"#ff9800"}}),e.jsx("span",{children:"Moderate Engagement (40-59%)"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("span",{className:t.legendDot,style:{backgroundColor:"#f44336"}}),e.jsx("span",{children:"Low Engagement (<40%)"})]})]})]}),o==="breakdown"&&e.jsxs("div",{className:t.chartView,children:[e.jsx("div",{className:t.pieChartContainer,children:e.jsx(O,{data:v,options:i})}),e.jsxs("div",{className:t.breakdownStats,children:[e.jsxs("div",{className:t.breakdownItem,children:[e.jsx("span",{className:t.breakdownLabel,children:"Content Items"}),e.jsx("span",{className:t.breakdownValue,children:_.contentViewed})]}),e.jsxs("div",{className:t.breakdownItem,children:[e.jsx("span",{className:t.breakdownLabel,children:"Quizzes"}),e.jsx("span",{className:t.breakdownValue,children:_.quizzesAttempted})]}),e.jsxs("div",{className:t.breakdownItem,children:[e.jsx("span",{className:t.breakdownLabel,children:"Labs"}),e.jsx("span",{className:t.breakdownValue,children:_.labsWorked})]})]})]}),o==="list"&&e.jsx("div",{className:t.listView,children:a.map(n=>e.jsxs("div",{className:t.sessionCard,children:[e.jsxs("div",{className:t.sessionHeader,children:[e.jsx("span",{className:t.sessionDate,children:new Date(n.started_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}),e.jsxs("span",{className:t.engagementBadge,style:{backgroundColor:n.engagement_score>=80?"#4caf50":n.engagement_score>=60?"#2196f3":n.engagement_score>=40?"#ff9800":"#f44336"},children:[n.engagement_score,"% engaged"]})]}),e.jsxs("div",{className:t.sessionMetrics,children:[e.jsxs("div",{className:t.sessionMetric,children:[e.jsx("span",{className:t.metricIcon,children:"‚è±Ô∏è"}),e.jsxs("span",{children:[n.duration_minutes,"m"]})]}),e.jsxs("div",{className:t.sessionMetric,children:[e.jsx("span",{className:t.metricIcon,children:"üìÑ"}),e.jsxs("span",{children:[n.content_items_viewed," items"]})]}),e.jsxs("div",{className:t.sessionMetric,children:[e.jsx("span",{className:t.metricIcon,children:"üìù"}),e.jsxs("span",{children:[n.quizzes_attempted," quizzes"]})]}),e.jsxs("div",{className:t.sessionMetric,children:[e.jsx("span",{className:t.metricIcon,children:"üíª"}),e.jsxs("span",{children:[n.labs_worked_on," labs"]})]})]}),e.jsxs("p",{className:t.sessionActivities,children:[n.activities_count," total activities"]})]},n.session_id))}),e.jsxs("div",{className:t.summaryStats,children:[e.jsxs("div",{className:t.summaryItem,children:[e.jsx("span",{className:t.summaryLabel,children:"Total Sessions"}),e.jsx("span",{className:t.summaryValue,children:g.totalSessions})]}),e.jsxs("div",{className:t.summaryItem,children:[e.jsx("span",{className:t.summaryLabel,children:"Total Time"}),e.jsxs("span",{className:t.summaryValue,children:[Math.round(g.totalDuration/60),"h"]})]}),e.jsxs("div",{className:t.summaryItem,children:[e.jsx("span",{className:t.summaryLabel,children:"Avg Duration"}),e.jsxs("span",{className:t.summaryValue,children:[g.avgDuration,"m"]})]}),e.jsxs("div",{className:t.summaryItem,children:[e.jsx("span",{className:t.summaryLabel,children:"Avg Engagement"}),e.jsxs("span",{className:t.summaryValue,children:[g.avgEngagement,"%"]})]}),e.jsxs("div",{className:t.summaryItem,children:[e.jsx("span",{className:t.summaryLabel,children:"Total Activities"}),e.jsx("span",{className:t.summaryValue,children:g.totalActivities})]})]})]})},rt="_dashboardContainer_1sqys_9",it="_dashboardHeader_1sqys_15",ct="_titleSection_1sqys_23",lt="_subtitle_1sqys_30",ot="_timeRangeSelector_1sqys_36",dt="_timeRangeBtn_1sqys_42",mt="_active_1sqys_58",_t="_summaryGrid_1sqys_64",gt="_statCard_1sqys_71",ut="_statIcon_1sqys_87",ht="_statContent_1sqys_91",pt="_statValue_1sqys_100",vt="_statLabel_1sqys_107",xt="_widgetsGrid_1sqys_112",yt="_widgetCard_1sqys_119",jt="_reviewSection_1sqys_133",Nt="_reviewSubtitle_1sqys_148",bt="_reviewGrid_1sqys_154",wt="_reviewCard_1sqys_160",St="_reviewMeta_1sqys_173",Ct="_reviewBadge_1sqys_180",ft="_reviewInterval_1sqys_189",Lt="_reviewProgress_1sqys_194",kt="_reviewProgressBar_1sqys_200",It="_reviewProgressFill_1sqys_208",$t="_reviewScore_1sqys_214",Vt="_milestonesSection_1sqys_220",Mt="_milestonesList_1sqys_234",Dt="_milestoneItem_1sqys_240",qt="_milestoneIcon_1sqys_249",Bt="_milestoneContent_1sqys_254",At="_milestoneDate_1sqys_261",Pt="_milestoneScore_1sqys_267",Tt="_loadingContainer_1sqys_274",Rt="_spinner_1sqys_283",zt="_errorContainer_1sqys_297",Et="_retryButton_1sqys_312",c={dashboardContainer:rt,dashboardHeader:it,titleSection:ct,subtitle:lt,timeRangeSelector:ot,timeRangeBtn:dt,active:mt,summaryGrid:_t,statCard:gt,statIcon:ut,statContent:ht,statValue:pt,statLabel:vt,widgetsGrid:xt,widgetCard:yt,reviewSection:jt,reviewSubtitle:Nt,reviewGrid:bt,reviewCard:wt,reviewMeta:St,reviewBadge:Ct,reviewInterval:ft,reviewProgress:Lt,reviewProgressBar:kt,reviewProgressFill:It,reviewScore:$t,milestonesSection:Vt,milestonesList:Mt,milestoneItem:Dt,milestoneIcon:qt,milestoneContent:Bt,milestoneDate:At,milestoneScore:Pt,loadingContainer:Tt,spinner:Rt,errorContainer:zt,retryButton:Et},Ot=({viewType:a,studentId:o,courseId:d,organizationId:_})=>{const{studentId:m,courseId:h}=W(),v=o||m,i=d||h,[g,n]=N.useState("30d"),{summary:s,learningPaths:u,skillMastery:j,sessionActivity:w,progressTimeSeries:f,isLoading:$,error:L,refetch:I}=Z(v,i,g);if($)return e.jsxs("div",{className:c.loadingContainer,children:[e.jsx("div",{className:c.spinner,"aria-label":"Loading analytics"}),e.jsx("p",{children:"Loading learning analytics..."})]});if(L)return e.jsxs("div",{className:c.errorContainer,children:[e.jsx("h2",{children:"Error Loading Learning Analytics"}),e.jsx("p",{children:L}),e.jsx("button",{onClick:I,className:c.retryButton,children:"Retry"})]});const S=[{value:"7d",label:"Week"},{value:"30d",label:"Month"},{value:"90d",label:"Quarter"},{value:"6m",label:"6 Months"},{value:"1y",label:"Year"},{value:"all",label:"All Time"}],k=()=>{switch(a){case"student":return"My Learning Analytics";case"instructor":return"Student Learning Analytics";case"org_admin":return"Organization Learning Analytics";default:return"Learning Analytics"}};return e.jsxs("div",{className:c.dashboardContainer,children:[e.jsxs("div",{className:c.dashboardHeader,children:[e.jsxs("div",{className:c.titleSection,children:[e.jsx("h1",{children:k()}),e.jsxs("p",{className:c.subtitle,children:[a==="student"&&"Track your learning progress and skill development",a==="instructor"&&"Monitor student learning outcomes and engagement",a==="org_admin"&&"Organizational learning insights and trends"]})]}),e.jsx("div",{className:c.timeRangeSelector,children:S.map(p=>e.jsx("button",{className:`${c.timeRangeBtn} ${g===p.value?c.active:""}`,onClick:()=>n(p.value),"aria-pressed":g===p.value,children:p.label},p.value))})]}),s&&e.jsxs("div",{className:c.summaryGrid,children:[e.jsxs("div",{className:c.statCard,children:[e.jsx("span",{className:c.statIcon,children:"üìà"}),e.jsxs("div",{className:c.statContent,children:[e.jsx("h3",{children:"Engagement Score"}),e.jsxs("p",{className:c.statValue,children:[s.overall_engagement_score,"%"]}),e.jsx("p",{className:c.statLabel,children:"Overall engagement"})]})]}),e.jsxs("div",{className:c.statCard,children:[e.jsx("span",{className:c.statIcon,children:"üéØ"}),e.jsxs("div",{className:c.statContent,children:[e.jsx("h3",{children:"Skills Mastered"}),e.jsxs("p",{className:c.statValue,children:[s.skills_mastered,"/",s.total_skills_tracked]}),e.jsx("p",{className:c.statLabel,children:s.total_skills_tracked>0?`${Math.round(s.skills_mastered/s.total_skills_tracked*100)}% mastery rate`:"No skills tracked"})]})]}),e.jsxs("div",{className:c.statCard,children:[e.jsx("span",{className:c.statIcon,children:"üî•"}),e.jsxs("div",{className:c.statContent,children:[e.jsx("h3",{children:"Current Streak"}),e.jsxs("p",{className:c.statValue,children:[s.current_streak_days," days"]}),e.jsxs("p",{className:c.statLabel,children:["Longest: ",s.longest_streak_days," days"]})]})]}),e.jsxs("div",{className:c.statCard,children:[e.jsx("span",{className:c.statIcon,children:"‚è±Ô∏è"}),e.jsxs("div",{className:c.statContent,children:[e.jsx("h3",{children:"Learning Time"}),e.jsxs("p",{className:c.statValue,children:[Math.round(s.total_learning_time_minutes/60),"h"]}),e.jsx("p",{className:c.statLabel,children:"Total time invested"})]})]})]}),e.jsxs("div",{className:c.widgetsGrid,children:[f&&f.length>0&&e.jsxs("div",{className:c.widgetCard,children:[e.jsx("h2",{children:"Learning Progress Over Time"}),e.jsx(ie,{data:f})]}),j&&j.length>0&&e.jsxs("div",{className:c.widgetCard,children:[e.jsx("h2",{children:"Skill Mastery"}),e.jsx(Ee,{skills:j})]}),u&&u.length>0&&e.jsxs("div",{className:c.widgetCard,children:[e.jsx("h2",{children:"Learning Path Progress"}),e.jsx(ks,{paths:u})]}),w&&w.length>0&&e.jsxs("div",{className:c.widgetCard,children:[e.jsx("h2",{children:"Session Activity"}),e.jsx(nt,{sessions:w})]})]}),s&&s.skills_needing_review&&s.skills_needing_review.length>0&&e.jsxs("div",{className:c.reviewSection,children:[e.jsx("h2",{children:"Skills Due for Review"}),e.jsx("p",{className:c.reviewSubtitle,children:"Based on spaced repetition schedule (SM-2 algorithm)"}),e.jsx("div",{className:c.reviewGrid,children:s.skills_needing_review.map(p=>e.jsxs("div",{className:c.reviewCard,children:[e.jsx("h3",{children:p.skill_topic}),e.jsxs("div",{className:c.reviewMeta,children:[e.jsx("span",{className:c.reviewBadge,children:p.mastery_level.charAt(0).toUpperCase()+p.mastery_level.slice(1)}),e.jsxs("span",{className:c.reviewInterval,children:["Next review: ",p.current_interval_days," days"]})]}),e.jsxs("div",{className:c.reviewProgress,children:[e.jsx("div",{className:c.reviewProgressBar,children:e.jsx("div",{className:c.reviewProgressFill,style:{width:`${p.mastery_score}%`}})}),e.jsxs("span",{className:c.reviewScore,children:[p.mastery_score,"%"]})]})]},p.id))})]}),s&&s.recent_milestones&&s.recent_milestones.length>0&&e.jsxs("div",{className:c.milestonesSection,children:[e.jsx("h2",{children:"Recent Milestones"}),e.jsx("div",{className:c.milestonesList,children:s.recent_milestones.map((p,V)=>e.jsxs("div",{className:c.milestoneItem,children:[e.jsx("span",{className:c.milestoneIcon,children:"üèÜ"}),e.jsxs("div",{className:c.milestoneContent,children:[e.jsx("h3",{children:p.name}),e.jsxs("p",{className:c.milestoneDate,children:["Completed: ",new Date(p.completed_at).toLocaleDateString()]}),p.score&&e.jsxs("p",{className:c.milestoneScore,children:["Score: ",p.score,"%"]})]})]},V))})]})]})};export{Ot as LearningAnalyticsDashboard,Ot as default};
//# sourceMappingURL=LearningAnalyticsDashboard-CuALLZ0p.js.map
