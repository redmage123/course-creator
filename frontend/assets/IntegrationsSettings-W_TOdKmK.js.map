{"version":3,"file":"IntegrationsSettings-W_TOdKmK.js","sources":["../../src/services/integrationsService.ts","../../src/features/integrations/hooks/useIntegrations.ts","../../src/features/integrations/components/IntegrationStatusBadge.tsx","../../src/features/integrations/components/LTIIntegrationPanel.tsx","../../src/features/integrations/components/CalendarSyncPanel.tsx","../../src/features/integrations/components/SlackIntegrationPanel.tsx","../../src/features/integrations/components/WebhookManager.tsx","../../src/features/integrations/components/OAuthConnectionsPanel.tsx","../../src/features/integrations/IntegrationsSettings.tsx"],"sourcesContent":["/**\n * Integrations Service\n *\n * BUSINESS CONTEXT:\n * Manages external integrations for the course-creator platform including:\n * - LTI 1.3 platform connections for LMS integration\n * - Calendar synchronization (Google Calendar, Outlook)\n * - Slack workspace integration for notifications\n * - Outbound/inbound webhooks for external service communication\n * - OAuth token management for third-party service access\n *\n * TECHNICAL IMPLEMENTATION:\n * - Uses centralized apiClient with authentication\n * - Handles CRUD operations for all integration types\n * - Manages OAuth flows and token refresh\n * - Integrates with organization-management service (port 8005)\n *\n * WHY THIS APPROACH:\n * - Centralized integration management reduces code duplication\n * - Type-safe interfaces ensure data consistency\n * - Supports multi-tenant B2B architecture with organization-level isolation\n * - Provides comprehensive error handling for external service failures\n */\n\nimport { apiClient } from './apiClient';\n\n// ============================================================================\n// LTI INTERFACES\n// ============================================================================\n\n/**\n * LTI Platform Registration\n *\n * What: LTI 1.3 platform configuration for external LMS integration\n * Where: Used when connecting Canvas, Moodle, Blackboard, etc.\n * Why: Enables LTI tool launches and grade passback to external LMS\n */\nexport interface LTIPlatform {\n  id: string;\n  organization_id: string;\n  platform_name: string;\n  issuer: string;\n  client_id: string;\n  auth_login_url: string;\n  auth_token_url: string;\n  jwks_url: string;\n  deployment_id?: string;\n  scopes: string[];\n  deep_linking_enabled: boolean;\n  names_role_service_enabled: boolean;\n  assignment_grade_service_enabled: boolean;\n  is_active: boolean;\n  verified_at?: string;\n  last_connection_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CreateLTIPlatformRequest {\n  platform_name: string;\n  issuer: string;\n  client_id: string;\n  auth_login_url: string;\n  auth_token_url: string;\n  jwks_url: string;\n  deployment_id?: string;\n  scopes?: string[];\n}\n\n/**\n * LTI Context Mapping\n *\n * What: Maps external LMS course to platform course\n * Where: Created during LTI launch with context claim\n * Why: Enables course linking and roster synchronization\n */\nexport interface LTIContext {\n  id: string;\n  platform_id: string;\n  lti_context_id: string;\n  lti_context_type?: string;\n  lti_context_title?: string;\n  course_id?: string;\n  auto_roster_sync: boolean;\n  last_roster_sync?: string;\n  created_at: string;\n  updated_at: string;\n}\n\n/**\n * LTI Grade Sync Record\n *\n * What: Tracks grade passback to external LMS\n * Where: Created when student receives grade\n * Why: Enables asynchronous grade delivery via LTI AGS\n */\nexport interface LTIGradeSync {\n  id: string;\n  context_id: string;\n  user_mapping_id: string;\n  score: number;\n  max_score: number;\n  sync_status: 'pending' | 'sent' | 'confirmed' | 'failed' | 'retry_scheduled';\n  last_sync_attempt?: string;\n  last_sync_success?: string;\n  sync_error_message?: string;\n  retry_count: number;\n  created_at: string;\n}\n\n// ============================================================================\n// CALENDAR INTERFACES\n// ============================================================================\n\n/**\n * Calendar Provider Configuration\n *\n * What: User calendar integration settings\n * Where: Created when user authorizes calendar access\n * Why: Enables bidirectional calendar sync for deadlines and events\n */\nexport interface CalendarProvider {\n  id: string;\n  user_id: string;\n  provider_type: 'google' | 'outlook' | 'apple' | 'caldav';\n  provider_name?: string;\n  calendar_id?: string;\n  calendar_name?: string;\n  calendar_timezone?: string;\n  sync_enabled: boolean;\n  sync_direction: 'bidirectional' | 'push_only' | 'pull_only';\n  sync_deadline_reminders: boolean;\n  sync_class_schedules: boolean;\n  sync_quiz_dates: boolean;\n  reminder_minutes_before: number;\n  is_connected: boolean;\n  last_sync_at?: string;\n  last_sync_error?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ConnectCalendarRequest {\n  provider_type: 'google' | 'outlook' | 'apple' | 'caldav';\n  access_token: string;\n  refresh_token?: string;\n  token_expires_at?: string;\n  calendar_id?: string;\n  calendar_name?: string;\n  calendar_timezone?: string;\n}\n\nexport interface UpdateCalendarSettingsRequest {\n  sync_enabled?: boolean;\n  sync_direction?: 'bidirectional' | 'push_only' | 'pull_only';\n  sync_deadline_reminders?: boolean;\n  sync_class_schedules?: boolean;\n  sync_quiz_dates?: boolean;\n  reminder_minutes_before?: number;\n}\n\n/**\n * Calendar Event\n *\n * What: Synced calendar event record\n * Where: Created during calendar synchronization\n * Why: Tracks events between platform and external calendar\n */\nexport interface CalendarEvent {\n  id: string;\n  provider_id: string;\n  user_id: string;\n  title: string;\n  start_time: string;\n  end_time: string;\n  external_event_id?: string;\n  description?: string;\n  location?: string;\n  event_type?: string;\n  source_type?: string;\n  source_id?: string;\n  sync_status: 'synced' | 'pending' | 'conflict' | 'error';\n  created_at: string;\n  updated_at: string;\n}\n\n// ============================================================================\n// SLACK INTERFACES\n// ============================================================================\n\n/**\n * Slack Workspace Configuration\n *\n * What: Organization Slack workspace connection\n * Where: Created after Slack OAuth flow completes\n * Why: Enables Slack notifications, commands, and AI assistant\n */\nexport interface SlackWorkspace {\n  id: string;\n  organization_id: string;\n  workspace_id: string;\n  workspace_name?: string;\n  workspace_domain?: string;\n  bot_user_id?: string;\n  scopes: string[];\n  default_announcements_channel?: string;\n  default_alerts_channel?: string;\n  enable_notifications: boolean;\n  enable_commands: boolean;\n  enable_ai_assistant: boolean;\n  is_active: boolean;\n  installed_at?: string;\n  last_activity_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ConnectSlackRequest {\n  workspace_id: string;\n  bot_token: string;\n  workspace_name?: string;\n  workspace_domain?: string;\n  scopes?: string[];\n}\n\nexport interface UpdateSlackSettingsRequest {\n  enable_notifications?: boolean;\n  enable_commands?: boolean;\n  enable_ai_assistant?: boolean;\n  default_announcements_channel?: string;\n  default_alerts_channel?: string;\n}\n\n/**\n * Slack Channel Mapping\n *\n * What: Maps Slack channel to course/project entity\n * Where: Created when linking channel to entity\n * Why: Enables targeted notifications to specific channels\n */\nexport interface SlackChannelMapping {\n  id: string;\n  workspace_id: string;\n  channel_id: string;\n  channel_name?: string;\n  channel_type: 'channel' | 'private' | 'dm';\n  entity_type: string;\n  entity_id: string;\n  notify_announcements: boolean;\n  notify_deadlines: boolean;\n  notify_grades: boolean;\n  notify_new_content: boolean;\n  notify_discussions: boolean;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\n// ============================================================================\n// WEBHOOK INTERFACES\n// ============================================================================\n\n/**\n * Outbound Webhook Configuration\n *\n * What: Webhook endpoint for sending events to external services\n * Where: Created when setting up webhook integration\n * Why: Enables event notifications to external systems (Zapier, custom apps)\n */\nexport interface OutboundWebhook {\n  id: string;\n  organization_id: string;\n  name: string;\n  description?: string;\n  target_url: string;\n  auth_type: 'none' | 'bearer' | 'basic' | 'hmac' | 'api_key';\n  event_types: string[];\n  retry_count: number;\n  retry_delay_seconds: number;\n  timeout_seconds: number;\n  is_active: boolean;\n  last_triggered_at?: string;\n  success_count: number;\n  failure_count: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CreateOutboundWebhookRequest {\n  name: string;\n  description?: string;\n  target_url: string;\n  auth_type: 'none' | 'bearer' | 'basic' | 'hmac' | 'api_key';\n  auth_secret?: string;\n  event_types?: string[];\n  retry_count?: number;\n  retry_delay_seconds?: number;\n  timeout_seconds?: number;\n}\n\n/**\n * Webhook Delivery Log\n *\n * What: Records webhook delivery attempts\n * Where: Created for each webhook delivery\n * Why: Enables debugging and monitoring webhook reliability\n */\nexport interface WebhookDeliveryLog {\n  id: string;\n  webhook_id: string;\n  event_type: string;\n  event_id: string;\n  attempt_number: number;\n  request_timestamp: string;\n  response_timestamp?: string;\n  response_status_code?: number;\n  delivery_status: 'pending' | 'success' | 'failed' | 'retry_scheduled';\n  error_message?: string;\n}\n\n/**\n * Inbound Webhook Configuration\n *\n * What: Webhook endpoint for receiving events from external services\n * Where: Created when setting up webhook receiver\n * Why: Enables integration with GitHub, Stripe, Zapier, etc.\n */\nexport interface InboundWebhook {\n  id: string;\n  organization_id: string;\n  name: string;\n  description?: string;\n  webhook_token: string;\n  handler_type: 'github' | 'stripe' | 'zapier' | 'custom' | 'lms_webhook';\n  auth_type: 'none' | 'bearer' | 'basic' | 'hmac' | 'api_key';\n  allowed_ips: string[];\n  is_active: boolean;\n  last_received_at?: string;\n  total_received: number;\n  total_processed: number;\n  total_failed: number;\n  created_at: string;\n  updated_at: string;\n}\n\n// ============================================================================\n// OAUTH INTERFACES\n// ============================================================================\n\n/**\n * OAuth Token\n *\n * What: OAuth token storage for external service access\n * Where: Created after OAuth authorization flow\n * Why: Manages tokens for Google, Microsoft, Slack, GitHub, Zoom APIs\n */\nexport interface OAuthToken {\n  id: string;\n  provider: 'google' | 'microsoft' | 'slack' | 'github' | 'zoom';\n  user_id?: string;\n  organization_id?: string;\n  provider_user_id?: string;\n  token_type: string;\n  expires_at?: string;\n  refresh_expires_at?: string;\n  scopes: string[];\n  is_valid: boolean;\n  last_used_at?: string;\n  last_refreshed_at?: string;\n  consecutive_failures: number;\n  last_error?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface StoreOAuthTokenRequest {\n  provider: 'google' | 'microsoft' | 'slack' | 'github' | 'zoom';\n  access_token: string;\n  user_id?: string;\n  organization_id?: string;\n  refresh_token?: string;\n  expires_at?: string;\n  scopes?: string[];\n}\n\n// ============================================================================\n// SERVICE CLASS\n// ============================================================================\n\n/**\n * Integrations Service Class\n *\n * WHY THIS APPROACH:\n * - Centralized integration API logic for all external services\n * - Type-safe interfaces for compile-time validation\n * - Comprehensive error handling for external service failures\n * - Supports OAuth flows and token refresh\n * - Multi-tenant architecture with organization-level isolation\n */\nclass IntegrationsService {\n  private baseUrl = '/integrations';\n\n  // ========================================================================\n  // LTI PLATFORM METHODS\n  // ========================================================================\n\n  /**\n   * Register new LTI 1.3 platform\n   *\n   * What: Creates LTI platform registration for external LMS\n   * Where: Called when organization admin sets up LTI integration\n   * Why: Enables external LMS to launch into platform as LTI tool\n   */\n  async registerLTIPlatform(\n    organizationId: string,\n    data: CreateLTIPlatformRequest\n  ): Promise<LTIPlatform> {\n    return await apiClient.post<LTIPlatform>(\n      `${this.baseUrl}/lti/platforms`,\n      { ...data, organization_id: organizationId }\n    );\n  }\n\n  /**\n   * Get all LTI platforms for organization\n   */\n  async getOrganizationLTIPlatforms(organizationId: string): Promise<LTIPlatform[]> {\n    return await apiClient.get<LTIPlatform[]>(\n      `${this.baseUrl}/lti/platforms`,\n      { params: { organization_id: organizationId } }\n    );\n  }\n\n  /**\n   * Get LTI platform by ID\n   */\n  async getLTIPlatformById(platformId: string): Promise<LTIPlatform> {\n    return await apiClient.get<LTIPlatform>(\n      `${this.baseUrl}/lti/platforms/${platformId}`\n    );\n  }\n\n  /**\n   * Verify LTI platform after successful handshake\n   */\n  async verifyLTIPlatform(platformId: string): Promise<LTIPlatform> {\n    return await apiClient.post<LTIPlatform>(\n      `${this.baseUrl}/lti/platforms/${platformId}/verify`\n    );\n  }\n\n  /**\n   * Deactivate LTI platform\n   */\n  async deactivateLTIPlatform(platformId: string): Promise<LTIPlatform> {\n    return await apiClient.post<LTIPlatform>(\n      `${this.baseUrl}/lti/platforms/${platformId}/deactivate`\n    );\n  }\n\n  /**\n   * Get LTI contexts for platform\n   */\n  async getLTIContexts(platformId: string): Promise<LTIContext[]> {\n    return await apiClient.get<LTIContext[]>(\n      `${this.baseUrl}/lti/platforms/${platformId}/contexts`\n    );\n  }\n\n  /**\n   * Link LTI context to course\n   */\n  async linkLTIContextToCourse(\n    contextId: string,\n    courseId: string\n  ): Promise<LTIContext> {\n    return await apiClient.post<LTIContext>(\n      `${this.baseUrl}/lti/contexts/${contextId}/link`,\n      { course_id: courseId }\n    );\n  }\n\n  /**\n   * Get pending grade syncs for monitoring\n   */\n  async getPendingGradeSyncs(limit: number = 100): Promise<LTIGradeSync[]> {\n    return await apiClient.get<LTIGradeSync[]>(\n      `${this.baseUrl}/lti/grade-syncs/pending`,\n      { params: { limit } }\n    );\n  }\n\n  // ========================================================================\n  // CALENDAR METHODS\n  // ========================================================================\n\n  /**\n   * Connect calendar provider\n   *\n   * What: Connects user calendar for synchronization\n   * Where: Called after OAuth authorization completes\n   * Why: Enables automatic calendar sync for deadlines and events\n   */\n  async connectCalendar(data: ConnectCalendarRequest): Promise<CalendarProvider> {\n    return await apiClient.post<CalendarProvider>(\n      `${this.baseUrl}/calendars/connect`,\n      data\n    );\n  }\n\n  /**\n   * Get user's connected calendars\n   */\n  async getUserCalendars(userId: string): Promise<CalendarProvider[]> {\n    return await apiClient.get<CalendarProvider[]>(\n      `${this.baseUrl}/calendars`,\n      { params: { user_id: userId } }\n    );\n  }\n\n  /**\n   * Update calendar settings\n   */\n  async updateCalendarSettings(\n    providerId: string,\n    data: UpdateCalendarSettingsRequest\n  ): Promise<CalendarProvider> {\n    return await apiClient.put<CalendarProvider>(\n      `${this.baseUrl}/calendars/${providerId}`,\n      data\n    );\n  }\n\n  /**\n   * Disconnect calendar\n   */\n  async disconnectCalendar(providerId: string): Promise<void> {\n    await apiClient.delete(`${this.baseUrl}/calendars/${providerId}`);\n  }\n\n  /**\n   * Get calendar events for user\n   */\n  async getCalendarEvents(\n    userId: string,\n    startDate?: string,\n    endDate?: string\n  ): Promise<CalendarEvent[]> {\n    return await apiClient.get<CalendarEvent[]>(\n      `${this.baseUrl}/calendars/events`,\n      { params: { user_id: userId, start_date: startDate, end_date: endDate } }\n    );\n  }\n\n  /**\n   * Trigger manual calendar sync\n   */\n  async triggerCalendarSync(providerId: string): Promise<{ synced_count: number }> {\n    return await apiClient.post<{ synced_count: number }>(\n      `${this.baseUrl}/calendars/${providerId}/sync`\n    );\n  }\n\n  // ========================================================================\n  // SLACK METHODS\n  // ========================================================================\n\n  /**\n   * Connect Slack workspace\n   *\n   * What: Connects organization Slack workspace\n   * Where: Called after Slack OAuth flow completes\n   * Why: Enables Slack notifications, commands, and AI assistant\n   */\n  async connectSlackWorkspace(\n    organizationId: string,\n    data: ConnectSlackRequest\n  ): Promise<SlackWorkspace> {\n    return await apiClient.post<SlackWorkspace>(\n      `${this.baseUrl}/slack/workspaces`,\n      { ...data, organization_id: organizationId }\n    );\n  }\n\n  /**\n   * Get organization Slack workspace\n   */\n  async getOrganizationSlackWorkspace(\n    organizationId: string\n  ): Promise<SlackWorkspace | null> {\n    return await apiClient.get<SlackWorkspace | null>(\n      `${this.baseUrl}/slack/workspaces`,\n      { params: { organization_id: organizationId } }\n    );\n  }\n\n  /**\n   * Update Slack workspace settings\n   */\n  async updateSlackSettings(\n    workspaceId: string,\n    data: UpdateSlackSettingsRequest\n  ): Promise<SlackWorkspace> {\n    return await apiClient.put<SlackWorkspace>(\n      `${this.baseUrl}/slack/workspaces/${workspaceId}`,\n      data\n    );\n  }\n\n  /**\n   * Disconnect Slack workspace\n   */\n  async disconnectSlackWorkspace(workspaceId: string): Promise<void> {\n    await apiClient.delete(`${this.baseUrl}/slack/workspaces/${workspaceId}`);\n  }\n\n  /**\n   * Get Slack channel mappings for entity\n   */\n  async getEntitySlackChannels(\n    entityType: string,\n    entityId: string\n  ): Promise<SlackChannelMapping[]> {\n    return await apiClient.get<SlackChannelMapping[]>(\n      `${this.baseUrl}/slack/channels`,\n      { params: { entity_type: entityType, entity_id: entityId } }\n    );\n  }\n\n  /**\n   * Map Slack channel to entity\n   */\n  async mapSlackChannel(\n    workspaceId: string,\n    channelId: string,\n    entityType: string,\n    entityId: string,\n    channelName?: string\n  ): Promise<SlackChannelMapping> {\n    return await apiClient.post<SlackChannelMapping>(\n      `${this.baseUrl}/slack/channels`,\n      {\n        workspace_id: workspaceId,\n        channel_id: channelId,\n        channel_name: channelName,\n        entity_type: entityType,\n        entity_id: entityId,\n      }\n    );\n  }\n\n  /**\n   * Test Slack connection\n   */\n  async testSlackConnection(workspaceId: string): Promise<{ success: boolean; message: string }> {\n    return await apiClient.post<{ success: boolean; message: string }>(\n      `${this.baseUrl}/slack/workspaces/${workspaceId}/test`\n    );\n  }\n\n  // ========================================================================\n  // WEBHOOK METHODS\n  // ========================================================================\n\n  /**\n   * Create outbound webhook\n   *\n   * What: Creates webhook for sending events to external services\n   * Where: Called when setting up webhook integration\n   * Why: Enables event notifications to Zapier, custom apps, etc.\n   */\n  async createOutboundWebhook(\n    organizationId: string,\n    data: CreateOutboundWebhookRequest\n  ): Promise<OutboundWebhook> {\n    return await apiClient.post<OutboundWebhook>(\n      `${this.baseUrl}/webhooks/outbound`,\n      { ...data, organization_id: organizationId }\n    );\n  }\n\n  /**\n   * Get organization outbound webhooks\n   */\n  async getOrganizationWebhooks(organizationId: string): Promise<OutboundWebhook[]> {\n    return await apiClient.get<OutboundWebhook[]>(\n      `${this.baseUrl}/webhooks/outbound`,\n      { params: { organization_id: organizationId } }\n    );\n  }\n\n  /**\n   * Update outbound webhook\n   */\n  async updateOutboundWebhook(\n    webhookId: string,\n    data: Partial<CreateOutboundWebhookRequest>\n  ): Promise<OutboundWebhook> {\n    return await apiClient.put<OutboundWebhook>(\n      `${this.baseUrl}/webhooks/outbound/${webhookId}`,\n      data\n    );\n  }\n\n  /**\n   * Delete outbound webhook\n   */\n  async deleteOutboundWebhook(webhookId: string): Promise<void> {\n    await apiClient.delete(`${this.baseUrl}/webhooks/outbound/${webhookId}`);\n  }\n\n  /**\n   * Test outbound webhook\n   */\n  async testOutboundWebhook(\n    webhookId: string\n  ): Promise<{ success: boolean; status_code?: number; message: string }> {\n    return await apiClient.post<{ success: boolean; status_code?: number; message: string }>(\n      `${this.baseUrl}/webhooks/outbound/${webhookId}/test`\n    );\n  }\n\n  /**\n   * Get webhook delivery logs\n   */\n  async getWebhookDeliveryLogs(\n    webhookId: string,\n    limit: number = 50\n  ): Promise<WebhookDeliveryLog[]> {\n    return await apiClient.get<WebhookDeliveryLog[]>(\n      `${this.baseUrl}/webhooks/outbound/${webhookId}/logs`,\n      { params: { limit } }\n    );\n  }\n\n  /**\n   * Get inbound webhooks for organization\n   */\n  async getInboundWebhooks(organizationId: string): Promise<InboundWebhook[]> {\n    return await apiClient.get<InboundWebhook[]>(\n      `${this.baseUrl}/webhooks/inbound`,\n      { params: { organization_id: organizationId } }\n    );\n  }\n\n  /**\n   * Create inbound webhook\n   */\n  async createInboundWebhook(\n    organizationId: string,\n    name: string,\n    handlerType: 'github' | 'stripe' | 'zapier' | 'custom' | 'lms_webhook',\n    description?: string\n  ): Promise<InboundWebhook> {\n    return await apiClient.post<InboundWebhook>(\n      `${this.baseUrl}/webhooks/inbound`,\n      {\n        organization_id: organizationId,\n        name,\n        handler_type: handlerType,\n        description,\n      }\n    );\n  }\n\n  /**\n   * Delete inbound webhook\n   */\n  async deleteInboundWebhook(webhookId: string): Promise<void> {\n    await apiClient.delete(`${this.baseUrl}/webhooks/inbound/${webhookId}`);\n  }\n\n  // ========================================================================\n  // OAUTH TOKEN METHODS\n  // ========================================================================\n\n  /**\n   * Store OAuth token\n   *\n   * What: Stores OAuth token for external service access\n   * Where: Called after OAuth authorization\n   * Why: Enables API access to Google, Microsoft, Slack, GitHub, Zoom\n   */\n  async storeOAuthToken(data: StoreOAuthTokenRequest): Promise<OAuthToken> {\n    return await apiClient.post<OAuthToken>(\n      `${this.baseUrl}/oauth/tokens`,\n      data\n    );\n  }\n\n  /**\n   * Get OAuth token for provider\n   */\n  async getOAuthToken(\n    provider: 'google' | 'microsoft' | 'slack' | 'github' | 'zoom',\n    userId?: string,\n    organizationId?: string\n  ): Promise<OAuthToken | null> {\n    return await apiClient.get<OAuthToken | null>(\n      `${this.baseUrl}/oauth/tokens/${provider}`,\n      { params: { user_id: userId, organization_id: organizationId } }\n    );\n  }\n\n  /**\n   * Refresh OAuth token\n   */\n  async refreshOAuthToken(tokenId: string): Promise<OAuthToken> {\n    return await apiClient.post<OAuthToken>(\n      `${this.baseUrl}/oauth/tokens/${tokenId}/refresh`\n    );\n  }\n\n  /**\n   * Revoke OAuth token\n   */\n  async revokeOAuthToken(tokenId: string): Promise<void> {\n    await apiClient.delete(`${this.baseUrl}/oauth/tokens/${tokenId}`);\n  }\n\n  /**\n   * Get user's OAuth connections\n   */\n  async getUserOAuthConnections(userId: string): Promise<OAuthToken[]> {\n    return await apiClient.get<OAuthToken[]>(\n      `${this.baseUrl}/oauth/tokens`,\n      { params: { user_id: userId } }\n    );\n  }\n\n  /**\n   * Get organization's OAuth connections\n   */\n  async getOrganizationOAuthConnections(organizationId: string): Promise<OAuthToken[]> {\n    return await apiClient.get<OAuthToken[]>(\n      `${this.baseUrl}/oauth/tokens`,\n      { params: { organization_id: organizationId } }\n    );\n  }\n\n  // ========================================================================\n  // OAUTH FLOW HELPERS\n  // ========================================================================\n\n  /**\n   * Initiate OAuth flow\n   *\n   * What: Redirects to OAuth provider authorization page\n   * Where: Called when user clicks \"Connect\" button\n   * Why: Starts OAuth authorization flow for external service\n   */\n  initiateOAuthFlow(\n    provider: 'google' | 'microsoft' | 'slack' | 'github' | 'zoom',\n    scopes: string[],\n    redirectUri: string\n  ): void {\n    const params = new URLSearchParams({\n      provider,\n      scopes: scopes.join(','),\n      redirect_uri: redirectUri,\n    });\n    window.location.href = `${this.baseUrl}/oauth/authorize?${params.toString()}`;\n  }\n\n  /**\n   * Handle OAuth callback\n   *\n   * What: Processes OAuth callback with authorization code\n   * Where: Called on OAuth redirect URL\n   * Why: Exchanges authorization code for access token\n   */\n  async handleOAuthCallback(\n    provider: string,\n    code: string,\n    state: string\n  ): Promise<{ success: boolean; token?: OAuthToken; error?: string }> {\n    return await apiClient.post<{ success: boolean; token?: OAuthToken; error?: string }>(\n      `${this.baseUrl}/oauth/callback`,\n      { provider, code, state }\n    );\n  }\n}\n\n// Export singleton instance\nexport const integrationsService = new IntegrationsService();\n","/**\n * useIntegrations Custom Hook\n *\n * What: React hook for managing integration data fetching and state\n * Where: Used by integration panel components\n * Why: Centralizes integration data logic with caching and error handling\n *\n * BUSINESS CONTEXT:\n * Integration management requires coordinating multiple external services\n * (LTI, Calendar, Slack, Webhooks, OAuth). This hook provides a unified\n * interface for fetching integration data with proper loading states and\n * error handling.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Uses React Query for data caching and automatic refetching\n * - Provides loading/error states for each integration type\n * - Implements optimistic updates for better UX\n * - Handles token refresh for OAuth-based integrations\n *\n * @module features/integrations/hooks/useIntegrations\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type {\n  LTIPlatform,\n  CalendarProvider,\n  SlackWorkspace,\n  OutboundWebhook,\n  InboundWebhook,\n  OAuthToken,\n} from '../../../services/integrationsService';\n\n/**\n * Integration data state interface\n */\nexport interface IntegrationsState {\n  // LTI integrations\n  ltiPlatforms: LTIPlatform[];\n  ltiLoading: boolean;\n  ltiError: string | null;\n\n  // Calendar integrations\n  calendars: CalendarProvider[];\n  calendarsLoading: boolean;\n  calendarsError: string | null;\n\n  // Slack integration\n  slackWorkspace: SlackWorkspace | null;\n  slackLoading: boolean;\n  slackError: string | null;\n\n  // Webhook integrations\n  outboundWebhooks: OutboundWebhook[];\n  inboundWebhooks: InboundWebhook[];\n  webhooksLoading: boolean;\n  webhooksError: string | null;\n\n  // OAuth connections\n  oauthTokens: OAuthToken[];\n  oauthLoading: boolean;\n  oauthError: string | null;\n}\n\n/**\n * useIntegrations Hook\n *\n * WHY THIS APPROACH:\n * - Centralized integration state management\n * - Automatic data fetching with React hooks\n * - Error handling with user-friendly messages\n * - Refresh methods for manual data reload\n * - Loading states for each integration type\n *\n * @param organizationId - Organization ID for filtering integrations\n * @param userId - Optional user ID for user-specific integrations\n */\nexport const useIntegrations = (\n  organizationId: string,\n  userId?: string\n) => {\n  // State management for all integration types\n  const [state, setState] = useState<IntegrationsState>({\n    ltiPlatforms: [],\n    ltiLoading: false,\n    ltiError: null,\n    calendars: [],\n    calendarsLoading: false,\n    calendarsError: null,\n    slackWorkspace: null,\n    slackLoading: false,\n    slackError: null,\n    outboundWebhooks: [],\n    inboundWebhooks: [],\n    webhooksLoading: false,\n    webhooksError: null,\n    oauthTokens: [],\n    oauthLoading: false,\n    oauthError: null,\n  });\n\n  /**\n   * Fetch LTI platforms for organization\n   *\n   * What: Retrieves all LTI platform registrations\n   * Where: Called on mount and when organizationId changes\n   * Why: Displays configured LMS integrations\n   */\n  const fetchLTIPlatforms = useCallback(async () => {\n    setState(prev => ({ ...prev, ltiLoading: true, ltiError: null }));\n    try {\n      const platforms = await integrationsService.getOrganizationLTIPlatforms(organizationId);\n      setState(prev => ({\n        ...prev,\n        ltiPlatforms: platforms,\n        ltiLoading: false,\n      }));\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        ltiError: error.response?.data?.message || 'Failed to load LTI platforms',\n        ltiLoading: false,\n      }));\n    }\n  }, [organizationId]);\n\n  /**\n   * Fetch calendar providers for user\n   *\n   * What: Retrieves user's connected calendar providers\n   * Where: Called on mount and when userId changes\n   * Why: Displays configured calendar integrations\n   */\n  const fetchCalendars = useCallback(async () => {\n    if (!userId) return;\n\n    setState(prev => ({ ...prev, calendarsLoading: true, calendarsError: null }));\n    try {\n      const calendars = await integrationsService.getUserCalendars(userId);\n      setState(prev => ({\n        ...prev,\n        calendars,\n        calendarsLoading: false,\n      }));\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        calendarsError: error.response?.data?.message || 'Failed to load calendars',\n        calendarsLoading: false,\n      }));\n    }\n  }, [userId]);\n\n  /**\n   * Fetch Slack workspace for organization\n   *\n   * What: Retrieves organization's Slack workspace configuration\n   * Where: Called on mount and when organizationId changes\n   * Why: Displays Slack integration settings\n   */\n  const fetchSlackWorkspace = useCallback(async () => {\n    setState(prev => ({ ...prev, slackLoading: true, slackError: null }));\n    try {\n      const workspace = await integrationsService.getOrganizationSlackWorkspace(organizationId);\n      setState(prev => ({\n        ...prev,\n        slackWorkspace: workspace,\n        slackLoading: false,\n      }));\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        slackError: error.response?.data?.message || 'Failed to load Slack workspace',\n        slackLoading: false,\n      }));\n    }\n  }, [organizationId]);\n\n  /**\n   * Fetch webhooks for organization\n   *\n   * What: Retrieves organization's outbound and inbound webhooks\n   * Where: Called on mount and when organizationId changes\n   * Why: Displays configured webhook integrations\n   */\n  const fetchWebhooks = useCallback(async () => {\n    setState(prev => ({ ...prev, webhooksLoading: true, webhooksError: null }));\n    try {\n      const [outbound, inbound] = await Promise.all([\n        integrationsService.getOrganizationWebhooks(organizationId),\n        integrationsService.getInboundWebhooks(organizationId),\n      ]);\n      setState(prev => ({\n        ...prev,\n        outboundWebhooks: outbound,\n        inboundWebhooks: inbound,\n        webhooksLoading: false,\n      }));\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        webhooksError: error.response?.data?.message || 'Failed to load webhooks',\n        webhooksLoading: false,\n      }));\n    }\n  }, [organizationId]);\n\n  /**\n   * Fetch OAuth connections\n   *\n   * What: Retrieves OAuth tokens for user or organization\n   * Where: Called on mount and when userId/organizationId changes\n   * Why: Displays connected third-party services\n   */\n  const fetchOAuthTokens = useCallback(async () => {\n    setState(prev => ({ ...prev, oauthLoading: true, oauthError: null }));\n    try {\n      let tokens: OAuthToken[] = [];\n      if (userId) {\n        tokens = await integrationsService.getUserOAuthConnections(userId);\n      } else {\n        tokens = await integrationsService.getOrganizationOAuthConnections(organizationId);\n      }\n      setState(prev => ({\n        ...prev,\n        oauthTokens: tokens,\n        oauthLoading: false,\n      }));\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        oauthError: error.response?.data?.message || 'Failed to load OAuth connections',\n        oauthLoading: false,\n      }));\n    }\n  }, [userId, organizationId]);\n\n  /**\n   * Refresh all integration data\n   *\n   * What: Reloads all integration types\n   * Where: Called after integration changes or manually by user\n   * Why: Ensures UI reflects latest integration state\n   */\n  const refreshAll = useCallback(async () => {\n    await Promise.all([\n      fetchLTIPlatforms(),\n      fetchCalendars(),\n      fetchSlackWorkspace(),\n      fetchWebhooks(),\n      fetchOAuthTokens(),\n    ]);\n  }, [\n    fetchLTIPlatforms,\n    fetchCalendars,\n    fetchSlackWorkspace,\n    fetchWebhooks,\n    fetchOAuthTokens,\n  ]);\n\n  /**\n   * Initial data fetch on mount\n   */\n  useEffect(() => {\n    fetchLTIPlatforms();\n    fetchSlackWorkspace();\n    fetchWebhooks();\n    fetchOAuthTokens();\n  }, [fetchLTIPlatforms, fetchSlackWorkspace, fetchWebhooks, fetchOAuthTokens]);\n\n  /**\n   * Fetch calendars when userId becomes available\n   */\n  useEffect(() => {\n    if (userId) {\n      fetchCalendars();\n    }\n  }, [userId, fetchCalendars]);\n\n  /**\n   * Computed loading state\n   */\n  const isLoading =\n    state.ltiLoading ||\n    state.calendarsLoading ||\n    state.slackLoading ||\n    state.webhooksLoading ||\n    state.oauthLoading;\n\n  /**\n   * Computed error state\n   */\n  const hasError =\n    !!state.ltiError ||\n    !!state.calendarsError ||\n    !!state.slackError ||\n    !!state.webhooksError ||\n    !!state.oauthError;\n\n  return {\n    // State\n    ...state,\n    isLoading,\n    hasError,\n\n    // Refresh methods\n    refreshAll,\n    refreshLTI: fetchLTIPlatforms,\n    refreshCalendars: fetchCalendars,\n    refreshSlack: fetchSlackWorkspace,\n    refreshWebhooks: fetchWebhooks,\n    refreshOAuth: fetchOAuthTokens,\n  };\n};\n\nexport default useIntegrations;\n","/**\n * IntegrationStatusBadge Component\n *\n * What: Displays integration connection status with color-coded visual indicator\n * Where: Used in all integration panels to show real-time connection health\n * Why: Provides at-a-glance status visualization for integration monitoring\n *\n * BUSINESS CONTEXT:\n * Integration health is critical for business operations - disconnected integrations\n * mean missed notifications, failed grade passbacks, and broken workflows.\n * This component provides immediate visual feedback for troubleshooting.\n *\n * @module features/integrations/components/IntegrationStatusBadge\n */\n\nimport React from 'react';\nimport styles from './IntegrationStatusBadge.module.css';\n\nexport interface IntegrationStatusBadgeProps {\n  /** Connection status */\n  status: 'connected' | 'disconnected' | 'error' | 'pending' | 'syncing';\n  /** Optional last sync/connection timestamp */\n  lastSync?: string;\n  /** Optional error message */\n  errorMessage?: string;\n  /** Badge size variant */\n  size?: 'small' | 'medium' | 'large';\n}\n\n/**\n * IntegrationStatusBadge Component\n *\n * WHY THIS APPROACH:\n * - Color-coded status (green=connected, red=error, yellow=pending, blue=syncing)\n * - Animated pulse effect for active syncing state\n * - Tooltip with last sync time and error details\n * - Multiple size variants for different UI contexts\n * - Accessible with aria-label for screen readers\n */\nexport const IntegrationStatusBadge: React.FC<IntegrationStatusBadgeProps> = ({\n  status,\n  lastSync,\n  errorMessage,\n  size = 'medium'\n}) => {\n  /**\n   * Get status display text\n   */\n  const getStatusText = (): string => {\n    switch (status) {\n      case 'connected':\n        return 'Connected';\n      case 'disconnected':\n        return 'Disconnected';\n      case 'error':\n        return 'Error';\n      case 'pending':\n        return 'Pending';\n      case 'syncing':\n        return 'Syncing...';\n      default:\n        return 'Unknown';\n    }\n  };\n\n  /**\n   * Get status color class\n   */\n  const getStatusClass = (): string => {\n    switch (status) {\n      case 'connected':\n        return styles.statusConnected;\n      case 'disconnected':\n        return styles.statusDisconnected;\n      case 'error':\n        return styles.statusError;\n      case 'pending':\n        return styles.statusPending;\n      case 'syncing':\n        return styles.statusSyncing;\n      default:\n        return styles.statusDisconnected;\n    }\n  };\n\n  /**\n   * Format last sync timestamp\n   */\n  const formatLastSync = (): string | null => {\n    if (!lastSync) return null;\n\n    try {\n      const date = new Date(lastSync);\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffMins = Math.floor(diffMs / 60000);\n      const diffHours = Math.floor(diffMs / 3600000);\n      const diffDays = Math.floor(diffMs / 86400000);\n\n      if (diffMins < 1) return 'Just now';\n      if (diffMins < 60) return `${diffMins} min${diffMins > 1 ? 's' : ''} ago`;\n      if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n      if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n\n      return date.toLocaleDateString();\n    } catch (error) {\n      return null;\n    }\n  };\n\n  const statusText = getStatusText();\n  const statusClass = getStatusClass();\n  const lastSyncText = formatLastSync();\n\n  return (\n    <div\n      className={`${styles.badge} ${statusClass} ${styles[`size-${size}`]}`}\n      role=\"status\"\n      aria-label={`Integration status: ${statusText}${errorMessage ? ` - ${errorMessage}` : ''}`}\n    >\n      {/* Status indicator dot */}\n      <span\n        className={`${styles.indicator} ${status === 'syncing' ? styles.pulse : ''}`}\n        aria-hidden=\"true\"\n      />\n\n      {/* Status text */}\n      <span className={styles.text}>{statusText}</span>\n\n      {/* Last sync info (medium/large sizes only) */}\n      {size !== 'small' && lastSyncText && (\n        <span className={styles.lastSync} title={`Last synced: ${lastSync}`}>\n          {lastSyncText}\n        </span>\n      )}\n\n      {/* Error message tooltip */}\n      {errorMessage && (\n        <span className={styles.errorTooltip} title={errorMessage}>\n          ⓘ\n        </span>\n      )}\n    </div>\n  );\n};\n\nexport default IntegrationStatusBadge;\n","/**\n * LTIIntegrationPanel Component\n *\n * What: LTI 1.3 platform registration and management interface\n * Where: Used in IntegrationsSettings page for LMS integration\n * Why: Enables connecting external LMS platforms (Canvas, Moodle, Blackboard)\n *\n * BUSINESS CONTEXT:\n * LTI (Learning Tools Interoperability) integration allows external LMS platforms\n * to launch into our platform as an LTI tool. This enables:\n * - Deep linking for content selection\n * - Grade passback to external gradebook\n * - Roster synchronization\n * - Single sign-on for seamless user experience\n *\n * @module features/integrations/components/LTIIntegrationPanel\n */\n\nimport React, { useState } from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type { LTIPlatform, CreateLTIPlatformRequest } from '../../../services/integrationsService';\nimport IntegrationStatusBadge from './IntegrationStatusBadge';\nimport styles from './LTIIntegrationPanel.module.css';\n\nexport interface LTIIntegrationPanelProps {\n  /** Organization ID */\n  organizationId: string;\n  /** Existing LTI platforms */\n  platforms: LTIPlatform[];\n  /** Refresh callback after changes */\n  onRefresh: () => void;\n}\n\n/**\n * LTIIntegrationPanel Component\n *\n * WHY THIS APPROACH:\n * - Form-based LTI platform registration\n * - Platform list with verification status\n * - Test connection functionality\n * - Clear instructions for LMS admin configuration\n * - Comprehensive field validation with helpful error messages\n */\nexport const LTIIntegrationPanel: React.FC<LTIIntegrationPanelProps> = ({\n  organizationId,\n  platforms,\n  onRefresh,\n}) => {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [formData, setFormData] = useState<CreateLTIPlatformRequest>({\n    platform_name: '',\n    issuer: '',\n    client_id: '',\n    auth_login_url: '',\n    auth_token_url: '',\n    jwks_url: '',\n    deployment_id: '',\n    scopes: [],\n  });\n  const [formErrors, setFormErrors] = useState<Record<string, string>>({});\n  const [submitting, setSubmitting] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n\n  /**\n   * Validate form data\n   *\n   * What: Client-side validation of LTI configuration\n   * Where: Called before form submission\n   * Why: Provides immediate feedback on invalid URLs or missing fields\n   */\n  const validateForm = (): boolean => {\n    const errors: Record<string, string> = {};\n\n    if (!formData.platform_name.trim()) {\n      errors.platform_name = 'Platform name is required';\n    }\n\n    if (!formData.issuer.trim()) {\n      errors.issuer = 'Issuer URL is required';\n    } else if (!formData.issuer.startsWith('http')) {\n      errors.issuer = 'Issuer must be a valid URL';\n    }\n\n    if (!formData.client_id.trim()) {\n      errors.client_id = 'Client ID is required';\n    }\n\n    if (!formData.auth_login_url.trim()) {\n      errors.auth_login_url = 'Auth login URL is required';\n    } else if (!formData.auth_login_url.startsWith('http')) {\n      errors.auth_login_url = 'Auth login URL must be a valid URL';\n    }\n\n    if (!formData.auth_token_url.trim()) {\n      errors.auth_token_url = 'Auth token URL is required';\n    } else if (!formData.auth_token_url.startsWith('http')) {\n      errors.auth_token_url = 'Auth token URL must be a valid URL';\n    }\n\n    if (!formData.jwks_url.trim()) {\n      errors.jwks_url = 'JWKS URL is required';\n    } else if (!formData.jwks_url.startsWith('http')) {\n      errors.jwks_url = 'JWKS URL must be a valid URL';\n    }\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) return;\n\n    setSubmitting(true);\n    setSuccessMessage('');\n\n    try {\n      await integrationsService.registerLTIPlatform(organizationId, formData);\n      setSuccessMessage('LTI platform registered successfully!');\n      setShowAddForm(false);\n      setFormData({\n        platform_name: '',\n        issuer: '',\n        client_id: '',\n        auth_login_url: '',\n        auth_token_url: '',\n        jwks_url: '',\n        deployment_id: '',\n        scopes: [],\n      });\n      setFormErrors({});\n      onRefresh();\n    } catch (error: any) {\n      setFormErrors({\n        submit: error.response?.data?.message || 'Failed to register LTI platform',\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  /**\n   * Handle platform deactivation\n   */\n  const handleDeactivate = async (platformId: string) => {\n    if (!window.confirm('Are you sure you want to deactivate this LTI platform?')) {\n      return;\n    }\n\n    try {\n      await integrationsService.deactivateLTIPlatform(platformId);\n      setSuccessMessage('LTI platform deactivated successfully!');\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to deactivate LTI platform');\n    }\n  };\n\n  /**\n   * Handle platform verification\n   */\n  const handleVerify = async (platformId: string) => {\n    try {\n      await integrationsService.verifyLTIPlatform(platformId);\n      setSuccessMessage('LTI platform verified successfully!');\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to verify LTI platform');\n    }\n  };\n\n  return (\n    <div className={styles.panel}>\n      <div className={styles.header}>\n        <div>\n          <h2 className={styles.title}>LTI 1.3 Integration</h2>\n          <p className={styles.description}>\n            Connect external LMS platforms (Canvas, Moodle, Blackboard) for seamless integration\n          </p>\n        </div>\n        <button\n          className={styles.addButton}\n          onClick={() => setShowAddForm(!showAddForm)}\n          disabled={submitting}\n        >\n          {showAddForm ? 'Cancel' : '+ Add LTI Platform'}\n        </button>\n      </div>\n\n      {/* Success message */}\n      {successMessage && (\n        <div className={styles.successMessage}>\n          ✓ {successMessage}\n        </div>\n      )}\n\n      {/* Add platform form */}\n      {showAddForm && (\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <h3 className={styles.formTitle}>Register LTI 1.3 Platform</h3>\n\n          {/* Platform name */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"platform_name\" className={styles.label}>\n              Platform Name *\n            </label>\n            <input\n              type=\"text\"\n              id=\"platform_name\"\n              className={styles.input}\n              placeholder=\"e.g., Canvas LMS\"\n              value={formData.platform_name}\n              onChange={(e) => setFormData({ ...formData, platform_name: e.target.value })}\n            />\n            {formErrors.platform_name && (\n              <span className={styles.error}>{formErrors.platform_name}</span>\n            )}\n          </div>\n\n          {/* Issuer */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"issuer\" className={styles.label}>\n              Issuer URL *\n              <span className={styles.helpText}>\n                The platform's issuer identifier (e.g., https://canvas.instructure.com)\n              </span>\n            </label>\n            <input\n              type=\"url\"\n              id=\"issuer\"\n              className={styles.input}\n              placeholder=\"https://example.com\"\n              value={formData.issuer}\n              onChange={(e) => setFormData({ ...formData, issuer: e.target.value })}\n            />\n            {formErrors.issuer && (\n              <span className={styles.error}>{formErrors.issuer}</span>\n            )}\n          </div>\n\n          {/* Client ID */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"client_id\" className={styles.label}>\n              Client ID *\n              <span className={styles.helpText}>\n                The OAuth 2.0 client identifier provided by the LMS\n              </span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"client_id\"\n              className={styles.input}\n              placeholder=\"Client ID from LMS\"\n              value={formData.client_id}\n              onChange={(e) => setFormData({ ...formData, client_id: e.target.value })}\n            />\n            {formErrors.client_id && (\n              <span className={styles.error}>{formErrors.client_id}</span>\n            )}\n          </div>\n\n          {/* Auth Login URL */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"auth_login_url\" className={styles.label}>\n              Auth Login URL *\n              <span className={styles.helpText}>\n                OIDC login initiation endpoint\n              </span>\n            </label>\n            <input\n              type=\"url\"\n              id=\"auth_login_url\"\n              className={styles.input}\n              placeholder=\"https://example.com/api/lti/authorize_redirect\"\n              value={formData.auth_login_url}\n              onChange={(e) => setFormData({ ...formData, auth_login_url: e.target.value })}\n            />\n            {formErrors.auth_login_url && (\n              <span className={styles.error}>{formErrors.auth_login_url}</span>\n            )}\n          </div>\n\n          {/* Auth Token URL */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"auth_token_url\" className={styles.label}>\n              Auth Token URL *\n              <span className={styles.helpText}>\n                OAuth 2.0 token endpoint\n              </span>\n            </label>\n            <input\n              type=\"url\"\n              id=\"auth_token_url\"\n              className={styles.input}\n              placeholder=\"https://example.com/login/oauth2/token\"\n              value={formData.auth_token_url}\n              onChange={(e) => setFormData({ ...formData, auth_token_url: e.target.value })}\n            />\n            {formErrors.auth_token_url && (\n              <span className={styles.error}>{formErrors.auth_token_url}</span>\n            )}\n          </div>\n\n          {/* JWKS URL */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"jwks_url\" className={styles.label}>\n              JWKS URL *\n              <span className={styles.helpText}>\n                JSON Web Key Set endpoint for token verification\n              </span>\n            </label>\n            <input\n              type=\"url\"\n              id=\"jwks_url\"\n              className={styles.input}\n              placeholder=\"https://example.com/api/lti/security/jwks\"\n              value={formData.jwks_url}\n              onChange={(e) => setFormData({ ...formData, jwks_url: e.target.value })}\n            />\n            {formErrors.jwks_url && (\n              <span className={styles.error}>{formErrors.jwks_url}</span>\n            )}\n          </div>\n\n          {/* Deployment ID (optional) */}\n          <div className={styles.formGroup}>\n            <label htmlFor=\"deployment_id\" className={styles.label}>\n              Deployment ID (Optional)\n              <span className={styles.helpText}>\n                Platform deployment identifier (if required by LMS)\n              </span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"deployment_id\"\n              className={styles.input}\n              placeholder=\"Deployment ID (optional)\"\n              value={formData.deployment_id}\n              onChange={(e) => setFormData({ ...formData, deployment_id: e.target.value })}\n            />\n          </div>\n\n          {/* Submit error */}\n          {formErrors.submit && (\n            <div className={styles.submitError}>{formErrors.submit}</div>\n          )}\n\n          {/* Form actions */}\n          <div className={styles.formActions}>\n            <button\n              type=\"button\"\n              className={styles.cancelButton}\n              onClick={() => setShowAddForm(false)}\n              disabled={submitting}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className={styles.submitButton}\n              disabled={submitting}\n            >\n              {submitting ? 'Registering...' : 'Register Platform'}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Platform list */}\n      <div className={styles.platformList}>\n        {platforms.length === 0 ? (\n          <div className={styles.emptyState}>\n            <p>No LTI platforms configured</p>\n            <p className={styles.emptyStateHint}>\n              Click \"Add LTI Platform\" to connect your first LMS\n            </p>\n          </div>\n        ) : (\n          platforms.map((platform) => (\n            <div key={platform.id} className={styles.platformCard}>\n              <div className={styles.platformHeader}>\n                <div>\n                  <h3 className={styles.platformName}>{platform.platform_name}</h3>\n                  <p className={styles.platformIssuer}>{platform.issuer}</p>\n                </div>\n                <IntegrationStatusBadge\n                  status={platform.is_active ? 'connected' : 'disconnected'}\n                  lastSync={platform.last_connection_at}\n                />\n              </div>\n\n              <div className={styles.platformDetails}>\n                <div className={styles.detailRow}>\n                  <span className={styles.detailLabel}>Client ID:</span>\n                  <code className={styles.detailValue}>{platform.client_id}</code>\n                </div>\n                {platform.deployment_id && (\n                  <div className={styles.detailRow}>\n                    <span className={styles.detailLabel}>Deployment ID:</span>\n                    <code className={styles.detailValue}>{platform.deployment_id}</code>\n                  </div>\n                )}\n                <div className={styles.detailRow}>\n                  <span className={styles.detailLabel}>Verified:</span>\n                  <span className={styles.detailValue}>\n                    {platform.verified_at ? (\n                      <span className={styles.verified}>✓ Verified</span>\n                    ) : (\n                      <span className={styles.unverified}>Not verified</span>\n                    )}\n                  </span>\n                </div>\n              </div>\n\n              <div className={styles.platformActions}>\n                {!platform.verified_at && (\n                  <button\n                    className={styles.verifyButton}\n                    onClick={() => handleVerify(platform.id)}\n                  >\n                    Verify Platform\n                  </button>\n                )}\n                {platform.is_active && (\n                  <button\n                    className={styles.deactivateButton}\n                    onClick={() => handleDeactivate(platform.id)}\n                  >\n                    Deactivate\n                  </button>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Setup instructions */}\n      <div className={styles.instructions}>\n        <h3 className={styles.instructionsTitle}>LTI 1.3 Setup Instructions</h3>\n        <ol className={styles.instructionsList}>\n          <li>In your LMS admin panel, navigate to LTI Developer Keys or External Apps</li>\n          <li>Create a new LTI 1.3 configuration</li>\n          <li>Use the following configuration values:</li>\n          <ul className={styles.configValues}>\n            <li><strong>Tool URL:</strong> <code>https://your-domain.com/lti/launch</code></li>\n            <li><strong>Redirect URIs:</strong> <code>https://your-domain.com/lti/callback</code></li>\n            <li><strong>Public JWK URL:</strong> <code>https://your-domain.com/lti/jwks</code></li>\n          </ul>\n          <li>Copy the Issuer, Client ID, and platform URLs from your LMS</li>\n          <li>Click \"Add LTI Platform\" above and paste the values</li>\n          <li>Test the connection by launching from your LMS</li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\nexport default LTIIntegrationPanel;\n","/**\n * CalendarSyncPanel Component\n *\n * What: Calendar integration management for Google Calendar and Outlook\n * Where: Used in IntegrationsSettings for calendar synchronization\n * Why: Enables automatic sync of deadlines, quizzes, and class schedules\n *\n * BUSINESS CONTEXT:\n * Calendar sync improves student engagement by automatically adding course\n * deadlines to their personal calendars. Supports bidirectional sync,\n * reminder notifications, and multiple calendar providers.\n *\n * @module features/integrations/components/CalendarSyncPanel\n */\n\nimport React, { useState } from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type { CalendarProvider, UpdateCalendarSettingsRequest } from '../../../services/integrationsService';\nimport IntegrationStatusBadge from './IntegrationStatusBadge';\nimport styles from './CalendarSyncPanel.module.css';\n\nexport interface CalendarSyncPanelProps {\n  userId: string;\n  calendars: CalendarProvider[];\n  onRefresh: () => void;\n}\n\nexport const CalendarSyncPanel: React.FC<CalendarSyncPanelProps> = ({\n  userId,\n  calendars,\n  onRefresh,\n}) => {\n  const [selectedProvider, setSelectedProvider] = useState<CalendarProvider | null>(null);\n  const [syncSettings, setSyncSettings] = useState<UpdateCalendarSettingsRequest>({});\n  const [syncing, setSyncing] = useState(false);\n\n  const handleConnect = (providerType: 'google' | 'outlook') => {\n    const redirectUri = `${window.location.origin}/integrations/calendar/callback`;\n    const scopes = providerType === 'google'\n      ? ['https://www.googleapis.com/auth/calendar']\n      : ['Calendars.ReadWrite'];\n\n    integrationsService.initiateOAuthFlow(\n      providerType === 'google' ? 'google' : 'microsoft',\n      scopes,\n      redirectUri\n    );\n  };\n\n  const handleDisconnect = async (providerId: string) => {\n    if (!window.confirm('Disconnect this calendar?')) return;\n\n    try {\n      await integrationsService.disconnectCalendar(providerId);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to disconnect calendar');\n    }\n  };\n\n  const handleSyncNow = async (providerId: string) => {\n    setSyncing(true);\n    try {\n      const result = await integrationsService.triggerCalendarSync(providerId);\n      alert(`Successfully synced ${result.synced_count} events`);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to sync calendar');\n    } finally {\n      setSyncing(false);\n    }\n  };\n\n  const handleUpdateSettings = async (provider: CalendarProvider) => {\n    try {\n      await integrationsService.updateCalendarSettings(provider.id, syncSettings);\n      alert('Settings updated successfully');\n      setSelectedProvider(null);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to update settings');\n    }\n  };\n\n  return (\n    <div className={styles.panel}>\n      <div className={styles.header}>\n        <div>\n          <h2 className={styles.title}>Calendar Sync</h2>\n          <p className={styles.description}>\n            Automatically sync course deadlines and events to your calendar\n          </p>\n        </div>\n      </div>\n\n      {/* Connect buttons */}\n      <div className={styles.connectButtons}>\n        <button\n          className={`${styles.connectButton} ${styles.google}`}\n          onClick={() => handleConnect('google')}\n          disabled={calendars.some(c => c.provider_type === 'google')}\n        >\n          <span className={styles.icon}>📅</span>\n          {calendars.some(c => c.provider_type === 'google') ? 'Google Connected' : 'Connect Google Calendar'}\n        </button>\n        <button\n          className={`${styles.connectButton} ${styles.outlook}`}\n          onClick={() => handleConnect('outlook')}\n          disabled={calendars.some(c => c.provider_type === 'outlook')}\n        >\n          <span className={styles.icon}>📆</span>\n          {calendars.some(c => c.provider_type === 'outlook') ? 'Outlook Connected' : 'Connect Outlook Calendar'}\n        </button>\n      </div>\n\n      {/* Connected calendars list */}\n      {calendars.length > 0 && (\n        <div className={styles.calendarList}>\n          {calendars.map((calendar) => (\n            <div key={calendar.id} className={styles.calendarCard}>\n              <div className={styles.calendarHeader}>\n                <div>\n                  <h3 className={styles.calendarName}>\n                    {calendar.provider_type === 'google' ? '📅 Google Calendar' : '📆 Outlook Calendar'}\n                  </h3>\n                  {calendar.calendar_name && (\n                    <p className={styles.calendarSubtitle}>{calendar.calendar_name}</p>\n                  )}\n                </div>\n                <IntegrationStatusBadge\n                  status={calendar.is_connected ? 'connected' : 'disconnected'}\n                  lastSync={calendar.last_sync_at}\n                  errorMessage={calendar.last_sync_error || undefined}\n                />\n              </div>\n\n              {/* Sync settings */}\n              <div className={styles.settings}>\n                <label className={styles.settingRow}>\n                  <input\n                    type=\"checkbox\"\n                    checked={calendar.sync_enabled}\n                    onChange={(e) => {\n                      integrationsService.updateCalendarSettings(calendar.id, {\n                        sync_enabled: e.target.checked\n                      }).then(onRefresh);\n                    }}\n                  />\n                  <span>Enable automatic sync</span>\n                </label>\n                <label className={styles.settingRow}>\n                  <input\n                    type=\"checkbox\"\n                    checked={calendar.sync_deadline_reminders}\n                    disabled={!calendar.sync_enabled}\n                    onChange={(e) => {\n                      integrationsService.updateCalendarSettings(calendar.id, {\n                        sync_deadline_reminders: e.target.checked\n                      }).then(onRefresh);\n                    }}\n                  />\n                  <span>Sync assignment deadlines</span>\n                </label>\n                <label className={styles.settingRow}>\n                  <input\n                    type=\"checkbox\"\n                    checked={calendar.sync_quiz_dates}\n                    disabled={!calendar.sync_enabled}\n                    onChange={(e) => {\n                      integrationsService.updateCalendarSettings(calendar.id, {\n                        sync_quiz_dates: e.target.checked\n                      }).then(onRefresh);\n                    }}\n                  />\n                  <span>Sync quiz dates</span>\n                </label>\n                <label className={styles.settingRow}>\n                  <input\n                    type=\"checkbox\"\n                    checked={calendar.sync_class_schedules}\n                    disabled={!calendar.sync_enabled}\n                    onChange={(e) => {\n                      integrationsService.updateCalendarSettings(calendar.id, {\n                        sync_class_schedules: e.target.checked\n                      }).then(onRefresh);\n                    }}\n                  />\n                  <span>Sync class schedules</span>\n                </label>\n              </div>\n\n              {/* Actions */}\n              <div className={styles.calendarActions}>\n                <button\n                  className={styles.syncButton}\n                  onClick={() => handleSyncNow(calendar.id)}\n                  disabled={syncing}\n                >\n                  {syncing ? 'Syncing...' : 'Sync Now'}\n                </button>\n                <button\n                  className={styles.disconnectButton}\n                  onClick={() => handleDisconnect(calendar.id)}\n                >\n                  Disconnect\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {calendars.length === 0 && (\n        <div className={styles.emptyState}>\n          <p>No calendars connected</p>\n          <p className={styles.emptyStateHint}>\n            Connect Google Calendar or Outlook to automatically sync course events\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CalendarSyncPanel;\n","/**\n * SlackIntegrationPanel Component\n *\n * What: Slack workspace integration and channel mapping management\n * Where: Used in IntegrationsSettings for Slack notifications\n * Why: Enables automated notifications to Slack for course updates\n *\n * BUSINESS CONTEXT:\n * Slack integration keeps teams informed with real-time notifications for:\n * - Course announcements\n * - Assignment deadlines\n * - Grade releases\n * - New content availability\n * - Discussion replies\n *\n * @module features/integrations/components/SlackIntegrationPanel\n */\n\nimport React, { useState } from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type { SlackWorkspace, UpdateSlackSettingsRequest } from '../../../services/integrationsService';\nimport IntegrationStatusBadge from './IntegrationStatusBadge';\nimport styles from './SlackIntegrationPanel.module.css';\n\nexport interface SlackIntegrationPanelProps {\n  organizationId: string;\n  workspace: SlackWorkspace | null;\n  onRefresh: () => void;\n}\n\nexport const SlackIntegrationPanel: React.FC<SlackIntegrationPanelProps> = ({\n  organizationId,\n  workspace,\n  onRefresh,\n}) => {\n  const [testing, setTesting] = useState(false);\n\n  const handleConnect = () => {\n    const redirectUri = `${window.location.origin}/integrations/slack/callback`;\n    const scopes = [\n      'chat:write',\n      'channels:read',\n      'groups:read',\n      'users:read',\n      'incoming-webhook',\n    ];\n\n    integrationsService.initiateOAuthFlow('slack', scopes, redirectUri);\n  };\n\n  const handleDisconnect = async () => {\n    if (!workspace || !window.confirm('Disconnect Slack workspace?')) return;\n\n    try {\n      await integrationsService.disconnectSlackWorkspace(workspace.id);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to disconnect Slack');\n    }\n  };\n\n  const handleTestConnection = async () => {\n    if (!workspace) return;\n\n    setTesting(true);\n    try {\n      const result = await integrationsService.testSlackConnection(workspace.id);\n      alert(result.message);\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to test Slack connection');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  const handleUpdateSettings = async (settings: UpdateSlackSettingsRequest) => {\n    if (!workspace) return;\n\n    try {\n      await integrationsService.updateSlackSettings(workspace.id, settings);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to update settings');\n    }\n  };\n\n  return (\n    <div className={styles.panel}>\n      <div className={styles.header}>\n        <div>\n          <h2 className={styles.title}>💬 Slack Integration</h2>\n          <p className={styles.description}>\n            Send automated notifications to Slack channels for course updates\n          </p>\n        </div>\n      </div>\n\n      {!workspace ? (\n        <div className={styles.connectSection}>\n          <button className={styles.connectButton} onClick={handleConnect}>\n            <span className={styles.slackIcon}>💬</span>\n            Add to Slack\n          </button>\n          <p className={styles.connectHint}>\n            Connect your Slack workspace to receive course notifications\n          </p>\n        </div>\n      ) : (\n        <div className={styles.workspaceCard}>\n          <div className={styles.workspaceHeader}>\n            <div>\n              <h3 className={styles.workspaceName}>\n                {workspace.workspace_name || 'Slack Workspace'}\n              </h3>\n              {workspace.workspace_domain && (\n                <p className={styles.workspaceDomain}>{workspace.workspace_domain}.slack.com</p>\n              )}\n            </div>\n            <IntegrationStatusBadge\n              status={workspace.is_active ? 'connected' : 'disconnected'}\n              lastSync={workspace.last_activity_at}\n            />\n          </div>\n\n          {/* Notification settings */}\n          <div className={styles.settings}>\n            <h4 className={styles.settingsTitle}>Notification Settings</h4>\n            <label className={styles.settingRow}>\n              <input\n                type=\"checkbox\"\n                checked={workspace.enable_notifications}\n                onChange={(e) => handleUpdateSettings({ enable_notifications: e.target.checked })}\n              />\n              <span>Enable notifications</span>\n            </label>\n            <label className={styles.settingRow}>\n              <input\n                type=\"checkbox\"\n                checked={workspace.enable_commands}\n                onChange={(e) => handleUpdateSettings({ enable_commands: e.target.checked })}\n              />\n              <span>Enable slash commands</span>\n            </label>\n            <label className={styles.settingRow}>\n              <input\n                type=\"checkbox\"\n                checked={workspace.enable_ai_assistant}\n                onChange={(e) => handleUpdateSettings({ enable_ai_assistant: e.target.checked })}\n              />\n              <span>Enable AI assistant</span>\n            </label>\n          </div>\n\n          {/* Default channels */}\n          <div className={styles.channels}>\n            <h4 className={styles.settingsTitle}>Default Channels</h4>\n            <div className={styles.channelRow}>\n              <label>Announcements Channel:</label>\n              <input\n                type=\"text\"\n                className={styles.channelInput}\n                placeholder=\"#announcements\"\n                value={workspace.default_announcements_channel || ''}\n                onChange={(e) => handleUpdateSettings({ default_announcements_channel: e.target.value })}\n              />\n            </div>\n            <div className={styles.channelRow}>\n              <label>Alerts Channel:</label>\n              <input\n                type=\"text\"\n                className={styles.channelInput}\n                placeholder=\"#alerts\"\n                value={workspace.default_alerts_channel || ''}\n                onChange={(e) => handleUpdateSettings({ default_alerts_channel: e.target.value })}\n              />\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className={styles.actions}>\n            <button\n              className={styles.testButton}\n              onClick={handleTestConnection}\n              disabled={testing}\n            >\n              {testing ? 'Testing...' : 'Test Connection'}\n            </button>\n            <button className={styles.disconnectButton} onClick={handleDisconnect}>\n              Disconnect\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      <div className={styles.instructions}>\n        <h4 className={styles.instructionsTitle}>Slack Integration Features</h4>\n        <ul>\n          <li>📢 Automatic notifications for course announcements</li>\n          <li>⏰ Deadline reminders sent to designated channels</li>\n          <li>📊 Grade release notifications (optional)</li>\n          <li>🆕 New content availability alerts</li>\n          <li>💬 Discussion reply notifications</li>\n          <li>🤖 AI assistant for course questions (beta)</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default SlackIntegrationPanel;\n","/**\n * WebhookManager Component\n *\n * What: Outbound and inbound webhook configuration management\n * Where: Used in IntegrationsSettings for webhook integrations\n * Why: Enables event notifications to external services (Zapier, custom apps)\n *\n * BUSINESS CONTEXT:\n * Webhooks enable real-time event streaming to external systems for:\n * - Custom reporting and analytics\n * - Integration with HR systems\n * - Zapier workflows and automations\n * - Third-party notification services\n * - Custom business logic triggers\n *\n * @module features/integrations/components/WebhookManager\n */\n\nimport React, { useState } from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type {\n  OutboundWebhook,\n  InboundWebhook,\n  CreateOutboundWebhookRequest,\n} from '../../../services/integrationsService';\nimport IntegrationStatusBadge from './IntegrationStatusBadge';\nimport styles from './WebhookManager.module.css';\n\nexport interface WebhookManagerProps {\n  organizationId: string;\n  outboundWebhooks: OutboundWebhook[];\n  inboundWebhooks: InboundWebhook[];\n  onRefresh: () => void;\n}\n\nexport const WebhookManager: React.FC<WebhookManagerProps> = ({\n  organizationId,\n  outboundWebhooks,\n  inboundWebhooks,\n  onRefresh,\n}) => {\n  const [activeTab, setActiveTab] = useState<'outbound' | 'inbound'>('outbound');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [formData, setFormData] = useState<CreateOutboundWebhookRequest>({\n    name: '',\n    target_url: '',\n    auth_type: 'none',\n    event_types: [],\n  });\n\n  const handleCreateOutbound = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      await integrationsService.createOutboundWebhook(organizationId, formData);\n      setShowAddForm(false);\n      setFormData({ name: '', target_url: '', auth_type: 'none', event_types: [] });\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to create webhook');\n    }\n  };\n\n  const handleTestWebhook = async (webhookId: string) => {\n    try {\n      const result = await integrationsService.testOutboundWebhook(webhookId);\n      alert(result.success ? `Success! Status: ${result.status_code}` : `Failed: ${result.message}`);\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to test webhook');\n    }\n  };\n\n  const handleDeleteWebhook = async (webhookId: string) => {\n    if (!window.confirm('Delete this webhook?')) return;\n\n    try {\n      await integrationsService.deleteOutboundWebhook(webhookId);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to delete webhook');\n    }\n  };\n\n  return (\n    <div className={styles.panel}>\n      <div className={styles.header}>\n        <div>\n          <h2 className={styles.title}>🔗 Webhooks</h2>\n          <p className={styles.description}>\n            Send and receive events to/from external services\n          </p>\n        </div>\n        {activeTab === 'outbound' && (\n          <button\n            className={styles.addButton}\n            onClick={() => setShowAddForm(!showAddForm)}\n          >\n            {showAddForm ? 'Cancel' : '+ Add Webhook'}\n          </button>\n        )}\n      </div>\n\n      {/* Tabs */}\n      <div className={styles.tabs}>\n        <button\n          className={`${styles.tab} ${activeTab === 'outbound' ? styles.active : ''}`}\n          onClick={() => setActiveTab('outbound')}\n        >\n          Outbound ({outboundWebhooks.length})\n        </button>\n        <button\n          className={`${styles.tab} ${activeTab === 'inbound' ? styles.active : ''}`}\n          onClick={() => setActiveTab('inbound')}\n        >\n          Inbound ({inboundWebhooks.length})\n        </button>\n      </div>\n\n      {/* Add webhook form */}\n      {showAddForm && activeTab === 'outbound' && (\n        <form onSubmit={handleCreateOutbound} className={styles.form}>\n          <div className={styles.formGroup}>\n            <label>Webhook Name *</label>\n            <input\n              type=\"text\"\n              className={styles.input}\n              placeholder=\"e.g., Zapier Enrollment Sync\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              required\n            />\n          </div>\n          <div className={styles.formGroup}>\n            <label>Target URL *</label>\n            <input\n              type=\"url\"\n              className={styles.input}\n              placeholder=\"https://hooks.zapier.com/...\"\n              value={formData.target_url}\n              onChange={(e) => setFormData({ ...formData, target_url: e.target.value })}\n              required\n            />\n          </div>\n          <div className={styles.formGroup}>\n            <label>Authentication Type</label>\n            <select\n              className={styles.select}\n              value={formData.auth_type}\n              onChange={(e) =>\n                setFormData({ ...formData, auth_type: e.target.value as any })\n              }\n            >\n              <option value=\"none\">None</option>\n              <option value=\"bearer\">Bearer Token</option>\n              <option value=\"basic\">Basic Auth</option>\n              <option value=\"hmac\">HMAC Signature</option>\n              <option value=\"api_key\">API Key</option>\n            </select>\n          </div>\n          <div className={styles.formActions}>\n            <button type=\"button\" className={styles.cancelButton} onClick={() => setShowAddForm(false)}>\n              Cancel\n            </button>\n            <button type=\"submit\" className={styles.submitButton}>\n              Create Webhook\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Outbound webhooks */}\n      {activeTab === 'outbound' && (\n        <div className={styles.webhookList}>\n          {outboundWebhooks.length === 0 ? (\n            <div className={styles.emptyState}>\n              <p>No outbound webhooks configured</p>\n            </div>\n          ) : (\n            outboundWebhooks.map((webhook) => (\n              <div key={webhook.id} className={styles.webhookCard}>\n                <div className={styles.webhookHeader}>\n                  <div>\n                    <h3 className={styles.webhookName}>{webhook.name}</h3>\n                    <p className={styles.webhookUrl}>{webhook.target_url}</p>\n                  </div>\n                  <IntegrationStatusBadge\n                    status={webhook.is_active ? 'connected' : 'disconnected'}\n                    lastSync={webhook.last_triggered_at}\n                  />\n                </div>\n                <div className={styles.webhookStats}>\n                  <span>Success: {webhook.success_count}</span>\n                  <span>Failed: {webhook.failure_count}</span>\n                  <span>Auth: {webhook.auth_type}</span>\n                </div>\n                <div className={styles.webhookActions}>\n                  <button\n                    className={styles.testButton}\n                    onClick={() => handleTestWebhook(webhook.id)}\n                  >\n                    Test\n                  </button>\n                  <button\n                    className={styles.deleteButton}\n                    onClick={() => handleDeleteWebhook(webhook.id)}\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      )}\n\n      {/* Inbound webhooks */}\n      {activeTab === 'inbound' && (\n        <div className={styles.webhookList}>\n          {inboundWebhooks.length === 0 ? (\n            <div className={styles.emptyState}>\n              <p>No inbound webhooks configured</p>\n            </div>\n          ) : (\n            inboundWebhooks.map((webhook) => (\n              <div key={webhook.id} className={styles.webhookCard}>\n                <div className={styles.webhookHeader}>\n                  <div>\n                    <h3 className={styles.webhookName}>{webhook.name}</h3>\n                    <code className={styles.webhookToken}>\n                      {window.location.origin}/webhooks/{webhook.webhook_token}\n                    </code>\n                  </div>\n                  <IntegrationStatusBadge\n                    status={webhook.is_active ? 'connected' : 'disconnected'}\n                    lastSync={webhook.last_received_at}\n                  />\n                </div>\n                <div className={styles.webhookStats}>\n                  <span>Received: {webhook.total_received}</span>\n                  <span>Processed: {webhook.total_processed}</span>\n                  <span>Failed: {webhook.total_failed}</span>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WebhookManager;\n","/**\n * OAuthConnectionsPanel Component\n *\n * What: OAuth token management and third-party service connections\n * Where: Used in IntegrationsSettings for OAuth provider management\n * Why: Displays and manages OAuth tokens for Google, Microsoft, Slack, GitHub, Zoom\n *\n * BUSINESS CONTEXT:\n * OAuth connections enable seamless integration with third-party services.\n * Users can view connection status, refresh expired tokens, and revoke access.\n * Supports both user-level and organization-level OAuth tokens.\n *\n * @module features/integrations/components/OAuthConnectionsPanel\n */\n\nimport React from 'react';\nimport { integrationsService } from '../../../services/integrationsService';\nimport type { OAuthToken } from '../../../services/integrationsService';\nimport IntegrationStatusBadge from './IntegrationStatusBadge';\nimport styles from './OAuthConnectionsPanel.module.css';\n\nexport interface OAuthConnectionsPanelProps {\n  userId?: string;\n  organizationId?: string;\n  tokens: OAuthToken[];\n  onRefresh: () => void;\n}\n\n/**\n * Provider configuration with display info\n */\nconst PROVIDERS = [\n  { id: 'google', name: 'Google', icon: '🔵', color: '#4285F4' },\n  { id: 'microsoft', name: 'Microsoft', icon: '🟦', color: '#00A4EF' },\n  { id: 'slack', name: 'Slack', icon: '💬', color: '#4A154B' },\n  { id: 'github', name: 'GitHub', icon: '🐙', color: '#181717' },\n  { id: 'zoom', name: 'Zoom', icon: '🎥', color: '#2D8CFF' },\n] as const;\n\nexport const OAuthConnectionsPanel: React.FC<OAuthConnectionsPanelProps> = ({\n  userId,\n  organizationId,\n  tokens,\n  onRefresh,\n}) => {\n  /**\n   * Handle OAuth connection\n   */\n  const handleConnect = (provider: 'google' | 'microsoft' | 'slack' | 'github' | 'zoom') => {\n    const redirectUri = `${window.location.origin}/integrations/oauth/callback`;\n    const scopesMap = {\n      google: ['profile', 'email', 'openid'],\n      microsoft: ['User.Read', 'Calendars.ReadWrite'],\n      slack: ['identity.basic'],\n      github: ['read:user'],\n      zoom: ['user:read'],\n    };\n\n    integrationsService.initiateOAuthFlow(\n      provider,\n      scopesMap[provider],\n      redirectUri\n    );\n  };\n\n  /**\n   * Handle token revocation\n   */\n  const handleRevoke = async (tokenId: string, providerName: string) => {\n    if (!window.confirm(`Revoke ${providerName} connection?`)) return;\n\n    try {\n      await integrationsService.revokeOAuthToken(tokenId);\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to revoke connection');\n    }\n  };\n\n  /**\n   * Handle token refresh\n   */\n  const handleRefresh = async (tokenId: string) => {\n    try {\n      await integrationsService.refreshOAuthToken(tokenId);\n      alert('Token refreshed successfully');\n      onRefresh();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to refresh token');\n    }\n  };\n\n  /**\n   * Get token for provider\n   */\n  const getTokenForProvider = (\n    providerId: string\n  ): OAuthToken | undefined => {\n    return tokens.find((t) => t.provider === providerId);\n  };\n\n  /**\n   * Check if token is expired\n   */\n  const isTokenExpired = (token: OAuthToken): boolean => {\n    if (!token.expires_at) return false;\n    return new Date(token.expires_at) < new Date();\n  };\n\n  /**\n   * Format token expiration\n   */\n  const formatExpiration = (expiresAt: string | undefined): string => {\n    if (!expiresAt) return 'Never expires';\n\n    const date = new Date(expiresAt);\n    const now = new Date();\n    const diffMs = date.getTime() - now.getTime();\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMs < 0) return 'Expired';\n    if (diffDays === 0) return 'Expires today';\n    if (diffDays === 1) return 'Expires tomorrow';\n    if (diffDays < 7) return `Expires in ${diffDays} days`;\n\n    return `Expires ${date.toLocaleDateString()}`;\n  };\n\n  return (\n    <div className={styles.panel}>\n      <div className={styles.header}>\n        <div>\n          <h2 className={styles.title}>🔐 OAuth Connections</h2>\n          <p className={styles.description}>\n            Manage connected third-party services and access tokens\n          </p>\n        </div>\n      </div>\n\n      {/* Provider list */}\n      <div className={styles.providerList}>\n        {PROVIDERS.map((provider) => {\n          const token = getTokenForProvider(provider.id);\n          const isExpired = token ? isTokenExpired(token) : false;\n\n          return (\n            <div key={provider.id} className={styles.providerCard}>\n              <div className={styles.providerHeader}>\n                <div className={styles.providerInfo}>\n                  <span className={styles.providerIcon}>{provider.icon}</span>\n                  <div>\n                    <h3 className={styles.providerName}>{provider.name}</h3>\n                    {token && (\n                      <p className={styles.providerDetails}>\n                        {formatExpiration(token.expires_at)}\n                      </p>\n                    )}\n                  </div>\n                </div>\n                {token ? (\n                  <IntegrationStatusBadge\n                    status={\n                      !token.is_valid\n                        ? 'error'\n                        : isExpired\n                        ? 'error'\n                        : 'connected'\n                    }\n                    lastSync={token.last_used_at}\n                    errorMessage={token.last_error || undefined}\n                  />\n                ) : (\n                  <IntegrationStatusBadge status=\"disconnected\" />\n                )}\n              </div>\n\n              {/* Token info */}\n              {token && (\n                <div className={styles.tokenInfo}>\n                  <div className={styles.tokenStats}>\n                    <span>\n                      Scopes: {token.scopes.length > 0 ? token.scopes.join(', ') : 'None'}\n                    </span>\n                    {token.consecutive_failures > 0 && (\n                      <span className={styles.errorBadge}>\n                        {token.consecutive_failures} failed attempt(s)\n                      </span>\n                    )}\n                  </div>\n                  {token.last_error && (\n                    <div className={styles.tokenError}>\n                      <strong>Last Error:</strong> {token.last_error}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className={styles.providerActions}>\n                {!token ? (\n                  <button\n                    className={styles.connectButton}\n                    onClick={() => handleConnect(provider.id as any)}\n                  >\n                    Connect\n                  </button>\n                ) : (\n                  <>\n                    {isExpired && (\n                      <button\n                        className={styles.refreshButton}\n                        onClick={() => handleRefresh(token.id)}\n                      >\n                        Refresh Token\n                      </button>\n                    )}\n                    <button\n                      className={styles.revokeButton}\n                      onClick={() => handleRevoke(token.id, provider.name)}\n                    >\n                      Revoke Access\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Information */}\n      <div className={styles.infoBox}>\n        <h4 className={styles.infoTitle}>About OAuth Connections</h4>\n        <p>\n          OAuth connections allow this platform to access external services on your behalf.\n          Tokens are encrypted and stored securely. You can revoke access at any time.\n        </p>\n        <ul className={styles.infoList}>\n          <li>\n            <strong>Google:</strong> Used for Calendar sync and Google Drive integration\n          </li>\n          <li>\n            <strong>Microsoft:</strong> Used for Outlook Calendar and OneDrive integration\n          </li>\n          <li>\n            <strong>Slack:</strong> Used for workspace notifications and commands\n          </li>\n          <li>\n            <strong>GitHub:</strong> Used for code repository integration and version control\n          </li>\n          <li>\n            <strong>Zoom:</strong> Used for virtual classroom and meeting scheduling\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default OAuthConnectionsPanel;\n","/**\n * IntegrationsSettings Page\n *\n * What: Main integrations management page with tabbed interface\n * Where: Accessible from organization/user settings\n * Why: Central hub for managing all external integrations\n *\n * BUSINESS CONTEXT:\n * Integration management is critical for platform value delivery.\n * This page provides a unified interface for:\n * - LTI 1.3 platform connections (LMS integration)\n * - Calendar synchronization (Google, Outlook)\n * - Slack workspace integration\n * - Webhook management (inbound/outbound)\n * - OAuth token management\n *\n * TECHNICAL IMPLEMENTATION:\n * - Uses useIntegrations hook for data fetching\n * - Tabbed interface for organized integration management\n * - Real-time status indicators for all integrations\n * - Comprehensive error handling and user feedback\n *\n * @module features/integrations/IntegrationsSettings\n */\n\nimport React, { useState } from 'react';\nimport { useIntegrations } from './hooks/useIntegrations';\nimport LTIIntegrationPanel from './components/LTIIntegrationPanel';\nimport CalendarSyncPanel from './components/CalendarSyncPanel';\nimport SlackIntegrationPanel from './components/SlackIntegrationPanel';\nimport WebhookManager from './components/WebhookManager';\nimport OAuthConnectionsPanel from './components/OAuthConnectionsPanel';\nimport styles from './IntegrationsSettings.module.css';\n\nexport interface IntegrationsSettingsProps {\n  /** Organization ID for organization-level integrations */\n  organizationId: string;\n  /** Optional user ID for user-level integrations (calendar, OAuth) */\n  userId?: string;\n}\n\n/**\n * Integration tab types\n */\ntype IntegrationTab = 'lti' | 'calendar' | 'slack' | 'webhooks' | 'oauth';\n\n/**\n * IntegrationsSettings Component\n *\n * WHY THIS APPROACH:\n * - Tabbed interface reduces cognitive load\n * - Each integration type has dedicated panel\n * - Unified data fetching via custom hook\n * - Loading states prevent stale data display\n * - Error boundaries for robust error handling\n */\nexport const IntegrationsSettings: React.FC<IntegrationsSettingsProps> = ({\n  organizationId,\n  userId,\n}) => {\n  const [activeTab, setActiveTab] = useState<IntegrationTab>('lti');\n\n  // Fetch all integration data\n  const {\n    ltiPlatforms,\n    ltiLoading,\n    ltiError,\n    calendars,\n    calendarsLoading,\n    calendarsError,\n    slackWorkspace,\n    slackLoading,\n    slackError,\n    outboundWebhooks,\n    inboundWebhooks,\n    webhooksLoading,\n    webhooksError,\n    oauthTokens,\n    oauthLoading,\n    oauthError,\n    isLoading,\n    hasError,\n    refreshAll,\n    refreshLTI,\n    refreshCalendars,\n    refreshSlack,\n    refreshWebhooks,\n    refreshOAuth,\n  } = useIntegrations(organizationId, userId);\n\n  /**\n   * Tab configuration with metadata\n   */\n  const tabs: Array<{\n    id: IntegrationTab;\n    label: string;\n    icon: string;\n    count?: number;\n    error?: string | null;\n  }> = [\n    {\n      id: 'lti',\n      label: 'LTI Platforms',\n      icon: '🔗',\n      count: ltiPlatforms.length,\n      error: ltiError,\n    },\n    {\n      id: 'calendar',\n      label: 'Calendar Sync',\n      icon: '📅',\n      count: calendars.length,\n      error: calendarsError,\n    },\n    {\n      id: 'slack',\n      label: 'Slack',\n      icon: '💬',\n      count: slackWorkspace ? 1 : 0,\n      error: slackError,\n    },\n    {\n      id: 'webhooks',\n      label: 'Webhooks',\n      icon: '🔗',\n      count: outboundWebhooks.length + inboundWebhooks.length,\n      error: webhooksError,\n    },\n    {\n      id: 'oauth',\n      label: 'OAuth Connections',\n      icon: '🔐',\n      count: oauthTokens.length,\n      error: oauthError,\n    },\n  ];\n\n  /**\n   * Render active tab content\n   */\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'lti':\n        return (\n          <LTIIntegrationPanel\n            organizationId={organizationId}\n            platforms={ltiPlatforms}\n            onRefresh={refreshLTI}\n          />\n        );\n\n      case 'calendar':\n        if (!userId) {\n          return (\n            <div className={styles.errorState}>\n              <p>Calendar sync requires user authentication</p>\n            </div>\n          );\n        }\n        return (\n          <CalendarSyncPanel\n            userId={userId}\n            calendars={calendars}\n            onRefresh={refreshCalendars}\n          />\n        );\n\n      case 'slack':\n        return (\n          <SlackIntegrationPanel\n            organizationId={organizationId}\n            workspace={slackWorkspace}\n            onRefresh={refreshSlack}\n          />\n        );\n\n      case 'webhooks':\n        return (\n          <WebhookManager\n            organizationId={organizationId}\n            outboundWebhooks={outboundWebhooks}\n            inboundWebhooks={inboundWebhooks}\n            onRefresh={refreshWebhooks}\n          />\n        );\n\n      case 'oauth':\n        return (\n          <OAuthConnectionsPanel\n            userId={userId}\n            organizationId={organizationId}\n            tokens={oauthTokens}\n            onRefresh={refreshOAuth}\n          />\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Page header */}\n      <div className={styles.pageHeader}>\n        <div>\n          <h1 className={styles.pageTitle}>Integrations</h1>\n          <p className={styles.pageDescription}>\n            Connect external services and manage integration settings\n          </p>\n        </div>\n        <button\n          className={styles.refreshButton}\n          onClick={refreshAll}\n          disabled={isLoading}\n          title=\"Refresh all integrations\"\n        >\n          {isLoading ? '⟳ Refreshing...' : '⟳ Refresh'}\n        </button>\n      </div>\n\n      {/* Global error message */}\n      {hasError && (\n        <div className={styles.errorBanner}>\n          <strong>⚠️ Some integrations failed to load.</strong>\n          <span>Check individual tabs for details.</span>\n        </div>\n      )}\n\n      {/* Tabs navigation */}\n      <div className={styles.tabs}>\n        {tabs.map((tab) => (\n          <button\n            key={tab.id}\n            className={`${styles.tab} ${activeTab === tab.id ? styles.activeTab : ''} ${\n              tab.error ? styles.errorTab : ''\n            }`}\n            onClick={() => setActiveTab(tab.id)}\n          >\n            <span className={styles.tabIcon}>{tab.icon}</span>\n            <span className={styles.tabLabel}>{tab.label}</span>\n            {tab.count !== undefined && tab.count > 0 && (\n              <span className={styles.tabBadge}>{tab.count}</span>\n            )}\n            {tab.error && (\n              <span className={styles.tabErrorIndicator} title={tab.error}>\n                !\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab content */}\n      <div className={styles.tabContent}>\n        {renderTabContent()}\n      </div>\n    </div>\n  );\n};\n\nexport default IntegrationsSettings;\n"],"names":["IntegrationsService","organizationId","data","apiClient","platformId","contextId","courseId","limit","userId","providerId","startDate","endDate","workspaceId","entityType","entityId","channelId","channelName","webhookId","name","handlerType","description","provider","tokenId","scopes","redirectUri","params","code","state","integrationsService","useIntegrations","setState","useState","fetchLTIPlatforms","useCallback","prev","platforms","error","fetchCalendars","calendars","fetchSlackWorkspace","workspace","fetchWebhooks","outbound","inbound","fetchOAuthTokens","tokens","refreshAll","useEffect","isLoading","hasError","IntegrationStatusBadge","status","lastSync","errorMessage","size","getStatusText","getStatusClass","styles","formatLastSync","date","diffMs","diffMins","diffHours","diffDays","statusText","statusClass","lastSyncText","jsxs","jsx","LTIIntegrationPanel","onRefresh","showAddForm","setShowAddForm","formData","setFormData","formErrors","setFormErrors","submitting","setSubmitting","successMessage","setSuccessMessage","validateForm","errors","handleSubmit","e","handleDeactivate","handleVerify","platform","CalendarSyncPanel","selectedProvider","setSelectedProvider","syncSettings","setSyncSettings","syncing","setSyncing","handleConnect","providerType","handleDisconnect","handleSyncNow","result","c","calendar","SlackIntegrationPanel","testing","setTesting","handleTestConnection","handleUpdateSettings","settings","WebhookManager","outboundWebhooks","inboundWebhooks","activeTab","setActiveTab","handleCreateOutbound","handleTestWebhook","handleDeleteWebhook","webhook","PROVIDERS","OAuthConnectionsPanel","scopesMap","handleRevoke","providerName","handleRefresh","getTokenForProvider","t","isTokenExpired","token","formatExpiration","expiresAt","now","isExpired","Fragment","IntegrationsSettings","ltiPlatforms","ltiError","calendarsError","slackWorkspace","slackError","webhooksError","oauthTokens","oauthError","refreshLTI","refreshCalendars","refreshSlack","refreshWebhooks","refreshOAuth","tabs","renderTabContent","tab"],"mappings":"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"}