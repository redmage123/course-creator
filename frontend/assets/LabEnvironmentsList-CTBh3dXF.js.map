{"version":3,"file":"LabEnvironmentsList-CTBh3dXF.js","sources":["../../src/features/labs/services/labService.ts","../../src/pages/LabEnvironmentsList.tsx"],"sourcesContent":["/**\n * Lab Service API Client\n *\n * Centralized API client for lab management operations\n * Handles communication with lab-manager service (port 8005)\n *\n * @module features/labs/services/labService\n */\n\nimport type { LabSession, LabStatus, LabFile } from '../LabEnvironment';\nimport type { TerminalCommand } from '../components/TerminalEmulator';\nimport type { AIMessage } from '../components/AIAssistant';\nimport type { ResourceUsage } from '../components/ResourceMonitor';\n\nconst LAB_API_BASE = 'https://176.9.99.103:8005/api/v1/labs';\n\n/**\n * Custom error class for lab service errors\n */\nexport class LabServiceError extends Error {\n  constructor(\n    message: string,\n    public statusCode?: number,\n    public detail?: string\n  ) {\n    super(message);\n    this.name = 'LabServiceError';\n  }\n}\n\n/**\n * Handle API response and errors\n */\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({\n      detail: 'An error occurred'\n    }));\n\n    throw new LabServiceError(\n      errorData.detail || `Request failed with status ${response.status}`,\n      response.status,\n      errorData.detail\n    );\n  }\n\n  return response.json();\n}\n\n/**\n * Student Labs List\n * Fetches student-specific lab data with proper data isolation\n */\nexport const studentLabService = {\n  /**\n   * Get all labs for the authenticated student.\n   *\n   * Security Context:\n   * Uses student_id from JWT token to ensure data isolation.\n   * Prevents cross-user data leakage (OWASP A01:2021).\n   *\n   * Business Context:\n   * Returns labs the student has actually interacted with,\n   * fixing the \"Retry Lab\" button appearing for labs never attempted.\n   */\n  async getStudentLabs(studentId: string): Promise<{\n    student_id: string;\n    total_labs: number;\n    labs: Array<{\n      lab_id: string;\n      course_id: string;\n      status: string;\n      created_at: string;\n      last_accessed: string | null;\n      ide_urls: Record<string, string>;\n      container_name: string;\n    }>;\n  }> {\n    const response = await fetch(`${LAB_API_BASE}/student/${studentId}`, {\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' }\n    });\n    return handleResponse(response);\n  }\n};\n\n/**\n * Lab Session Management\n */\nexport const labSessionService = {\n  /**\n   * Check for existing session\n   */\n  async getSession(labId: string, courseId: string): Promise<{ session: LabSession | null }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/session?labId=${labId}&courseId=${courseId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Start a new lab session\n   */\n  async startSession(labId: string, courseId: string): Promise<{ session: LabSession }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/start`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ labId, courseId })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Pause lab session\n   */\n  async pauseSession(sessionId: string): Promise<{ session: LabSession }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/pause`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Resume lab session\n   */\n  async resumeSession(sessionId: string): Promise<{ session: LabSession }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/resume`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Stop lab session\n   */\n  async stopSession(sessionId: string): Promise<void> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/stop`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get resource usage\n   */\n  async getResourceUsage(sessionId: string): Promise<{ resourceUsage: ResourceUsage }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/resources`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\n/**\n * File System Operations\n */\nexport const labFileService = {\n  /**\n   * Get all files in session\n   */\n  async listFiles(sessionId: string): Promise<{ files: LabFile[] }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get specific file\n   */\n  async getFile(sessionId: string, fileId: string): Promise<{ file: LabFile }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files/${fileId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Create new file\n   */\n  async createFile(\n    sessionId: string,\n    name: string,\n    content: string = '',\n    language: string = 'plaintext'\n  ): Promise<{ file: LabFile }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, content, language })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Update file content\n   */\n  async updateFile(\n    sessionId: string,\n    fileId: string,\n    content: string\n  ): Promise<{ file: LabFile }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files/${fileId}`,\n      {\n        method: 'PUT',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Delete file\n   */\n  async deleteFile(sessionId: string, fileId: string): Promise<void> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files/${fileId}`,\n      {\n        method: 'DELETE',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Rename file\n   */\n  async renameFile(\n    sessionId: string,\n    fileId: string,\n    newName: string\n  ): Promise<{ file: LabFile }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/files/${fileId}/rename`,\n      {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: newName })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Create folder\n   */\n  async createFolder(sessionId: string, name: string): Promise<void> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/folders`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name })\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\n/**\n * Terminal Operations\n */\nexport const labTerminalService = {\n  /**\n   * Execute command\n   */\n  async executeCommand(\n    sessionId: string,\n    command: string,\n    shell: string = '/bin/bash'\n  ): Promise<{ output: string; exitCode: number }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/execute`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ command, shell })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get command history\n   */\n  async getHistory(sessionId: string): Promise<{ history: TerminalCommand[] }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/history`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\n/**\n * AI Assistant Operations\n */\nexport const labAIService = {\n  /**\n   * Send message to AI assistant\n   */\n  async sendMessage(\n    sessionId: string,\n    message: string,\n    context?: {\n      file?: string;\n      code?: string;\n      error?: string;\n    }\n  ): Promise<{ response: string; messageId: string }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/ai/chat`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message, context })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get AI chat history\n   */\n  async getChatHistory(sessionId: string): Promise<{ messages: AIMessage[] }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/ai/history`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get code explanation\n   */\n  async explainCode(\n    sessionId: string,\n    code: string,\n    language: string\n  ): Promise<{ explanation: string }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/ai/explain`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ code, language })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get debugging help\n   */\n  async debugError(\n    sessionId: string,\n    error: string,\n    code: string,\n    language: string\n  ): Promise<{ suggestion: string }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/ai/debug`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ error, code, language })\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\n/**\n * Lab Analytics\n */\nexport const labAnalyticsService = {\n  /**\n   * Track lab event\n   */\n  async trackEvent(\n    sessionId: string,\n    eventType: string,\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/analytics/event`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ eventType, metadata })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get lab analytics summary\n   */\n  async getAnalytics(sessionId: string): Promise<{\n    timeSpent: number;\n    filesCreated: number;\n    commandsExecuted: number;\n    errorsEncountered: number;\n  }> {\n    const response = await fetch(\n      `${LAB_API_BASE}/${sessionId}/analytics`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\n/**\n * Unified lab service export\n */\nexport const labService = {\n  student: studentLabService,\n  session: labSessionService,\n  files: labFileService,\n  terminal: labTerminalService,\n  ai: labAIService,\n  analytics: labAnalyticsService\n};\n\nexport default labService;\n","/**\n * Lab Environments List Page\n *\n * BUSINESS CONTEXT:\n * Student feature for viewing and accessing interactive lab environments.\n * Provides hands-on coding practice in sandboxed Docker containers with multiple IDE options.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Lists all available labs from enrolled courses\n * - Shows lab status (available, active, completed)\n * - Provides lab launch functionality\n * - Tracks lab progress and completion\n * - Multi-IDE support (VSCode, JupyterLab, RStudio, Terminal)\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { DashboardLayout } from '../components/templates/DashboardLayout';\nimport { Card } from '../components/atoms/Card';\nimport { Button } from '../components/atoms/Button';\nimport { Heading } from '../components/atoms/Heading';\nimport { Input } from '../components/atoms/Input';\nimport { useAuth } from '../hooks/useAuth';\nimport { studentLabService } from '../features/labs/services/labService';\n\n/**\n * Lab Environment Interface\n * Represents an interactive coding lab environment\n */\ninterface LabEnvironment {\n  id: string;\n  title: string;\n  courseName: string;\n  courseId: string;\n  description: string;\n  difficulty: 'beginner' | 'intermediate' | 'advanced';\n  estimatedTime: number; // minutes\n  technology: string;\n  ideType: 'vscode' | 'jupyter' | 'rstudio' | 'terminal';\n  status: 'available' | 'in-progress' | 'completed';\n  progressPercentage: number;\n  lastAccessedAt?: string;\n  completedAt?: string;\n  containerUrl?: string; // URL to access running container\n  objectives: string[];\n}\n\n/**\n * Mock lab environment data\n * In production, this would come from the Lab Manager Service API (port 8005)\n */\nconst mockLabEnvironments: LabEnvironment[] = [\n  {\n    id: '1',\n    title: 'Python Basics - Variables and Data Types',\n    courseName: 'Introduction to Python Programming',\n    courseId: 'course-1',\n    description: 'Learn Python fundamentals by working with variables, strings, numbers, and basic operations in an interactive environment.',\n    difficulty: 'beginner',\n    estimatedTime: 30,\n    technology: 'Python 3.11',\n    ideType: 'jupyter',\n    status: 'completed',\n    progressPercentage: 100,\n    lastAccessedAt: '2025-10-28',\n    completedAt: '2025-10-28',\n    objectives: [\n      'Create and use variables',\n      'Work with different data types',\n      'Perform basic arithmetic operations',\n      'Use string formatting'\n    ]\n  },\n  {\n    id: '2',\n    title: 'Python Functions and Modules',\n    courseName: 'Introduction to Python Programming',\n    courseId: 'course-1',\n    description: 'Master function definitions, parameters, return values, and importing modules in this hands-on lab.',\n    difficulty: 'beginner',\n    estimatedTime: 45,\n    technology: 'Python 3.11',\n    ideType: 'jupyter',\n    status: 'in-progress',\n    progressPercentage: 60,\n    lastAccessedAt: '2025-11-02',\n    containerUrl: 'https://lab.example.com/containers/student123-lab2',\n    objectives: [\n      'Define and call functions',\n      'Use function parameters and return values',\n      'Import and use standard library modules',\n      'Create custom modules'\n    ]\n  },\n  {\n    id: '3',\n    title: 'Data Structures - Lists and Dictionaries',\n    courseName: 'Introduction to Python Programming',\n    courseId: 'course-1',\n    description: 'Explore Python\\'s powerful built-in data structures through practical exercises.',\n    difficulty: 'intermediate',\n    estimatedTime: 60,\n    technology: 'Python 3.11',\n    ideType: 'vscode',\n    status: 'available',\n    progressPercentage: 0,\n    objectives: [\n      'Create and manipulate lists',\n      'Use list comprehensions',\n      'Work with dictionaries',\n      'Combine data structures'\n    ]\n  },\n  {\n    id: '4',\n    title: 'JavaScript ES6+ Features',\n    courseName: 'Modern JavaScript Development',\n    courseId: 'course-2',\n    description: 'Learn modern JavaScript syntax including arrow functions, destructuring, spread operators, and more.',\n    difficulty: 'intermediate',\n    estimatedTime: 50,\n    technology: 'Node.js 18',\n    ideType: 'vscode',\n    status: 'available',\n    progressPercentage: 0,\n    objectives: [\n      'Use arrow functions',\n      'Apply destructuring syntax',\n      'Work with spread and rest operators',\n      'Understand template literals'\n    ]\n  },\n  {\n    id: '5',\n    title: 'React Components and State',\n    courseName: 'Modern JavaScript Development',\n    courseId: 'course-2',\n    description: 'Build interactive React components and manage state in this practical lab environment.',\n    difficulty: 'advanced',\n    estimatedTime: 90,\n    technology: 'React 18 + TypeScript',\n    ideType: 'vscode',\n    status: 'available',\n    progressPercentage: 0,\n    objectives: [\n      'Create functional components',\n      'Use React hooks (useState, useEffect)',\n      'Handle events',\n      'Manage component state'\n    ]\n  },\n  {\n    id: '6',\n    title: 'Data Analysis with R',\n    courseName: 'Statistical Computing',\n    courseId: 'course-3',\n    description: 'Analyze datasets using R programming language and create visualizations.',\n    difficulty: 'intermediate',\n    estimatedTime: 75,\n    technology: 'R 4.3',\n    ideType: 'rstudio',\n    status: 'available',\n    progressPercentage: 0,\n    objectives: [\n      'Import and clean data',\n      'Perform statistical analysis',\n      'Create visualizations with ggplot2',\n      'Generate reports with R Markdown'\n    ]\n  },\n  {\n    id: '7',\n    title: 'Linux Command Line Basics',\n    courseName: 'DevOps Fundamentals',\n    courseId: 'course-4',\n    description: 'Master essential Linux commands and shell scripting in a real terminal environment.',\n    difficulty: 'beginner',\n    estimatedTime: 40,\n    technology: 'Ubuntu 22.04',\n    ideType: 'terminal',\n    status: 'completed',\n    progressPercentage: 100,\n    lastAccessedAt: '2025-10-25',\n    completedAt: '2025-10-25',\n    objectives: [\n      'Navigate the file system',\n      'Manage files and directories',\n      'Use pipes and redirection',\n      'Write basic shell scripts'\n    ]\n  },\n  {\n    id: '8',\n    title: 'Docker Containers and Images',\n    courseName: 'DevOps Fundamentals',\n    courseId: 'course-4',\n    description: 'Learn Docker fundamentals by building, running, and managing containers.',\n    difficulty: 'advanced',\n    estimatedTime: 120,\n    technology: 'Docker 24',\n    ideType: 'terminal',\n    status: 'available',\n    progressPercentage: 0,\n    objectives: [\n      'Build Docker images',\n      'Run and manage containers',\n      'Work with Docker Compose',\n      'Understand container networking'\n    ]\n  }\n];\n\n/**\n * Lab Environments List Page Component\n *\n * WHY THIS APPROACH:\n * - Comprehensive lab listing with filtering by course and status\n * - Clear visual indicators for lab status and progress\n * - Quick access to resume in-progress labs\n * - IDE type badges help students identify lab environment type\n * - Difficulty and time estimates help with planning\n *\n * SECURITY FIX (v3.3.2):\n * - Now fetches student-specific lab data from API\n * - Prevents cross-user data leakage (OWASP A01:2021)\n * - \"Retry Lab\" buttons only show for labs the student actually completed\n */\nexport const LabEnvironmentsList: React.FC = () => {\n  const { user } = useAuth();\n  const [labs, setLabs] = useState<LabEnvironment[]>(mockLabEnvironments);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'available' | 'in-progress' | 'completed'>('all');\n  const [courseFilter, setCourseFilter] = useState<string>('all');\n  const [difficultyFilter, setDifficultyFilter] = useState<'all' | 'beginner' | 'intermediate' | 'advanced'>('all');\n\n  /**\n   * Fetch student-specific lab data from API.\n   *\n   * SECURITY: This ensures each student only sees their own lab history,\n   * preventing the \"Retry Lab\" button from appearing for labs never attempted.\n   */\n  useEffect(() => {\n    const fetchStudentLabs = async () => {\n      if (!user?.id) {\n        // If no user logged in, show available labs only (all as 'available')\n        setLabs(mockLabEnvironments.map(lab => ({\n          ...lab,\n          status: 'available' as const,\n          progressPercentage: 0,\n          lastAccessedAt: undefined,\n          completedAt: undefined,\n          containerUrl: undefined\n        })));\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        setError(null);\n\n        // Fetch student's actual lab history from API\n        const studentLabData = await studentLabService.getStudentLabs(user.id);\n\n        // Create a map of lab_id -> status from API response\n        const labStatusMap = new Map<string, {\n          status: string;\n          lastAccessedAt: string | null;\n          containerUrl?: string;\n        }>();\n\n        studentLabData.labs.forEach(lab => {\n          // Map API status to frontend status\n          let frontendStatus: 'available' | 'in-progress' | 'completed' = 'available';\n          if (lab.status === 'completed' || lab.status === 'stopped') {\n            frontendStatus = 'completed';\n          } else if (lab.status === 'running' || lab.status === 'paused') {\n            frontendStatus = 'in-progress';\n          }\n\n          labStatusMap.set(lab.lab_id, {\n            status: frontendStatus,\n            lastAccessedAt: lab.last_accessed,\n            containerUrl: lab.ide_urls?.vscode || lab.ide_urls?.jupyter || undefined\n          });\n        });\n\n        // Merge API data with available labs catalog\n        // Only show \"completed\" or \"in-progress\" for labs the student has actually used\n        const mergedLabs = mockLabEnvironments.map(lab => {\n          const studentLabStatus = labStatusMap.get(lab.id);\n\n          if (studentLabStatus) {\n            return {\n              ...lab,\n              status: studentLabStatus.status as LabEnvironment['status'],\n              progressPercentage: studentLabStatus.status === 'completed' ? 100 :\n                                  studentLabStatus.status === 'in-progress' ? 50 : 0,\n              lastAccessedAt: studentLabStatus.lastAccessedAt || undefined,\n              completedAt: studentLabStatus.status === 'completed' ?\n                           studentLabStatus.lastAccessedAt || undefined : undefined,\n              containerUrl: studentLabStatus.containerUrl\n            };\n          }\n\n          // Student has never used this lab - show as available\n          return {\n            ...lab,\n            status: 'available' as const,\n            progressPercentage: 0,\n            lastAccessedAt: undefined,\n            completedAt: undefined,\n            containerUrl: undefined\n          };\n        });\n\n        setLabs(mergedLabs);\n      } catch (err) {\n        console.error('Failed to fetch student labs:', err);\n        setError('Failed to load lab status. Showing available labs.');\n        // On error, show all labs as available (safe default)\n        setLabs(mockLabEnvironments.map(lab => ({\n          ...lab,\n          status: 'available' as const,\n          progressPercentage: 0,\n          lastAccessedAt: undefined,\n          completedAt: undefined,\n          containerUrl: undefined\n        })));\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchStudentLabs();\n  }, [user?.id]);\n\n  /**\n   * Get unique course list for filter dropdown\n   */\n  const uniqueCourses = Array.from(new Set(labs.map(lab => lab.courseName)));\n\n  /**\n   * Filter labs based on search and filters\n   */\n  const filteredLabs = labs.filter(lab => {\n    const matchesSearch = lab.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         lab.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         lab.courseName.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || lab.status === statusFilter;\n    const matchesCourse = courseFilter === 'all' || lab.courseName === courseFilter;\n    const matchesDifficulty = difficultyFilter === 'all' || lab.difficulty === difficultyFilter;\n    return matchesSearch && matchesStatus && matchesCourse && matchesDifficulty;\n  });\n\n  /**\n   * Handle lab launch\n   */\n  const handleLaunchLab = (labId: string) => {\n    // TODO: Implement API call to Lab Manager Service (port 8005) to create/resume lab container\n    console.log('Launching lab:', labId);\n    alert('Lab environment is being prepared. This will open in a new window once ready.');\n  };\n\n  /**\n   * Handle lab resume\n   */\n  const handleResumeLab = (labId: string, containerUrl: string) => {\n    // TODO: Open lab container in new window\n    console.log('Resuming lab:', labId, 'at', containerUrl);\n    window.open(containerUrl, '_blank');\n  };\n\n  /**\n   * Format date for display\n   */\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  /**\n   * Get status badge color\n   */\n  const getStatusColor = (status: LabEnvironment['status']) => {\n    switch (status) {\n      case 'available': return '#3b82f6';\n      case 'in-progress': return '#f59e0b';\n      case 'completed': return '#10b981';\n      default: return '#6b7280';\n    }\n  };\n\n  /**\n   * Get difficulty badge color\n   */\n  const getDifficultyColor = (difficulty: LabEnvironment['difficulty']) => {\n    switch (difficulty) {\n      case 'beginner': return '#10b981';\n      case 'intermediate': return '#f59e0b';\n      case 'advanced': return '#ef4444';\n      default: return '#6b7280';\n    }\n  };\n\n  /**\n   * Get IDE type badge color and icon\n   */\n  const getIdeInfo = (ideType: LabEnvironment['ideType']) => {\n    switch (ideType) {\n      case 'vscode': return { color: '#007acc', icon: 'üíª', label: 'VS Code' };\n      case 'jupyter': return { color: '#f37726', icon: 'üìä', label: 'Jupyter' };\n      case 'rstudio': return { color: '#75aadb', icon: 'üìà', label: 'RStudio' };\n      case 'terminal': return { color: '#2d2d2d', icon: '‚å®Ô∏è', label: 'Terminal' };\n      default: return { color: '#6b7280', icon: 'üíª', label: 'IDE' };\n    }\n  };\n\n  /**\n   * Summary statistics\n   */\n  const stats = {\n    total: labs.length,\n    available: labs.filter(l => l.status === 'available').length,\n    inProgress: labs.filter(l => l.status === 'in-progress').length,\n    completed: labs.filter(l => l.status === 'completed').length\n  };\n\n  return (\n    <DashboardLayout>\n      <main style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: '2rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '1rem' }}>\n          <div>\n            <Heading level=\"h1\" gutterBottom={true}>\n              Lab Environments\n            </Heading>\n            <p style={{ color: '#666', fontSize: '0.95rem' }}>\n              Interactive coding environments for hands-on practice\n            </p>\n          </div>\n          <Link to=\"/dashboard/student\">\n            <Button variant=\"secondary\">\n              Back to Dashboard\n            </Button>\n          </Link>\n        </div>\n\n        {/* Loading State */}\n        {isLoading && (\n          <Card variant=\"outlined\" padding=\"large\" style={{ marginBottom: '1.5rem', textAlign: 'center' }}>\n            <p style={{ margin: 0, color: '#666' }}>Loading lab environments...</p>\n          </Card>\n        )}\n\n        {/* Error State */}\n        {error && (\n          <Card variant=\"outlined\" padding=\"medium\" style={{ marginBottom: '1.5rem', backgroundColor: '#fef3c7', borderColor: '#f59e0b' }}>\n            <p style={{ margin: 0, color: '#92400e' }}>‚ö†Ô∏è {error}</p>\n          </Card>\n        )}\n\n        {/* Summary Stats */}\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginBottom: '1.5rem' }}>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <p style={{ margin: 0, fontSize: '0.85rem', color: '#666' }}>Total Labs</p>\n            <p style={{ margin: '0.5rem 0 0', fontSize: '2rem', fontWeight: 'bold', color: '#1f2937' }}>\n              {stats.total}\n            </p>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <p style={{ margin: 0, fontSize: '0.85rem', color: '#666' }}>Available</p>\n            <p style={{ margin: '0.5rem 0 0', fontSize: '2rem', fontWeight: 'bold', color: '#3b82f6' }}>\n              {stats.available}\n            </p>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <p style={{ margin: 0, fontSize: '0.85rem', color: '#666' }}>In Progress</p>\n            <p style={{ margin: '0.5rem 0 0', fontSize: '2rem', fontWeight: 'bold', color: '#f59e0b' }}>\n              {stats.inProgress}\n            </p>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <p style={{ margin: 0, fontSize: '0.85rem', color: '#666' }}>Completed</p>\n            <p style={{ margin: '0.5rem 0 0', fontSize: '2rem', fontWeight: 'bold', color: '#10b981' }}>\n              {stats.completed}\n            </p>\n          </Card>\n        </div>\n\n        {/* Filters */}\n        <Card variant=\"outlined\" padding=\"large\" style={{ marginBottom: '1.5rem' }}>\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\n            <div>\n              <Input\n                id=\"search\"\n                name=\"search\"\n                type=\"text\"\n                placeholder=\"Search labs...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n              />\n            </div>\n            <div>\n              <select\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value as any)}\n                style={{\n                  width: '100%',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              >\n                <option value=\"all\">All Statuses</option>\n                <option value=\"available\">Available</option>\n                <option value=\"in-progress\">In Progress</option>\n                <option value=\"completed\">Completed</option>\n              </select>\n            </div>\n            <div>\n              <select\n                value={courseFilter}\n                onChange={(e) => setCourseFilter(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              >\n                <option value=\"all\">All Courses</option>\n                {uniqueCourses.map(course => (\n                  <option key={course} value={course}>{course}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <select\n                value={difficultyFilter}\n                onChange={(e) => setDifficultyFilter(e.target.value as any)}\n                style={{\n                  width: '100%',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              >\n                <option value=\"all\">All Difficulties</option>\n                <option value=\"beginner\">Beginner</option>\n                <option value=\"intermediate\">Intermediate</option>\n                <option value=\"advanced\">Advanced</option>\n              </select>\n            </div>\n          </div>\n        </Card>\n\n        {/* Labs Grid */}\n        {filteredLabs.length === 0 ? (\n          <Card variant=\"outlined\" padding=\"large\">\n            <div style={{ textAlign: 'center' }}>\n              <p style={{ fontSize: '1.1rem', color: '#666', marginBottom: '1rem' }}>\n                {searchQuery || statusFilter !== 'all' || courseFilter !== 'all' || difficultyFilter !== 'all'\n                  ? 'No labs match your filters'\n                  : 'No lab environments available yet'}\n              </p>\n              <Link to=\"/dashboard/student\">\n                <Button variant=\"primary\">\n                  Go to Dashboard\n                </Button>\n              </Link>\n            </div>\n          </Card>\n        ) : (\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))', gap: '1.5rem' }}>\n            {filteredLabs.map((lab) => {\n              const ideInfo = getIdeInfo(lab.ideType);\n              return (\n                <Card key={lab.id} variant=\"elevated\" padding=\"large\">\n                  {/* Lab Header */}\n                  <div style={{ marginBottom: '1rem' }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '0.5rem' }}>\n                      <Heading level=\"h3\" style={{ fontSize: '1.1rem', margin: 0 }}>\n                        {lab.title}\n                      </Heading>\n                      <span style={{\n                        display: 'inline-block',\n                        padding: '0.25rem 0.75rem',\n                        borderRadius: '9999px',\n                        fontSize: '0.75rem',\n                        fontWeight: 600,\n                        textTransform: 'capitalize',\n                        backgroundColor: `${getStatusColor(lab.status)}20`,\n                        color: getStatusColor(lab.status),\n                        whiteSpace: 'nowrap'\n                      }}>\n                        {lab.status === 'in-progress' ? 'In Progress' : lab.status}\n                      </span>\n                    </div>\n                    <p style={{ margin: '0.25rem 0', fontSize: '0.875rem', color: '#6b7280' }}>\n                      {lab.courseName}\n                    </p>\n                  </div>\n\n                  {/* Lab Description */}\n                  <p style={{ fontSize: '0.875rem', color: '#374151', lineHeight: '1.5', marginBottom: '1rem' }}>\n                    {lab.description}\n                  </p>\n\n                  {/* Lab Metadata */}\n                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem', marginBottom: '1rem' }}>\n                    <span style={{\n                      display: 'inline-flex',\n                      alignItems: 'center',\n                      gap: '0.25rem',\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '9999px',\n                      fontSize: '0.75rem',\n                      fontWeight: 600,\n                      backgroundColor: `${ideInfo.color}20`,\n                      color: ideInfo.color\n                    }}>\n                      {ideInfo.icon} {ideInfo.label}\n                    </span>\n                    <span style={{\n                      display: 'inline-block',\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '9999px',\n                      fontSize: '0.75rem',\n                      fontWeight: 600,\n                      textTransform: 'capitalize',\n                      backgroundColor: `${getDifficultyColor(lab.difficulty)}20`,\n                      color: getDifficultyColor(lab.difficulty)\n                    }}>\n                      {lab.difficulty}\n                    </span>\n                    <span style={{\n                      display: 'inline-block',\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '9999px',\n                      fontSize: '0.75rem',\n                      fontWeight: 600,\n                      backgroundColor: '#e5e7eb',\n                      color: '#374151'\n                    }}>\n                      ‚è±Ô∏è {lab.estimatedTime} min\n                    </span>\n                    <span style={{\n                      display: 'inline-block',\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '9999px',\n                      fontSize: '0.75rem',\n                      fontWeight: 600,\n                      backgroundColor: '#e5e7eb',\n                      color: '#374151'\n                    }}>\n                      {lab.technology}\n                    </span>\n                  </div>\n\n                  {/* Progress Bar (for in-progress and completed labs) */}\n                  {lab.status !== 'available' && (\n                    <div style={{ marginBottom: '1rem' }}>\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\n                        <span style={{ fontSize: '0.875rem', color: '#6b7280' }}>Progress</span>\n                        <span style={{ fontSize: '0.875rem', fontWeight: 600, color: '#1f2937' }}>\n                          {lab.progressPercentage}%\n                        </span>\n                      </div>\n                      <div style={{\n                        width: '100%',\n                        height: '8px',\n                        backgroundColor: '#e5e7eb',\n                        borderRadius: '9999px',\n                        overflow: 'hidden'\n                      }}>\n                        <div style={{\n                          width: `${lab.progressPercentage}%`,\n                          height: '100%',\n                          backgroundColor: getStatusColor(lab.status),\n                          borderRadius: '9999px',\n                          transition: 'width 0.3s ease'\n                        }} />\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Learning Objectives */}\n                  <div style={{ marginBottom: '1rem' }}>\n                    <p style={{ fontSize: '0.875rem', fontWeight: 600, color: '#374151', marginBottom: '0.5rem' }}>\n                      Learning Objectives:\n                    </p>\n                    <ul style={{ margin: 0, paddingLeft: '1.5rem', fontSize: '0.875rem', color: '#6b7280', lineHeight: '1.6' }}>\n                      {lab.objectives.slice(0, 3).map((objective, index) => (\n                        <li key={index}>{objective}</li>\n                      ))}\n                      {lab.objectives.length > 3 && (\n                        <li style={{ color: '#3b82f6' }}>+{lab.objectives.length - 3} more...</li>\n                      )}\n                    </ul>\n                  </div>\n\n                  {/* Last Accessed / Completed Info */}\n                  {(lab.lastAccessedAt || lab.completedAt) && (\n                    <p style={{ fontSize: '0.75rem', color: '#9ca3af', marginBottom: '1rem' }}>\n                      {lab.completedAt && `‚úÖ Completed on ${formatDate(lab.completedAt)}`}\n                      {!lab.completedAt && lab.lastAccessedAt && `Last accessed on ${formatDate(lab.lastAccessedAt)}`}\n                    </p>\n                  )}\n\n                  {/* Action Button */}\n                  <div style={{ display: 'flex', gap: '0.5rem' }}>\n                    {lab.status === 'available' && (\n                      <Button\n                        variant=\"primary\"\n                        fullWidth={true}\n                        onClick={() => handleLaunchLab(lab.id)}\n                      >\n                        üöÄ Start Lab\n                      </Button>\n                    )}\n                    {lab.status === 'in-progress' && lab.containerUrl && (\n                      <>\n                        <Button\n                          variant=\"primary\"\n                          fullWidth={true}\n                          onClick={() => handleResumeLab(lab.id, lab.containerUrl!)}\n                        >\n                          ‚ñ∂Ô∏è Resume Lab\n                        </Button>\n                      </>\n                    )}\n                    {lab.status === 'completed' && (\n                      <Button\n                        variant=\"secondary\"\n                        fullWidth={true}\n                        onClick={() => handleLaunchLab(lab.id)}\n                      >\n                        üîÑ Retry Lab\n                      </Button>\n                    )}\n                  </div>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Info Card */}\n        <Card variant=\"outlined\" padding=\"large\" style={{ marginTop: '2rem', backgroundColor: '#f0f9ff', border: '1px solid #bae6fd' }}>\n          <Heading level=\"h3\" style={{ fontSize: '1.1rem', marginBottom: '0.75rem', color: '#0c4a6e' }}>\n            üí° Lab Environment Tips\n          </Heading>\n          <ul style={{ margin: 0, paddingLeft: '1.5rem', fontSize: '0.875rem', color: '#0c4a6e', lineHeight: '1.6' }}>\n            <li>Each lab runs in an isolated Docker container for security</li>\n            <li>Your progress is automatically saved as you work</li>\n            <li>Labs remain active for 2 hours of inactivity before auto-suspension</li>\n            <li>You can resume suspended labs to continue from where you left off</li>\n            <li>Completed labs can be retried to practice and improve your skills</li>\n          </ul>\n        </Card>\n      </main>\n    </DashboardLayout>\n  );\n};\n"],"names":["LAB_API_BASE","LabServiceError","message","statusCode","detail","handleResponse","response","errorData","studentLabService","studentId","mockLabEnvironments","LabEnvironmentsList","user","useAuth","labs","setLabs","useState","isLoading","setIsLoading","error","setError","searchQuery","setSearchQuery","statusFilter","setStatusFilter","courseFilter","setCourseFilter","difficultyFilter","setDifficultyFilter","useEffect","lab","studentLabData","labStatusMap","frontendStatus","mergedLabs","studentLabStatus","err","uniqueCourses","filteredLabs","matchesSearch","matchesStatus","matchesCourse","matchesDifficulty","handleLaunchLab","labId","handleResumeLab","containerUrl","formatDate","dateString","getStatusColor","status","getDifficultyColor","difficulty","getIdeInfo","ideType","stats","l","jsx","DashboardLayout","jsxs","Heading","Link","Button","Card","Input","e","course","ideInfo","objective","index","Fragment"],"mappings":"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"}