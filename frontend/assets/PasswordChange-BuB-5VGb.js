import{j as s}from"./query-vendor-D-Supqfh.js";import{u as q,a as n,L as g}from"./react-vendor-DF6vRnOe.js";import{D as P}from"./DashboardLayout-CaOp3wDO.js";import{u as E,C as k,H as b,B as j,S as T,a as A,b as R}from"./index-DcdZfoXS.js";import{I as p}from"./Input-BNgj3fzd.js";import"./state-vendor-CcNjB5Go.js";const L="_passwordChangeContainer_2hiop_5",z="_passwordChangeCard_2hiop_11",B="_header_2hiop_15",F="_title_2hiop_20",D="_subtitle_2hiop_26",I="_form_2hiop_31",Z="_passwordRequirements_2hiop_37",H="_requirementsTitle_2hiop_45",O="_requirementsList_2hiop_52",U="_met_2hiop_76",G="_submitError_2hiop_85",J="_submitSuccess_2hiop_98",K="_actions_2hiop_111",M="_submitButton_2hiop_121",Q="_footer_2hiop_125",V="_footerText_2hiop_132",r={passwordChangeContainer:L,passwordChangeCard:z,header:B,title:F,subtitle:D,form:I,passwordRequirements:Z,requirementsTitle:H,requirementsList:O,met:U,submitError:G,submitSuccess:J,actions:K,submitButton:M,footer:Q,footerText:V},rs=()=>{const C=q();E();const[e,w]=n.useState({current_password:"",new_password:"",confirm_password:""}),[i,u]=n.useState({}),[c,m]=n.useState(!1),[h,o]=n.useState(null),[_,f]=n.useState(!1),d=a=>{const{name:t,value:S}=a.target;w(l=>({...l,[t]:S})),i[t]&&u(l=>{const x={...l};return delete x[t],x})},N=()=>{const a={};return e.current_password||(a.current_password="Current password is required"),e.new_password?e.new_password.length<8?a.new_password="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e.new_password)||(a.new_password="Password must contain uppercase, lowercase, and number"):a.new_password="New password is required",e.new_password===e.current_password&&(a.new_password="New password must be different from current password"),e.confirm_password?e.new_password!==e.confirm_password&&(a.confirm_password="Passwords do not match"):a.confirm_password="Please confirm your new password",u(a),Object.keys(a).length===0},y=async a=>{if(a.preventDefault(),!N()){o("Please fix the errors above");return}m(!0),o(null),f(!1);try{await R.changePassword({current_password:e.current_password,new_password:e.new_password}),f(!0),w({current_password:"",new_password:"",confirm_password:""}),setTimeout(()=>{C("/dashboard")},2e3)}catch(t){console.error("Password change error:",t),t.response?.status===401?o("Current password is incorrect"):t.response?.data?.detail?o(t.response.data.detail):t.response?.data?.message?o(t.response.data.message):o("Failed to change password. Please try again.")}finally{m(!1)}},v=s.jsx(A,{title:"Change Password",description:"Update your account password securely",keywords:"change password, account security, update password"});return s.jsx(P,{seo:v,children:s.jsx("div",{className:r.passwordChangeContainer,children:s.jsxs(k,{className:r.passwordChangeCard,children:[s.jsxs("div",{className:r.header,children:[s.jsx(b,{level:1,className:r.title,children:"Change Password"}),s.jsx("p",{className:r.subtitle,children:"Update your password to keep your account secure"})]}),s.jsxs("form",{onSubmit:y,className:r.form,children:[s.jsx(p,{label:"Current Password",type:"password",name:"current_password",value:e.current_password,onChange:d,error:i.current_password,required:!0,placeholder:"Enter your current password",autoComplete:"current-password"}),s.jsxs("div",{className:r.passwordRequirements,children:[s.jsx(b,{level:3,className:r.requirementsTitle,children:"New Password Requirements:"}),s.jsxs("ul",{className:r.requirementsList,children:[s.jsxs("li",{className:e.new_password.length>=8?r.met:"",children:[s.jsx("i",{className:e.new_password.length>=8?"fas fa-check-circle":"fas fa-circle"}),"At least 8 characters"]}),s.jsxs("li",{className:/[A-Z]/.test(e.new_password)?r.met:"",children:[s.jsx("i",{className:/[A-Z]/.test(e.new_password)?"fas fa-check-circle":"fas fa-circle"}),"At least one uppercase letter"]}),s.jsxs("li",{className:/[a-z]/.test(e.new_password)?r.met:"",children:[s.jsx("i",{className:/[a-z]/.test(e.new_password)?"fas fa-check-circle":"fas fa-circle"}),"At least one lowercase letter"]}),s.jsxs("li",{className:/\d/.test(e.new_password)?r.met:"",children:[s.jsx("i",{className:/\d/.test(e.new_password)?"fas fa-check-circle":"fas fa-circle"}),"At least one number"]})]})]}),s.jsx(p,{label:"New Password",type:"password",name:"new_password",value:e.new_password,onChange:d,error:i.new_password,required:!0,placeholder:"Enter your new password",autoComplete:"new-password"}),s.jsx(p,{label:"Confirm New Password",type:"password",name:"confirm_password",value:e.confirm_password,onChange:d,error:i.confirm_password,required:!0,placeholder:"Confirm your new password",autoComplete:"new-password"}),h&&s.jsxs("div",{className:r.submitError,children:[s.jsx("i",{className:"fas fa-exclamation-circle"}),h]}),_&&s.jsxs("div",{className:r.submitSuccess,children:[s.jsx("i",{className:"fas fa-check-circle"}),"Password changed successfully! Redirecting to dashboard..."]}),s.jsxs("div",{className:r.actions,children:[s.jsx(j,{type:"submit",variant:"primary",size:"large",disabled:c||_,className:r.submitButton,children:c?s.jsxs(s.Fragment,{children:[s.jsx(T,{size:"small"}),"Changing Password..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-key"}),"Change Password"]})}),s.jsx(g,{to:"/dashboard",children:s.jsx(j,{variant:"secondary",size:"large",disabled:c,children:"Cancel"})})]})]}),s.jsx("div",{className:r.footer,children:s.jsxs("p",{className:r.footerText,children:[s.jsx("i",{className:"fas fa-info-circle"}),"Forgot your password? ",s.jsx(g,{to:"/forgot-password",children:"Reset it here"})]})})]})})})};export{rs as PasswordChange};
//# sourceMappingURL=PasswordChange-BuB-5VGb.js.map
