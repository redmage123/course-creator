import{j as e}from"./query-vendor-D-Supqfh.js";import{u as C,c as M,a as l,L as i}from"./react-vendor-DF6vRnOe.js";import{u as y,B as j}from"./index-CiydOER8.js";const U="_navbar_ixn6k_20",s={navbar:U,"navbar-container":"_navbar-container_ixn6k_35","navbar-logo":"_navbar-logo_ixn6k_50","logo-text":"_logo-text_ixn6k_64","navbar-links":"_navbar-links_ixn6k_76","nav-link":"_nav-link_ixn6k_85","nav-link-active":"_nav-link-active_ixn6k_112","navbar-right":"_navbar-right_ixn6k_139","help-link":"_help-link_ixn6k_147","user-menu-container":"_user-menu-container_ixn6k_176","user-menu-trigger":"_user-menu-trigger_ixn6k_180","user-avatar":"_user-avatar_ixn6k_207","user-avatar-placeholder":"_user-avatar-placeholder_ixn6k_214","user-name":"_user-name_ixn6k_234","dropdown-icon":"_dropdown-icon_ixn6k_244","user-dropdown":"_user-dropdown_ixn6k_254","user-info":"_user-info_ixn6k_287","user-info-name":"_user-info-name_ixn6k_291","user-info-email":"_user-info-email_ixn6k_298","user-info-role":"_user-info-role_ixn6k_305","dropdown-divider":"_dropdown-divider_ixn6k_313","dropdown-item":"_dropdown-item_ixn6k_319","dropdown-item-button":"_dropdown-item-button_ixn6k_339","mobile-menu-toggle":"_mobile-menu-toggle_ixn6k_368","mobile-menu":"_mobile-menu_ixn6k_368","mobile-menu-link":"_mobile-menu-link_ixn6k_409","mobile-menu-link-active":"_mobile-menu-link-active_ixn6k_432"},A=({logo:d="Course Creator",className:h})=>{const{user:a,isAuthenticated:c,logout:v}=y(),N=C(),p=M(),[u,x]=l.useState(!1),[o,t]=l.useState(!1),k=l.useRef(null),g=l.useRef(null);l.useEffect(()=>{const n=r=>{r.key==="Escape"&&(o&&(t(!1),g.current?.focus()),u&&x(!1))};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[o,u]),l.useEffect(()=>{const n=r=>{k.current&&!k.current.contains(r.target)&&t(!1)};if(o)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[o]);const f=l.useMemo(()=>n=>{const r=p.pathname;return r===n?!0:n==="/dashboard"?r.startsWith("/dashboard"):!!(n!=="/"&&r.startsWith(n+"/"))},[p.pathname]),w=()=>{v(),N("/login")},_=(()=>{if(!c||!a)return[];const n=[{to:"/dashboard",label:"Dashboard"}];switch(a.role){case"site_admin":return[...n,{to:"/admin/organizations",label:"Organizations"},{to:"/admin/users",label:"Users"},{to:"/admin/analytics",label:"Analytics"}];case"organization_admin":return[...n,{to:"/organization/members",label:"Members"},{to:"/organization/courses",label:"Courses"},{to:"/organization/analytics",label:"Analytics"}];case"instructor":return[...n,{to:"/courses",label:"My Courses"},{to:"/students",label:"Students"},{to:"/analytics",label:"Analytics"}];case"student":return[...n,{to:"/courses/my-courses",label:"My Courses"},{to:"/labs",label:"Labs"},{to:"/progress",label:"Progress"}];default:return n}})(),b=()=>a?a.firstName&&a.lastName?`${a.firstName} ${a.lastName}`:a.username:"",L=()=>a?a.firstName&&a.lastName?`${a.firstName[0]}${a.lastName[0]}`.toUpperCase():a.username[0].toUpperCase():"?";return e.jsxs("nav",{className:`${s.navbar} ${h||""}`,children:[e.jsxs("div",{className:s["navbar-container"],children:[e.jsx(i,{to:"/",className:s["navbar-logo"],children:typeof d=="string"?e.jsx("span",{className:s["logo-text"],children:d}):d}),c&&_.length>0&&e.jsx("div",{className:s["navbar-links"],children:_.map(n=>{const r=f(n.to);return e.jsx(i,{to:n.to,className:`${s["nav-link"]} ${r?s["nav-link-active"]:""}`,"aria-current":r?"page":void 0,children:n.label},n.to)})}),e.jsx("div",{className:s["navbar-right"],children:c&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:k,className:s["user-menu-container"],children:[e.jsxs("button",{ref:g,className:s["user-menu-trigger"],onClick:()=>t(!o),"aria-label":"User menu","aria-expanded":o,"aria-haspopup":"true",children:[a.avatar?e.jsx("img",{src:a.avatar,alt:b(),className:s["user-avatar"]}):e.jsx("div",{className:s["user-avatar-placeholder"],children:L()}),e.jsx("span",{className:s["user-name"],children:b()}),e.jsx("svg",{className:s["dropdown-icon"],width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),o&&e.jsxs("div",{className:s["user-dropdown"],children:[e.jsxs("div",{className:s["user-info"],children:[e.jsx("div",{className:s["user-info-name"],children:b()}),e.jsx("div",{className:s["user-info-email"],children:a.email}),e.jsx("div",{className:s["user-info-role"],children:a.role.replace("_"," ").toUpperCase()})]}),e.jsx("div",{className:s["dropdown-divider"]}),e.jsx(i,{to:"/settings",className:s["dropdown-item"],onClick:()=>t(!1),children:"Settings"}),e.jsx(i,{to:"/profile",className:s["dropdown-item"],onClick:()=>t(!1),children:"Profile"}),e.jsxs(i,{to:"/bugs/submit",className:s["dropdown-item"],onClick:()=>t(!1),children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M8 2v4M16 2v4M12 14v4M12 14l-3 3m3-3l3 3M9 10h.01M15 10h.01M3 8h18v13a2 2 0 01-2 2H5a2 2 0 01-2-2V8zM5 8V6a2 2 0 012-2h10a2 2 0 012 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Report Bug"]}),e.jsxs("a",{href:"/docs/USER_GUIDE.pdf",download:"Course_Creator_User_Guide.pdf",className:s["dropdown-item"],onClick:()=>t(!1),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"8px",verticalAlign:"middle"},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"User Guide (PDF)"]}),e.jsx("div",{className:s["dropdown-divider"]}),e.jsx("button",{className:s["dropdown-item-button"],onClick:w,children:"Logout"})]})]}),e.jsx("button",{className:s["mobile-menu-toggle"],onClick:()=>x(!u),"aria-label":"Toggle mobile menu","aria-expanded":u,children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:u?e.jsx("path",{d:"M6 18L18 6M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}):e.jsx("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"/docs/USER_GUIDE.pdf",download:"Course_Creator_User_Guide.pdf",className:s["help-link"],title:"Download User Guide",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx(i,{to:"/login",children:e.jsx(j,{variant:"ghost",size:"medium",children:"Login"})}),e.jsx(i,{to:"/register",children:e.jsx(j,{variant:"primary",size:"medium",children:"Sign Up"})})]})})]}),c&&u&&_.length>0&&e.jsx("div",{className:s["mobile-menu"],children:_.map(n=>{const r=f(n.to);return e.jsx(i,{to:n.to,className:`${s["mobile-menu-link"]} ${r?s["mobile-menu-link-active"]:""}`,onClick:()=>x(!1),"aria-current":r?"page":void 0,children:n.label},n.to)})})]})},m={"dashboard-layout":"_dashboard-layout_9ti9k_19","dashboard-container":"_dashboard-container_9ti9k_29","dashboard-main":"_dashboard-main_9ti9k_35","dashboard-with-sidebar":"_dashboard-with-sidebar_9ti9k_46","dashboard-sidebar":"_dashboard-sidebar_9ti9k_53","dashboard-content":"_dashboard-content_9ti9k_70"},R=({children:d,sidebar:h,maxWidth:a="1440px",logo:c,className:v})=>e.jsxs("div",{className:`${m["dashboard-layout"]} ${v||""}`,children:[e.jsx(A,{logo:c}),e.jsx("div",{className:m["dashboard-container"],children:e.jsx("main",{className:m["dashboard-main"],style:{maxWidth:a},children:h?e.jsxs("div",{className:m["dashboard-with-sidebar"],children:[e.jsx("aside",{className:m["dashboard-sidebar"],children:h}),e.jsx("div",{className:m["dashboard-content"],children:d})]}):d})})]});export{R as D};
//# sourceMappingURL=DashboardLayout-BkFlRdd-.js.map
