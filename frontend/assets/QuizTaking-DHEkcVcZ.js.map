{"version":3,"file":"QuizTaking-DHEkcVcZ.js","sources":["../../src/features/quizzes/components/QuizQuestion.tsx","../../src/features/quizzes/components/QuizTimer.tsx","../../src/features/quizzes/components/QuizResults.tsx","../../src/features/quizzes/services/quizService.ts","../../src/features/quizzes/hooks/useQuizSession.ts","../../src/features/quizzes/QuizTaking.tsx"],"sourcesContent":["/**\n * Quiz Question Component\n *\n * Renders individual quiz questions with appropriate input based on question type\n * Supports:\n * - Multiple choice (single/multiple selection)\n * - True/False\n * - Short answer\n * - Essay\n * - Fill in the blank\n *\n * @module features/quizzes/components/QuizQuestion\n */\n\nimport React from 'react';\nimport type { Question, QuestionType } from '../QuizTaking';\nimport styles from './QuizQuestion.module.css';\n\nexport interface QuizQuestionProps {\n  question: Question;\n  questionIndex: number;\n  answer: string;\n  onAnswerChange: (questionIndex: number, answer: string) => void;\n  showCorrectAnswer?: boolean;\n  correctAnswer?: string;\n  isReview?: boolean;\n}\n\nexport const QuizQuestion: React.FC<QuizQuestionProps> = ({\n  question,\n  questionIndex,\n  answer,\n  onAnswerChange,\n  showCorrectAnswer = false,\n  correctAnswer,\n  isReview = false\n}) => {\n  const handleChange = (value: string) => {\n    if (!isReview) {\n      onAnswerChange(questionIndex, value);\n    }\n  };\n\n  const getDifficultyColor = (difficulty: string): string => {\n    switch (difficulty) {\n      case 'easy': return '#4caf50';\n      case 'medium': return '#ff9800';\n      case 'hard': return '#f44336';\n      default: return '#666666';\n    }\n  };\n\n  const renderQuestionInput = () => {\n    switch (question.question_type) {\n      case 'multiple_choice':\n        return (\n          <div className={styles.optionsContainer}>\n            {question.options.map((option, index) => {\n              const isSelected = answer === option;\n              const isCorrect = showCorrectAnswer && option === correctAnswer;\n              const isWrong = showCorrectAnswer && isSelected && option !== correctAnswer;\n\n              return (\n                <label\n                  key={index}\n                  className={`${styles.option} ${\n                    isSelected ? styles.selected : ''\n                  } ${\n                    isCorrect ? styles.correct : ''\n                  } ${\n                    isWrong ? styles.wrong : ''\n                  }`}\n                >\n                  <input\n                    type=\"radio\"\n                    name={`question-${questionIndex}`}\n                    value={option}\n                    checked={isSelected}\n                    onChange={(e) => handleChange(e.target.value)}\n                    disabled={isReview}\n                    className={styles.radioInput}\n                  />\n                  <span className={styles.optionText}>{option}</span>\n                  {isCorrect && <span className={styles.correctBadge}>‚úì Correct</span>}\n                  {isWrong && <span className={styles.wrongBadge}>‚úó Incorrect</span>}\n                </label>\n              );\n            })}\n          </div>\n        );\n\n      case 'true_false':\n        return (\n          <div className={styles.optionsContainer}>\n            {['True', 'False'].map((option) => {\n              const isSelected = answer === option;\n              const isCorrect = showCorrectAnswer && option === correctAnswer;\n              const isWrong = showCorrectAnswer && isSelected && option !== correctAnswer;\n\n              return (\n                <label\n                  key={option}\n                  className={`${styles.option} ${\n                    isSelected ? styles.selected : ''\n                  } ${\n                    isCorrect ? styles.correct : ''\n                  } ${\n                    isWrong ? styles.wrong : ''\n                  }`}\n                >\n                  <input\n                    type=\"radio\"\n                    name={`question-${questionIndex}`}\n                    value={option}\n                    checked={isSelected}\n                    onChange={(e) => handleChange(e.target.value)}\n                    disabled={isReview}\n                    className={styles.radioInput}\n                  />\n                  <span className={styles.optionText}>{option}</span>\n                  {isCorrect && <span className={styles.correctBadge}>‚úì Correct</span>}\n                  {isWrong && <span className={styles.wrongBadge}>‚úó Incorrect</span>}\n                </label>\n              );\n            })}\n          </div>\n        );\n\n      case 'short_answer':\n        return (\n          <div className={styles.textInputContainer}>\n            <input\n              type=\"text\"\n              value={answer}\n              onChange={(e) => handleChange(e.target.value)}\n              placeholder=\"Enter your answer...\"\n              className={styles.textInput}\n              disabled={isReview}\n            />\n            {showCorrectAnswer && correctAnswer && (\n              <div className={styles.correctAnswerDisplay}>\n                <strong>Correct Answer:</strong> {correctAnswer}\n              </div>\n            )}\n          </div>\n        );\n\n      case 'essay':\n        return (\n          <div className={styles.textInputContainer}>\n            <textarea\n              value={answer}\n              onChange={(e) => handleChange(e.target.value)}\n              placeholder=\"Enter your answer... (Be thorough and specific)\"\n              className={styles.textArea}\n              rows={10}\n              disabled={isReview}\n            />\n            {showCorrectAnswer && question.explanation && (\n              <div className={styles.correctAnswerDisplay}>\n                <strong>Sample Answer/Key Points:</strong>\n                <p>{question.explanation}</p>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'fill_in_blank':\n        return (\n          <div className={styles.textInputContainer}>\n            <input\n              type=\"text\"\n              value={answer}\n              onChange={(e) => handleChange(e.target.value)}\n              placeholder=\"Fill in the blank...\"\n              className={styles.textInput}\n              disabled={isReview}\n            />\n            {showCorrectAnswer && correctAnswer && (\n              <div className={styles.correctAnswerDisplay}>\n                <strong>Correct Answer:</strong> {correctAnswer}\n              </div>\n            )}\n          </div>\n        );\n\n      default:\n        return <div>Unsupported question type</div>;\n    }\n  };\n\n  return (\n    <div className={styles.questionContainer}>\n      {/* Question Header */}\n      <div className={styles.questionHeader}>\n        <div className={styles.questionMeta}>\n          <span className={styles.questionNumber}>Question {questionIndex + 1}</span>\n          <span\n            className={styles.difficulty}\n            style={{ color: getDifficultyColor(question.difficulty) }}\n          >\n            {question.difficulty.toUpperCase()}\n          </span>\n          <span className={styles.points}>{question.points} {question.points === 1 ? 'point' : 'points'}</span>\n        </div>\n      </div>\n\n      {/* Question Text */}\n      <div className={styles.questionText}>\n        {question.question_text}\n      </div>\n\n      {/* Question Input */}\n      {renderQuestionInput()}\n\n      {/* Explanation (shown after submission) */}\n      {showCorrectAnswer && question.explanation && question.question_type !== 'essay' && (\n        <div className={styles.explanation}>\n          <strong>Explanation:</strong>\n          <p>{question.explanation}</p>\n        </div>\n      )}\n\n      {/* Tags */}\n      {question.tags && question.tags.length > 0 && (\n        <div className={styles.tags}>\n          {question.tags.map((tag, index) => (\n            <span key={index} className={styles.tag}>{tag}</span>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default QuizQuestion;\n","/**\n * Quiz Timer Component - Countdown timer for timed quizzes\n * @module features/quizzes/components/QuizTimer\n */\n\nimport React, { useEffect, useState } from 'react';\nimport styles from './QuizTimer.module.css';\n\nexport interface QuizTimerProps {\n  timeRemaining: number; // seconds\n  onTimeExpired: () => void;\n}\n\nexport const QuizTimer: React.FC<QuizTimerProps> = ({\n  timeRemaining: initialTime,\n  onTimeExpired\n}) => {\n  const [timeLeft, setTimeLeft] = useState(initialTime);\n\n  useEffect(() => {\n    if (timeLeft <= 0) {\n      onTimeExpired();\n      return;\n    }\n\n    const timer = setInterval(() => {\n      setTimeLeft(prev => Math.max(0, prev - 1));\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [timeLeft, onTimeExpired]);\n\n  const formatTime = (seconds: number): string => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getWarningLevel = (): string => {\n    if (timeLeft <= 60) return styles.critical;\n    if (timeLeft <= 300) return styles.warning;\n    return styles.normal;\n  };\n\n  return (\n    <div className={`${styles.timer} ${getWarningLevel()}`}>\n      <span className={styles.timerIcon}>‚è±Ô∏è</span>\n      <span className={styles.timerText}>{formatTime(timeLeft)}</span>\n      {timeLeft <= 60 && <span className={styles.urgentBadge}>Hurry!</span>}\n    </div>\n  );\n};\n\nexport default QuizTimer;\n","/**\n * Quiz Results Component - Display quiz results and performance\n * @module features/quizzes/components/QuizResults\n */\n\nimport React from 'react';\nimport { Button } from '@/components/atoms/Button';\nimport type { Quiz, QuizAttempt } from '../QuizTaking';\nimport styles from './QuizResults.module.css';\n\nexport interface QuizResultsProps {\n  quiz: Quiz;\n  attempt: QuizAttempt;\n  onRetake?: () => void;\n  onClose: () => void;\n}\n\nexport const QuizResults: React.FC<QuizResultsProps> = ({\n  quiz,\n  attempt,\n  onRetake,\n  onClose\n}) => {\n  if (!attempt.score) return null;\n\n  const { score } = attempt;\n  const isPassed = score.passed;\n  const percentage = Math.round(score.percentage);\n\n  const getPerformanceMessage = (): string => {\n    if (percentage >= 90) return 'Excellent work!';\n    if (percentage >= 80) return 'Great job!';\n    if (percentage >= 70) return 'Good effort!';\n    if (percentage >= 60) return 'Keep practicing!';\n    return 'Review the material and try again.';\n  };\n\n  return (\n    <div className={styles.resultsContainer}>\n      <div className={styles.resultsCard}>\n        <div className={`${styles.resultBanner} ${isPassed ? styles.passed : styles.failed}`}>\n          <span className={styles.resultIcon}>{isPassed ? 'üéâ' : 'üìö'}</span>\n          <h1>{isPassed ? 'Congratulations!' : 'Not Quite There'}</h1>\n          <p className={styles.performanceMessage}>{getPerformanceMessage()}</p>\n        </div>\n\n        <div className={styles.scoreSection}>\n          <div className={styles.mainScore}>\n            <div className={styles.scoreCircle}>\n              <span className={styles.scorePercentage}>{percentage}%</span>\n            </div>\n            <div className={styles.scoreDetails}>\n              <p><strong>{score.earned_points}</strong> / {score.total_points} points</p>\n              <p><strong>{score.correct_count}</strong> / {score.total_questions} correct</p>\n              <p className={isPassed ? styles.passedText : styles.failedText}>\n                {isPassed ? '‚úì Passed' : '‚úó Did not pass'} (Passing: {score.passing_score}%)\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.statsSection}>\n          <div className={styles.statCard}>\n            <span className={styles.statLabel}>Time Spent</span>\n            <span className={styles.statValue}>\n              {Math.floor(attempt.time_spent_seconds / 60)}min {attempt.time_spent_seconds % 60}s\n            </span>\n          </div>\n          <div className={styles.statCard}>\n            <span className={styles.statLabel}>Accuracy</span>\n            <span className={styles.statValue}>{percentage}%</span>\n          </div>\n          <div className={styles.statCard}>\n            <span className={styles.statLabel}>Questions</span>\n            <span className={styles.statValue}>{score.total_questions}</span>\n          </div>\n        </div>\n\n        <div className={styles.actions}>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Close\n          </Button>\n          {onRetake && !isPassed && (\n            <Button variant=\"primary\" onClick={onRetake}>\n              Retake Quiz\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default QuizResults;\n","/**\n * Quiz Service API Client\n *\n * Centralized API client for quiz operations\n * Communicates with content-management (port 8001) and course-management (port 8002) services\n *\n * @module features/quizzes/services/quizService\n */\n\nimport type { Quiz, QuizAttempt } from '../QuizTaking';\n\nconst CONTENT_API_BASE = 'https://176.9.99.103:8001/api/v1';\nconst COURSE_API_BASE = 'https://176.9.99.103:8002/api/v1';\n\n/**\n * Custom error class for quiz service errors\n */\nexport class QuizServiceError extends Error {\n  constructor(\n    message: string,\n    public statusCode?: number,\n    public detail?: string\n  ) {\n    super(message);\n    this.name = 'QuizServiceError';\n  }\n}\n\n/**\n * Handle API response and errors\n */\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({\n      detail: 'An error occurred'\n    }));\n\n    throw new QuizServiceError(\n      errorData.detail || `Request failed with status ${response.status}`,\n      response.status,\n      errorData.detail\n    );\n  }\n\n  return response.json();\n}\n\n/**\n * Quiz Service\n */\nexport const quizService = {\n  /**\n   * Get quiz by ID\n   */\n  async getQuiz(quizId: string): Promise<Quiz> {\n    const response = await fetch(\n      `${CONTENT_API_BASE}/quizzes/${quizId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get all quizzes for a course\n   */\n  async getQuizzesForCourse(courseId: string): Promise<Quiz[]> {\n    const response = await fetch(\n      `${CONTENT_API_BASE}/courses/${courseId}/quizzes`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get active quiz attempt for student\n   */\n  async getActiveAttempt(quizId: string): Promise<QuizAttempt | null> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts/active?quizId=${quizId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n\n    if (response.status === 404) {\n      return null;\n    }\n\n    return handleResponse(response);\n  },\n\n  /**\n   * Start new quiz attempt\n   */\n  async startQuiz(quizId: string): Promise<QuizAttempt> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          quiz_id: quizId,\n          started_at: new Date().toISOString()\n        })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Save answer for a question\n   */\n  async saveAnswer(\n    attemptId: string,\n    questionIndex: number,\n    answer: string\n  ): Promise<void> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts/${attemptId}/answers`,\n      {\n        method: 'PUT',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          question_index: questionIndex,\n          answer\n        })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Submit quiz attempt\n   */\n  async submitQuiz(\n    attemptId: string,\n    answers: Record<number, string>\n  ): Promise<QuizAttempt> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts/${attemptId}/submit`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          answers,\n          submitted_at: new Date().toISOString()\n        })\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get quiz attempts history for student\n   */\n  async getAttemptHistory(quizId: string): Promise<QuizAttempt[]> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts/history?quizId=${quizId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  },\n\n  /**\n   * Get quiz attempt by ID\n   */\n  async getAttempt(attemptId: string): Promise<QuizAttempt> {\n    const response = await fetch(\n      `${COURSE_API_BASE}/quiz-attempts/${attemptId}`,\n      {\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    );\n    return handleResponse(response);\n  }\n};\n\nexport default quizService;\n","/**\n * useQuizSession Hook - Manages quiz session state and operations\n * @module features/quizzes/hooks/useQuizSession\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport type { Quiz, QuizAttempt } from '../QuizTaking';\nimport { quizService } from '../services/quizService';\n\ninterface UseQuizSessionResult {\n  quiz: Quiz | null;\n  attempt: QuizAttempt | null;\n  answers: Record<number, string>;\n  currentQuestionIndex: number;\n  isLoading: boolean;\n  isSubmitting: boolean;\n  error: string | null;\n  startQuiz: () => Promise<void>;\n  saveAnswer: (questionIndex: number, answer: string) => Promise<void>;\n  submitQuiz: () => Promise<QuizAttempt | null>;\n  setCurrentQuestionIndex: (index: number) => void;\n}\n\nexport const useQuizSession = (\n  quizId: string | undefined,\n  courseId: string | undefined\n): UseQuizSessionResult => {\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\n  const [attempt, setAttempt] = useState<QuizAttempt | null>(null);\n  const [answers, setAnswers] = useState<Record<number, string>>({});\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Load quiz and check for existing attempt\n  useEffect(() => {\n    if (!quizId || !courseId) return;\n\n    const loadQuiz = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n\n        // Load quiz\n        const quizData = await quizService.getQuiz(quizId);\n        setQuiz(quizData);\n\n        // Check for existing attempt\n        const existingAttempt = await quizService.getActiveAttempt(quizId);\n        if (existingAttempt) {\n          setAttempt(existingAttempt);\n          setAnswers(existingAttempt.answers || {});\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load quiz');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadQuiz();\n  }, [quizId, courseId]);\n\n  // Start quiz\n  const startQuiz = useCallback(async () => {\n    if (!quizId) return;\n\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      const newAttempt = await quizService.startQuiz(quizId);\n      setAttempt(newAttempt);\n      setAnswers({});\n      setCurrentQuestionIndex(0);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to start quiz');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [quizId]);\n\n  // Save answer\n  const saveAnswer = useCallback(async (questionIndex: number, answer: string) => {\n    if (!attempt) return;\n\n    try {\n      const updatedAnswers = { ...answers, [questionIndex]: answer };\n      setAnswers(updatedAnswers);\n\n      // Auto-save to backend\n      await quizService.saveAnswer(attempt.id, questionIndex, answer);\n    } catch (err) {\n      console.error('Failed to save answer:', err);\n      // Don't throw - allow local save to persist\n    }\n  }, [attempt, answers]);\n\n  // Submit quiz\n  const submitQuiz = useCallback(async (): Promise<QuizAttempt | null> => {\n    if (!attempt) return null;\n\n    try {\n      setIsSubmitting(true);\n      setError(null);\n\n      const submittedAttempt = await quizService.submitQuiz(attempt.id, answers);\n      setAttempt(submittedAttempt);\n      return submittedAttempt;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to submit quiz');\n      throw err;\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [attempt, answers]);\n\n  return {\n    quiz,\n    attempt,\n    answers,\n    currentQuestionIndex,\n    isLoading,\n    isSubmitting,\n    error,\n    startQuiz,\n    saveAnswer,\n    submitQuiz,\n    setCurrentQuestionIndex\n  };\n};\n\nexport default useQuizSession;\n","/**\n * Quiz Taking Component\n *\n * Main quiz interface for students to take assessments\n * Features:\n * - Question navigation\n * - Answer selection and submission\n * - Timer countdown (if timed quiz)\n * - Progress tracking\n * - Auto-save draft answers\n * - Final submission with confirmation\n *\n * @module features/quizzes/QuizTaking\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/atoms/Button';\nimport { QuizQuestion } from './components/QuizQuestion';\nimport { QuizTimer } from './components/QuizTimer';\nimport { QuizResults } from './components/QuizResults';\nimport { useQuizSession } from './hooks/useQuizSession';\nimport styles from './QuizTaking.module.css';\n\nexport interface Quiz {\n  id: string;\n  title: string;\n  description: string;\n  questions: Question[];\n  settings: QuizSettings;\n  passing_score: number;\n  total_points: number;\n  question_count: number;\n  estimated_time_minutes: number;\n  is_timed: boolean;\n  allows_multiple_attempts: boolean;\n}\n\nexport interface Question {\n  question_text: string;\n  question_type: QuestionType;\n  points: number;\n  options: string[];\n  explanation?: string;\n  difficulty: DifficultyLevel;\n  tags: string[];\n}\n\nexport type QuestionType =\n  | 'multiple_choice'\n  | 'true_false'\n  | 'short_answer'\n  | 'essay'\n  | 'matching'\n  | 'fill_in_blank';\n\nexport type DifficultyLevel = 'easy' | 'medium' | 'hard';\n\nexport interface QuizSettings {\n  time_limit_minutes: number | null;\n  attempts_allowed: number;\n  shuffle_questions: boolean;\n  shuffle_options: boolean;\n  show_correct_answers: boolean;\n  show_results_immediately: boolean;\n  require_password: boolean;\n}\n\nexport interface QuizAttempt {\n  id: string;\n  quiz_id: string;\n  student_id: string;\n  answers: Record<number, string>;\n  score: QuizScore | null;\n  started_at: Date;\n  submitted_at: Date | null;\n  time_spent_seconds: number;\n}\n\nexport interface QuizScore {\n  total_points: number;\n  earned_points: number;\n  percentage: number;\n  correct_count: number;\n  total_questions: number;\n  passed: boolean;\n  passing_score: number;\n}\n\nexport const QuizTaking: React.FC = () => {\n  const { quizId, courseId } = useParams<{ quizId: string; courseId: string }>();\n  const navigate = useNavigate();\n\n  // Quiz session management\n  const {\n    quiz,\n    attempt,\n    answers,\n    currentQuestionIndex,\n    isLoading,\n    isSubmitting,\n    error,\n    startQuiz,\n    saveAnswer,\n    submitQuiz,\n    setCurrentQuestionIndex\n  } = useQuizSession(quizId, courseId);\n\n  // Local state\n  const [showResults, setShowResults] = useState(false);\n  const [showSubmitConfirm, setShowSubmitConfirm] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState<number | null>(null);\n\n  // Initialize time remaining\n  useEffect(() => {\n    if (quiz?.is_timed && quiz.settings.time_limit_minutes && attempt) {\n      const startTime = new Date(attempt.started_at).getTime();\n      const now = Date.now();\n      const elapsed = Math.floor((now - startTime) / 1000);\n      const totalSeconds = quiz.settings.time_limit_minutes * 60;\n      const remaining = Math.max(0, totalSeconds - elapsed);\n      setTimeRemaining(remaining);\n    }\n  }, [quiz, attempt]);\n\n  // Handle time expiration\n  const handleTimeExpired = useCallback(async () => {\n    if (!isSubmitting) {\n      await submitQuiz();\n      setShowResults(true);\n    }\n  }, [isSubmitting, submitQuiz]);\n\n  // Handle answer change\n  const handleAnswerChange = useCallback(async (questionIndex: number, answer: string) => {\n    await saveAnswer(questionIndex, answer);\n  }, [saveAnswer]);\n\n  // Handle navigation\n  const handlePrevious = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n    }\n  };\n\n  const handleNext = () => {\n    if (quiz && currentQuestionIndex < quiz.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  };\n\n  // Handle submission\n  const handleSubmit = async () => {\n    setShowSubmitConfirm(false);\n    const result = await submitQuiz();\n    if (result) {\n      setShowResults(true);\n    }\n  };\n\n  // Calculate progress\n  const getProgress = (): number => {\n    if (!quiz) return 0;\n    const answered = Object.keys(answers).length;\n    return (answered / quiz.questions.length) * 100;\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p>Loading quiz...</p>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className={styles.errorContainer}>\n        <h2>Error Loading Quiz</h2>\n        <p>{error}</p>\n        <Button onClick={() => navigate(-1)}>Go Back</Button>\n      </div>\n    );\n  }\n\n  // Quiz not found\n  if (!quiz || !attempt) {\n    return (\n      <div className={styles.errorContainer}>\n        <h2>Quiz Not Found</h2>\n        <Button onClick={() => navigate(-1)}>Go Back</Button>\n      </div>\n    );\n  }\n\n  // Show results if quiz is submitted\n  if (showResults && attempt.score) {\n    return (\n      <QuizResults\n        quiz={quiz}\n        attempt={attempt}\n        onRetake={quiz.allows_multiple_attempts ? () => startQuiz() : undefined}\n        onClose={() => navigate(`/courses/${courseId}`)}\n      />\n    );\n  }\n\n  const currentQuestion = quiz.questions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === quiz.questions.length - 1;\n\n  return (\n    <div className={styles.quizContainer}>\n      {/* Quiz Header */}\n      <div className={styles.quizHeader}>\n        <div className={styles.quizInfo}>\n          <h1>{quiz.title}</h1>\n          {quiz.description && (\n            <p className={styles.quizDescription}>{quiz.description}</p>\n          )}\n        </div>\n\n        {quiz.is_timed && timeRemaining !== null && (\n          <QuizTimer\n            timeRemaining={timeRemaining}\n            onTimeExpired={handleTimeExpired}\n          />\n        )}\n      </div>\n\n      {/* Progress Bar */}\n      <div className={styles.progressSection}>\n        <div className={styles.progressBar}>\n          <div\n            className={styles.progressFill}\n            style={{ width: `${getProgress()}%` }}\n          />\n        </div>\n        <div className={styles.progressText}>\n          <span>{Object.keys(answers).length} of {quiz.questions.length} answered</span>\n          <span>Question {currentQuestionIndex + 1} of {quiz.questions.length}</span>\n        </div>\n      </div>\n\n      {/* Question */}\n      <div className={styles.questionSection}>\n        <QuizQuestion\n          question={currentQuestion}\n          questionIndex={currentQuestionIndex}\n          answer={answers[currentQuestionIndex] || ''}\n          onAnswerChange={handleAnswerChange}\n        />\n      </div>\n\n      {/* Navigation */}\n      <div className={styles.navigationSection}>\n        <Button\n          variant=\"secondary\"\n          onClick={handlePrevious}\n          disabled={currentQuestionIndex === 0}\n        >\n          ‚Üê Previous\n        </Button>\n\n        <div className={styles.navigationCenter}>\n          <span className={styles.questionIndicator}>\n            {currentQuestionIndex + 1} / {quiz.questions.length}\n          </span>\n        </div>\n\n        {!isLastQuestion ? (\n          <Button\n            variant=\"primary\"\n            onClick={handleNext}\n          >\n            Next ‚Üí\n          </Button>\n        ) : (\n          <Button\n            variant=\"primary\"\n            onClick={() => setShowSubmitConfirm(true)}\n            disabled={isSubmitting}\n          >\n            Submit Quiz\n          </Button>\n        )}\n      </div>\n\n      {/* Question Grid Navigation */}\n      <div className={styles.questionGrid}>\n        <h3>Questions</h3>\n        <div className={styles.questionButtons}>\n          {quiz.questions.map((_, index) => (\n            <button\n              key={index}\n              className={`${styles.questionButton} ${\n                index === currentQuestionIndex ? styles.active : ''\n              } ${\n                answers[index] ? styles.answered : ''\n              }`}\n              onClick={() => setCurrentQuestionIndex(index)}\n            >\n              {index + 1}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Submit Confirmation Modal */}\n      {showSubmitConfirm && (\n        <div className={styles.modal}>\n          <div className={styles.modalContent}>\n            <h2>Submit Quiz?</h2>\n            <p>\n              You have answered {Object.keys(answers).length} out of {quiz.questions.length} questions.\n            </p>\n            {Object.keys(answers).length < quiz.questions.length && (\n              <p className={styles.warningText}>\n                ‚ö†Ô∏è Some questions are unanswered. Are you sure you want to submit?\n              </p>\n            )}\n            <div className={styles.modalActions}>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setShowSubmitConfirm(false)}\n              >\n                Cancel\n              </Button>\n              <Button\n                variant=\"primary\"\n                onClick={handleSubmit}\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? 'Submitting...' : 'Yes, Submit'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default QuizTaking;\n"],"names":["QuizQuestion","question","questionIndex","answer","onAnswerChange","showCorrectAnswer","correctAnswer","isReview","handleChange","value","getDifficultyColor","difficulty","renderQuestionInput","jsx","styles","option","index","isSelected","isCorrect","isWrong","jsxs","e","tag","QuizTimer","initialTime","onTimeExpired","timeLeft","setTimeLeft","useState","useEffect","timer","prev","formatTime","seconds","hours","minutes","secs","getWarningLevel","QuizResults","quiz","attempt","onRetake","onClose","score","isPassed","percentage","getPerformanceMessage","Button","CONTENT_API_BASE","COURSE_API_BASE","QuizServiceError","message","statusCode","detail","handleResponse","response","errorData","quizService","quizId","courseId","attemptId","answers","useQuizSession","setQuiz","setAttempt","setAnswers","currentQuestionIndex","setCurrentQuestionIndex","isLoading","setIsLoading","isSubmitting","setIsSubmitting","error","setError","quizData","existingAttempt","err","startQuiz","useCallback","newAttempt","saveAnswer","updatedAnswers","submitQuiz","submittedAttempt","QuizTaking","useParams","navigate","useNavigate","showResults","setShowResults","showSubmitConfirm","setShowSubmitConfirm","timeRemaining","setTimeRemaining","startTime","now","elapsed","totalSeconds","remaining","handleTimeExpired","handleAnswerChange","handlePrevious","handleNext","handleSubmit","getProgress","currentQuestion","isLastQuestion","_"],"mappings":"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"}