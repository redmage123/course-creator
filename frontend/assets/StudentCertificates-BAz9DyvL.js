import{u,j as e}from"./query-vendor-D-Supqfh.js";import{D as g}from"./DashboardLayout-BHNthRTf.js";import{u as C,H as r,S as N,C as n,B as o,a as v}from"./index-DybP5Hyb.js";import{L as _}from"./react-vendor-DF6vRnOe.js";import"./state-vendor-CcNjB5Go.js";const y="_certificatesContainer_6wjxf_5",k="_header_6wjxf_11",B="_pageTitle_6wjxf_18",b="_backLink_6wjxf_24",S="_loadingState_6wjxf_38",I="_errorState_6wjxf_48",L="_noCertificates_6wjxf_63",D="_noCertificatesIcon_6wjxf_68",T="_noCertificatesTitle_6wjxf_74",G="_noCertificatesMessage_6wjxf_81",$="_certificatesGrid_6wjxf_88",A="_certificateCard_6wjxf_93",E="_certificateHeader_6wjxf_104",H="_certificateBadge_6wjxf_111",M="_certificateInfo_6wjxf_124",U="_certificateTitle_6wjxf_128",z="_certificateDate_6wjxf_135",F="_certificateGrade_6wjxf_136",R="_certificateId_6wjxf_150",O="_certificateActions_6wjxf_161",q="_downloadBtn_6wjxf_167",P="_shareBtn_6wjxf_168",Y="_completionBadge_6wjxf_173",a={certificatesContainer:y,header:k,pageTitle:B,backLink:b,loadingState:S,errorState:I,noCertificates:L,noCertificatesIcon:D,noCertificatesTitle:T,noCertificatesMessage:G,certificatesGrid:$,certificateCard:A,certificateHeader:E,certificateBadge:H,certificateInfo:M,certificateTitle:U,certificateDate:z,certificateGrade:F,certificateId:R,certificateActions:O,downloadBtn:q,shareBtn:P,completionBadge:Y},X=()=>{const{user:d}=C(),{data:l=[],isLoading:m,error:x}=u({queryKey:["certificates",d?.id],queryFn:async()=>[],enabled:!!d?.id}),h=async t=>{if(t.pdf_url)window.open(t.pdf_url,"_blank");else try{const i=await fetch(`/api/v1/certificates/${t.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(i.ok){const c=await i.blob(),f=window.URL.createObjectURL(c),s=document.createElement("a");s.href=f,s.download=`certificate-${t.certificate_id}.pdf`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(f),document.body.removeChild(s)}}catch(i){console.error("Failed to download certificate:",i),alert("Failed to download certificate. Please try again.")}},j=t=>{const i=t.share_url||`${window.location.origin}/certificates/verify/${t.certificate_id}`;navigator.share?navigator.share({title:`Certificate: ${t.course_name}`,text:`I earned a certificate in ${t.course_name}!`,url:i}).catch(c=>console.log("Error sharing:",c)):navigator.clipboard.writeText(i).then(()=>{alert("Certificate link copied to clipboard!")})},w=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),p=e.jsx(v,{title:"My Certificates",description:"View and download your earned course completion certificates",keywords:"certificates, achievements, course completion, credentials"});return e.jsx(g,{seo:p,children:e.jsxs("div",{className:a.certificatesContainer,children:[e.jsxs("div",{className:a.header,children:[e.jsx(r,{level:1,className:a.pageTitle,children:"My Certificates"}),e.jsxs(_,{to:"/dashboard/student",className:a.backLink,children:[e.jsx("i",{className:"fas fa-arrow-left"}),"Back to Dashboard"]})]}),m?e.jsxs("div",{className:a.loadingState,children:[e.jsx(N,{size:"large"}),e.jsx("p",{children:"Loading your certificates..."})]}):x?e.jsxs(n,{className:a.errorState,children:[e.jsx("i",{className:"fas fa-exclamation-circle"}),e.jsx("p",{children:"Failed to load certificates. Please refresh the page."})]}):l.length===0?e.jsxs(n,{className:a.noCertificates,children:[e.jsx("div",{className:a.noCertificatesIcon,children:e.jsx("i",{className:"fas fa-certificate"})}),e.jsx(r,{level:2,className:a.noCertificatesTitle,children:"No Certificates Yet"}),e.jsx("p",{className:a.noCertificatesMessage,children:"Complete your courses to earn certificates and showcase your achievements!"}),e.jsx(_,{to:"/courses/my-courses",children:e.jsxs(o,{variant:"primary",size:"large",children:[e.jsx("i",{className:"fas fa-book"}),"Browse Your Courses"]})})]}):e.jsx("div",{className:a.certificatesGrid,children:l.map(t=>e.jsxs(n,{className:a.certificateCard,children:[e.jsxs("div",{className:a.certificateHeader,children:[e.jsx("div",{className:a.certificateBadge,children:e.jsx("i",{className:"fas fa-award"})}),e.jsxs("div",{className:a.certificateInfo,children:[e.jsx(r,{level:3,className:a.certificateTitle,children:t.course_name}),e.jsxs("div",{className:a.certificateDate,children:[e.jsx("i",{className:"fas fa-calendar"}),e.jsxs("span",{children:["Earned on ",w(t.earned_date)]})]}),t.grade&&e.jsxs("div",{className:a.certificateGrade,children:[e.jsx("i",{className:"fas fa-star"}),e.jsxs("span",{children:["Final Grade: ",t.grade]})]}),e.jsxs("div",{className:a.certificateId,children:["Certificate ID: ",t.certificate_id]})]}),e.jsxs("div",{className:a.certificateActions,children:[e.jsxs(o,{onClick:()=>h(t),variant:"secondary",size:"small",className:a.downloadBtn,children:[e.jsx("i",{className:"fas fa-download"}),"Download"]}),e.jsxs(o,{onClick:()=>j(t),variant:"secondary",size:"small",className:a.shareBtn,children:[e.jsx("i",{className:"fas fa-share"}),"Share"]})]})]}),t.completion_percentage===100&&e.jsxs("div",{className:a.completionBadge,children:[e.jsx("i",{className:"fas fa-check-circle"}),"100% Complete"]})]},t.id))})]})})};export{X as StudentCertificates};
//# sourceMappingURL=StudentCertificates-BAz9DyvL.js.map
