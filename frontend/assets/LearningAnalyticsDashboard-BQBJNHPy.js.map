{"version":3,"file":"LearningAnalyticsDashboard-BQBJNHPy.js","sources":["../../src/services/learningAnalyticsService.ts","../../src/features/learning-analytics/hooks/useLearningAnalytics.ts","../../src/features/learning-analytics/components/LearningProgressChart.tsx","../../src/features/learning-analytics/components/SkillMasteryWidget.tsx","../../src/features/learning-analytics/components/LearningPathProgress.tsx","../../src/features/learning-analytics/components/SessionActivityWidget.tsx","../../src/features/learning-analytics/LearningAnalyticsDashboard.tsx"],"sourcesContent":["/**\n * Learning Analytics Service\n *\n * BUSINESS CONTEXT:\n * Provides comprehensive learning analytics for students, instructors, and administrators.\n * Tracks learning paths, skill mastery, session activity, and progress metrics to enable\n * data-driven decisions and personalized learning experiences.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Connects to analytics backend endpoints (port 8004)\n * - Provides learning path progress tracking\n * - Delivers skill mastery metrics with SM-2 spaced repetition\n * - Tracks session activity and engagement patterns\n * - Supports all user roles (student, instructor, org_admin, site_admin)\n *\n * WHY THIS APPROACH:\n * - Centralized learning analytics API logic separate from general analytics\n * - Type-safe interfaces for dashboard data consistency\n * - Role-appropriate data access controls\n * - Comprehensive documentation for maintainability\n */\n\nimport { apiClient } from './apiClient';\n\n/**\n * Learning Path Progress Data\n * Tracks student progress through structured learning paths\n */\nexport interface LearningPathProgress {\n  id: string;\n  user_id: string;\n  track_id: string;\n  overall_progress: number;\n  current_course_id?: string;\n  current_module_order?: number;\n  milestones_completed: MilestoneData[];\n  started_at?: string;\n  estimated_completion_at?: string;\n  actual_completion_at?: string;\n  total_time_spent_minutes: number;\n  avg_quiz_score?: number;\n  avg_assignment_score?: number;\n  status: LearningPathStatus;\n  last_activity_at?: string;\n}\n\n/**\n * Learning Path Status Enum\n * Current state of student's learning path\n */\nexport type LearningPathStatus =\n  | 'not_started'\n  | 'in_progress'\n  | 'on_track'\n  | 'behind'\n  | 'at_risk'\n  | 'completed'\n  | 'abandoned';\n\n/**\n * Milestone Data\n * Significant checkpoints in learning path\n */\nexport interface MilestoneData {\n  milestone_id: string;\n  name: string;\n  completed_at: string;\n  score?: number;\n}\n\n/**\n * Skill Mastery Data\n * Tracks mastery level for specific skills/topics\n */\nexport interface SkillMastery {\n  id: string;\n  student_id: string;\n  skill_topic: string;\n  mastery_level: MasteryLevel;\n  mastery_score: number;\n  assessments_completed: number;\n  assessments_passed: number;\n  average_score?: number;\n  best_score?: number;\n  total_practice_time_minutes: number;\n  last_practiced_at?: string;\n  practice_streak_days: number;\n  last_assessment_at?: string;\n  retention_estimate: number;\n  next_review_recommended_at?: string;\n  // SM-2 Spaced Repetition Fields\n  ease_factor: number;\n  repetition_count: number;\n  current_interval_days: number;\n  last_quality_rating: number;\n}\n\n/**\n * Mastery Level Enum\n * Fine-grained skill progression levels\n */\nexport type MasteryLevel =\n  | 'novice'\n  | 'beginner'\n  | 'intermediate'\n  | 'proficient'\n  | 'expert'\n  | 'master';\n\n/**\n * Session Activity Data\n * Tracks learning session metrics\n */\nexport interface SessionActivity {\n  session_id: string;\n  user_id: string;\n  course_id?: string;\n  started_at: string;\n  ended_at?: string;\n  duration_minutes: number;\n  activities_count: number;\n  engagement_score: number;\n  content_items_viewed: number;\n  quizzes_attempted: number;\n  labs_worked_on: number;\n  pages_visited: string[];\n}\n\n/**\n * Learning Progress Chart Data Point\n * Time-series data for progress visualization\n */\nexport interface LearningProgressDataPoint {\n  date: string;\n  progress_percentage: number;\n  items_completed: number;\n  time_spent_minutes: number;\n  engagement_score: number;\n}\n\n/**\n * Aggregated Learning Analytics\n * Comprehensive analytics summary for dashboard\n */\nexport interface LearningAnalyticsSummary {\n  student_id: string;\n  course_id?: string;\n  overall_engagement_score: number;\n  total_learning_time_minutes: number;\n  active_learning_paths: number;\n  completed_learning_paths: number;\n  total_skills_tracked: number;\n  skills_mastered: number;\n  average_mastery_score: number;\n  current_streak_days: number;\n  longest_streak_days: number;\n  sessions_this_week: number;\n  sessions_this_month: number;\n  skills_needing_review: SkillMastery[];\n  recent_milestones: MilestoneData[];\n}\n\n/**\n * Time Range Type\n * Supported time range filters for analytics\n */\nexport type TimeRange = '7d' | '30d' | '90d' | '6m' | '1y' | 'all';\n\n/**\n * Learning Analytics Service Class\n *\n * WHY THIS APPROACH:\n * - Encapsulates all learning analytics API calls\n * - Provides type-safe interfaces for data consistency\n * - Supports role-based access to analytics data\n * - Enables progressive enhancement of analytics features\n * - Follows singleton pattern for efficient resource usage\n */\nclass LearningAnalyticsService {\n  private baseUrl = '/analytics/learning';\n\n  /**\n   * Get student's learning analytics summary\n   *\n   * WHAT: Retrieves comprehensive learning analytics overview\n   * WHERE: Student dashboard main analytics widget\n   * WHY: Provides quick snapshot of overall learning performance\n   */\n  async getStudentLearningAnalytics(studentId: string): Promise<LearningAnalyticsSummary> {\n    return await apiClient.get<LearningAnalyticsSummary>(\n      `${this.baseUrl}/student/${studentId}/summary`\n    );\n  }\n\n  /**\n   * Get current user's learning analytics\n   *\n   * WHAT: Retrieves learning analytics for logged-in user\n   * WHERE: Student dashboard (no ID required)\n   * WHY: Convenience method for current user analytics\n   */\n  async getMyLearningAnalytics(): Promise<LearningAnalyticsSummary> {\n    return await apiClient.get<LearningAnalyticsSummary>(`${this.baseUrl}/student/me/summary`);\n  }\n\n  /**\n   * Get learning path progress for student\n   *\n   * WHAT: Retrieves detailed learning path progress data\n   * WHERE: Learning path progress visualization components\n   * WHY: Tracks student advancement through structured curriculum\n   */\n  async getLearningPathProgress(studentId: string, trackId: string): Promise<LearningPathProgress> {\n    return await apiClient.get<LearningPathProgress>(\n      `${this.baseUrl}/student/${studentId}/path/${trackId}`\n    );\n  }\n\n  /**\n   * Get all learning paths for student\n   *\n   * WHAT: Retrieves all active and completed learning paths\n   * WHERE: Learning paths overview page\n   * WHY: Shows complete learning journey across multiple tracks\n   */\n  async getStudentLearningPaths(studentId: string): Promise<LearningPathProgress[]> {\n    return await apiClient.get<LearningPathProgress[]>(\n      `${this.baseUrl}/student/${studentId}/paths`\n    );\n  }\n\n  /**\n   * Get skill mastery data for student\n   *\n   * WHAT: Retrieves mastery levels for all tracked skills\n   * WHERE: Skill mastery dashboard widget\n   * WHY: Identifies strengths, weaknesses, and review needs\n   */\n  async getSkillMastery(studentId: string, courseId?: string): Promise<SkillMastery[]> {\n    const params = courseId ? { course_id: courseId } : {};\n    return await apiClient.get<SkillMastery[]>(\n      `${this.baseUrl}/student/${studentId}/skills`,\n      { params }\n    );\n  }\n\n  /**\n   * Get specific skill mastery data\n   *\n   * WHAT: Retrieves detailed mastery data for a single skill\n   * WHERE: Skill detail page, spaced repetition scheduler\n   * WHY: Supports targeted practice and review scheduling\n   */\n  async getSkillMasteryDetail(studentId: string, skillTopic: string): Promise<SkillMastery> {\n    return await apiClient.get<SkillMastery>(\n      `${this.baseUrl}/student/${studentId}/skill/${encodeURIComponent(skillTopic)}`\n    );\n  }\n\n  /**\n   * Get skills needing review (spaced repetition)\n   *\n   * WHAT: Retrieves skills due for review based on SM-2 algorithm\n   * WHERE: Review scheduler, practice recommendations\n   * WHY: Optimizes retention through spaced repetition\n   */\n  async getSkillsNeedingReview(studentId: string): Promise<SkillMastery[]> {\n    return await apiClient.get<SkillMastery[]>(\n      `${this.baseUrl}/student/${studentId}/skills/review-needed`\n    );\n  }\n\n  /**\n   * Get session activity data\n   *\n   * WHAT: Retrieves learning session activity history\n   * WHERE: Session activity widget, engagement analytics\n   * WHY: Tracks learning patterns and engagement trends\n   */\n  async getSessionActivity(\n    studentId: string,\n    timeRange: TimeRange = '30d'\n  ): Promise<SessionActivity[]> {\n    return await apiClient.get<SessionActivity[]>(\n      `${this.baseUrl}/student/${studentId}/sessions`,\n      { params: { range: timeRange } }\n    );\n  }\n\n  /**\n   * Get learning progress over time\n   *\n   * WHAT: Retrieves time-series progress data for charts\n   * WHERE: Progress chart visualizations\n   * WHY: Shows learning trajectory and velocity\n   */\n  async getLearningProgressTimeSeries(\n    studentId: string,\n    courseId?: string,\n    timeRange: TimeRange = '30d'\n  ): Promise<LearningProgressDataPoint[]> {\n    const params: any = { range: timeRange };\n    if (courseId) {\n      params.course_id = courseId;\n    }\n    return await apiClient.get<LearningProgressDataPoint[]>(\n      `${this.baseUrl}/student/${studentId}/progress-timeline`,\n      { params }\n    );\n  }\n\n  /**\n   * Get course-level learning analytics (instructor view)\n   *\n   * WHAT: Retrieves aggregated learning analytics for entire course\n   * WHERE: Instructor dashboard, course analytics page\n   * WHY: Enables instructors to monitor class progress and identify issues\n   */\n  async getCourseLearningAnalytics(courseId: string): Promise<{\n    course_id: string;\n    total_students: number;\n    students_by_status: Record<LearningPathStatus, number>;\n    average_progress: number;\n    average_mastery_score: number;\n    skills_by_mastery_level: Record<MasteryLevel, number>;\n    at_risk_students: number;\n    completed_students: number;\n    average_time_spent_minutes: number;\n  }> {\n    return await apiClient.get(\n      `${this.baseUrl}/course/${courseId}/summary`\n    );\n  }\n\n  /**\n   * Get organization-level learning analytics (org admin view)\n   *\n   * WHAT: Retrieves aggregated learning analytics for organization\n   * WHERE: Organization admin dashboard\n   * WHY: Provides organizational insights for resource allocation\n   */\n  async getOrganizationLearningAnalytics(organizationId: string): Promise<{\n    organization_id: string;\n    total_students: number;\n    active_learning_paths: number;\n    completed_learning_paths: number;\n    average_completion_rate: number;\n    total_skills_tracked: number;\n    average_mastery_score: number;\n    students_at_risk: number;\n    engagement_trend: 'improving' | 'stable' | 'declining';\n  }> {\n    return await apiClient.get(\n      `${this.baseUrl}/organization/${organizationId}/summary`\n    );\n  }\n\n  /**\n   * Export learning analytics report\n   *\n   * WHAT: Generates downloadable analytics report\n   * WHERE: Export functionality in analytics dashboards\n   * WHY: Enables offline analysis and record keeping\n   */\n  async exportLearningAnalytics(\n    studentId: string,\n    format: 'pdf' | 'csv' | 'excel' = 'pdf'\n  ): Promise<Blob> {\n    return await apiClient.get(\n      `${this.baseUrl}/student/${studentId}/export`,\n      {\n        params: { format },\n        responseType: 'blob',\n      }\n    );\n  }\n}\n\n// Export singleton instance\nexport const learningAnalyticsService = new LearningAnalyticsService();\n","/**\n * useLearningAnalytics Hook\n *\n * WHAT: Custom hook for fetching and managing learning analytics data\n * WHERE: Learning Analytics Dashboard component\n * WHY: Centralizes data fetching logic and provides reactive state management\n *\n * BUSINESS CONTEXT:\n * Manages comprehensive learning analytics data:\n * - Learning path progress\n * - Skill mastery levels\n * - Session activity tracking\n * - Progress time series\n * - Overall analytics summary\n *\n * TECHNICAL IMPLEMENTATION:\n * - React hooks for state management\n * - Automatic data fetching on mount and parameter changes\n * - Error handling with user-friendly messages\n * - Loading states for smooth UX\n * - Refetch capability for manual updates\n * - Parallel API calls for optimal performance\n *\n * @module features/learning-analytics/hooks/useLearningAnalytics\n */\n\nimport { useState, useEffect } from 'react';\nimport {\n  learningAnalyticsService,\n  type LearningAnalyticsSummary,\n  type LearningPathProgress,\n  type SkillMastery,\n  type SessionActivity,\n  type LearningProgressDataPoint,\n  type TimeRange,\n} from '../../../services/learningAnalyticsService';\n\n/**\n * Hook Return Interface\n *\n * WHAT: Defines return type for useLearningAnalytics hook\n * WHERE: Type definitions for hook consumers\n * WHY: Ensures type safety and code clarity\n */\nexport interface UseLearningAnalyticsResult {\n  summary: LearningAnalyticsSummary | null;\n  learningPaths: LearningPathProgress[] | null;\n  skillMastery: SkillMastery[] | null;\n  sessionActivity: SessionActivity[] | null;\n  progressTimeSeries: LearningProgressDataPoint[] | null;\n  isLoading: boolean;\n  error: string | null;\n  refetch: () => Promise<void>;\n}\n\n/**\n * useLearningAnalytics Hook\n *\n * WHY THIS APPROACH:\n * - Encapsulates complex data fetching logic\n * - Manages loading and error states\n * - Provides refetch capability for manual updates\n * - Automatically refetches when parameters change\n * - Type-safe return values for dashboard components\n * - Parallel API calls for optimal performance\n *\n * @param studentId - Student ID (optional, uses current user if not provided)\n * @param courseId - Course ID for filtering (optional)\n * @param timeRange - Time range for analytics data\n * @returns Learning analytics data and state management functions\n */\nexport const useLearningAnalytics = (\n  studentId?: string,\n  courseId?: string,\n  timeRange: TimeRange = '30d'\n): UseLearningAnalyticsResult => {\n  const [summary, setSummary] = useState<LearningAnalyticsSummary | null>(null);\n  const [learningPaths, setLearningPaths] = useState<LearningPathProgress[] | null>(null);\n  const [skillMastery, setSkillMastery] = useState<SkillMastery[] | null>(null);\n  const [sessionActivity, setSessionActivity] = useState<SessionActivity[] | null>(null);\n  const [progressTimeSeries, setProgressTimeSeries] = useState<LearningProgressDataPoint[] | null>(\n    null\n  );\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Fetch Learning Analytics Data\n   *\n   * WHAT: Main data fetching function\n   * WHERE: Called on mount and parameter changes\n   * WHY: Retrieves all required analytics data from backend\n   *\n   * TECHNICAL NOTES:\n   * - Uses Promise.all for parallel API calls\n   * - Handles errors gracefully with user-friendly messages\n   * - Sets loading states appropriately\n   * - Supports both authenticated user and specific student ID\n   */\n  const fetchLearningAnalytics = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      /**\n       * Parallel Data Fetching\n       *\n       * WHAT: Fetches all analytics data concurrently\n       * WHERE: API service calls\n       * WHY: Reduces total loading time vs sequential calls\n       */\n      const [\n        summaryData,\n        pathsData,\n        skillsData,\n        sessionsData,\n        progressData,\n      ] = await Promise.all([\n        // Summary analytics (overall metrics)\n        studentId\n          ? learningAnalyticsService.getStudentLearningAnalytics(studentId)\n          : learningAnalyticsService.getMyLearningAnalytics(),\n\n        // Learning paths progress\n        studentId\n          ? learningAnalyticsService.getStudentLearningPaths(studentId)\n          : learningAnalyticsService\n              .getMyLearningAnalytics()\n              .then((data) =>\n                learningAnalyticsService.getStudentLearningPaths(data.student_id)\n              ),\n\n        // Skill mastery data\n        studentId\n          ? learningAnalyticsService.getSkillMastery(studentId, courseId)\n          : learningAnalyticsService\n              .getMyLearningAnalytics()\n              .then((data) => learningAnalyticsService.getSkillMastery(data.student_id, courseId)),\n\n        // Session activity\n        studentId\n          ? learningAnalyticsService.getSessionActivity(studentId, timeRange)\n          : learningAnalyticsService\n              .getMyLearningAnalytics()\n              .then((data) =>\n                learningAnalyticsService.getSessionActivity(data.student_id, timeRange)\n              ),\n\n        // Progress time series\n        studentId\n          ? learningAnalyticsService.getLearningProgressTimeSeries(\n              studentId,\n              courseId,\n              timeRange\n            )\n          : learningAnalyticsService\n              .getMyLearningAnalytics()\n              .then((data) =>\n                learningAnalyticsService.getLearningProgressTimeSeries(\n                  data.student_id,\n                  courseId,\n                  timeRange\n                )\n              ),\n      ]);\n\n      // Update state with fetched data\n      setSummary(summaryData);\n      setLearningPaths(pathsData);\n      setSkillMastery(skillsData);\n      setSessionActivity(sessionsData);\n      setProgressTimeSeries(progressData);\n    } catch (err) {\n      /**\n       * Error Handling\n       *\n       * WHAT: Converts errors to user-friendly messages\n       * WHERE: Catch block for all API calls\n       * WHY: Provides actionable feedback to users\n       */\n      const message = err instanceof Error ? err.message : 'Failed to load learning analytics';\n      setError(message);\n      console.error('Learning analytics fetch error:', err);\n\n      // Reset data on error\n      setSummary(null);\n      setLearningPaths(null);\n      setSkillMastery(null);\n      setSessionActivity(null);\n      setProgressTimeSeries(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  /**\n   * Effect Hook - Auto Fetch on Mount/Parameter Change\n   *\n   * WHAT: Triggers data fetch when dependencies change\n   * WHERE: React useEffect hook\n   * WHY: Keeps data synchronized with component parameters\n   */\n  useEffect(() => {\n    fetchLearningAnalytics();\n  }, [studentId, courseId, timeRange]);\n\n  /**\n   * Return Hook Results\n   *\n   * WHAT: Provides analytics data and control functions\n   * WHERE: Hook return value\n   * WHY: Enables consuming components to access data and trigger refetch\n   */\n  return {\n    summary,\n    learningPaths,\n    skillMastery,\n    sessionActivity,\n    progressTimeSeries,\n    isLoading,\n    error,\n    refetch: fetchLearningAnalytics,\n  };\n};\n\nexport default useLearningAnalytics;\n","/**\n * Learning Progress Chart Component\n *\n * WHAT: Visualizes learning progress over time using line chart\n * WHERE: Learning Analytics Dashboard main widget\n * WHY: Shows learning trajectory, velocity, and engagement patterns\n *\n * BUSINESS CONTEXT:\n * Displays multi-dimensional progress tracking:\n * - Progress percentage (completion rate)\n * - Items completed (content consumption)\n * - Time spent (engagement depth)\n * - Engagement score (quality of interaction)\n *\n * TECHNICAL IMPLEMENTATION:\n * - Chart.js for interactive line chart visualization\n * - Multiple datasets for comprehensive progress view\n * - Responsive design with aspect ratio preservation\n * - Color-coded metrics for easy interpretation\n *\n * @module features/learning-analytics/components/LearningProgressChart\n */\n\nimport React from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler,\n} from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport type { LearningProgressDataPoint } from '../../../services/learningAnalyticsService';\nimport styles from './LearningProgressChart.module.css';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler\n);\n\n/**\n * Component Props Interface\n */\nexport interface LearningProgressChartProps {\n  data: LearningProgressDataPoint[];\n}\n\n/**\n * Learning Progress Chart Component\n *\n * WHY THIS APPROACH:\n * - Line chart clearly shows trends over time\n * - Multiple datasets enable comprehensive progress view\n * - Gradient fills indicate progress accumulation\n * - Tooltips show detailed metrics on hover\n * - Responsive and accessible with Chart.js\n */\nexport const LearningProgressChart: React.FC<LearningProgressChartProps> = ({ data }) => {\n  /**\n   * Empty State Handler\n   *\n   * WHAT: Displays message when no data available\n   * WHERE: Shown when data array is empty\n   * WHY: Prevents rendering errors and informs user\n   */\n  if (!data || data.length === 0) {\n    return (\n      <div className={styles.emptyState}>\n        <p>No progress data available</p>\n        <span className={styles.emptyIcon}>üìä</span>\n      </div>\n    );\n  }\n\n  /**\n   * Format dates for chart labels\n   *\n   * WHAT: Converts ISO date strings to readable format\n   * WHERE: X-axis labels\n   * WHY: User-friendly date display\n   */\n  const labels = data.map((point) => {\n    const date = new Date(point.date);\n    return `${date.getMonth() + 1}/${date.getDate()}`;\n  });\n\n  /**\n   * Chart Data Configuration\n   *\n   * WHAT: Defines datasets and their visual properties\n   * WHERE: Passed to Chart.js Line component\n   * WHY: Creates multi-line chart with progress metrics\n   */\n  const chartData = {\n    labels,\n    datasets: [\n      {\n        label: 'Progress %',\n        data: data.map((point) => point.progress_percentage),\n        borderColor: '#2196f3',\n        backgroundColor: 'rgba(33, 150, 243, 0.1)',\n        fill: true,\n        tension: 0.4,\n        pointRadius: 4,\n        pointHoverRadius: 6,\n        pointBackgroundColor: '#2196f3',\n        pointBorderColor: '#fff',\n        pointBorderWidth: 2,\n      },\n      {\n        label: 'Engagement Score',\n        data: data.map((point) => point.engagement_score),\n        borderColor: '#4caf50',\n        backgroundColor: 'rgba(76, 175, 80, 0.1)',\n        fill: true,\n        tension: 0.4,\n        pointRadius: 4,\n        pointHoverRadius: 6,\n        pointBackgroundColor: '#4caf50',\n        pointBorderColor: '#fff',\n        pointBorderWidth: 2,\n      },\n    ],\n  };\n\n  /**\n   * Chart Options Configuration\n   *\n   * WHAT: Configures chart behavior and appearance\n   * WHERE: Chart.js options object\n   * WHY: Customizes interactivity, scaling, and tooltips\n   */\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    interaction: {\n      mode: 'index' as const,\n      intersect: false,\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'top' as const,\n        labels: {\n          usePointStyle: true,\n          padding: 15,\n        },\n      },\n      tooltip: {\n        callbacks: {\n          title: (context: any) => {\n            const index = context[0].dataIndex;\n            const date = new Date(data[index].date);\n            return date.toLocaleDateString('en-US', {\n              month: 'short',\n              day: 'numeric',\n              year: 'numeric',\n            });\n          },\n          afterBody: (context: any) => {\n            const index = context[0].dataIndex;\n            const dataPoint = data[index];\n            return [\n              `\\nItems Completed: ${dataPoint.items_completed}`,\n              `Time Spent: ${Math.round(dataPoint.time_spent_minutes / 60)}h ${\n                dataPoint.time_spent_minutes % 60\n              }m`,\n            ];\n          },\n        },\n      },\n    },\n    scales: {\n      y: {\n        min: 0,\n        max: 100,\n        ticks: {\n          callback: (value: any) => `${value}%`,\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.05)',\n        },\n      },\n      x: {\n        grid: {\n          display: false,\n        },\n      },\n    },\n  };\n\n  return (\n    <div className={styles.chartContainer}>\n      <div className={styles.chartWrapper}>\n        <Line data={chartData} options={options} />\n      </div>\n\n      {/* Additional Stats */}\n      <div className={styles.statsRow}>\n        <div className={styles.statItem}>\n          <span className={styles.statLabel}>Total Items</span>\n          <span className={styles.statValue}>\n            {data[data.length - 1]?.items_completed || 0}\n          </span>\n        </div>\n        <div className={styles.statItem}>\n          <span className={styles.statLabel}>Total Time</span>\n          <span className={styles.statValue}>\n            {Math.round(\n              data.reduce((sum, point) => sum + point.time_spent_minutes, 0) / 60\n            )}\n            h\n          </span>\n        </div>\n        <div className={styles.statItem}>\n          <span className={styles.statLabel}>Avg Engagement</span>\n          <span className={styles.statValue}>\n            {Math.round(\n              data.reduce((sum, point) => sum + point.engagement_score, 0) / data.length\n            )}\n            %\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LearningProgressChart;\n","/**\n * Skill Mastery Widget Component\n *\n * WHAT: Displays skill mastery levels with visual progress indicators\n * WHERE: Learning Analytics Dashboard skill tracking section\n * WHY: Shows skill proficiency, practice time, and review scheduling\n *\n * BUSINESS CONTEXT:\n * Provides comprehensive skill mastery visualization:\n * - Mastery level (novice through master)\n * - Mastery score percentage\n * - Assessment performance (passed/completed)\n * - Practice time and streaks\n * - Spaced repetition schedule (SM-2 algorithm)\n * - Retention estimates\n *\n * TECHNICAL IMPLEMENTATION:\n * - Radar chart for multi-skill comparison\n * - Progress bars for individual skill mastery\n * - Color-coded mastery levels\n * - Spaced repetition interval display\n * - Sortable skill list\n *\n * @module features/learning-analytics/components/SkillMasteryWidget\n */\n\nimport React, { useState } from 'react';\nimport {\n  Chart as ChartJS,\n  RadialLinearScale,\n  PointElement,\n  LineElement,\n  Filler,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Radar } from 'react-chartjs-2';\nimport type { SkillMastery, MasteryLevel } from '../../../services/learningAnalyticsService';\nimport styles from './SkillMasteryWidget.module.css';\n\n// Register Chart.js components\nChartJS.register(RadialLinearScale, PointElement, LineElement, Filler, Tooltip, Legend);\n\n/**\n * Component Props Interface\n */\nexport interface SkillMasteryWidgetProps {\n  skills: SkillMastery[];\n}\n\n/**\n * Sort Options Type\n */\ntype SortOption = 'mastery' | 'recent' | 'name' | 'review';\n\n/**\n * Skill Mastery Widget Component\n *\n * WHY THIS APPROACH:\n * - Radar chart shows overall skill profile\n * - Individual skill cards provide detailed metrics\n * - Sortable list enables quick identification of priorities\n * - Color coding provides instant visual feedback\n * - Spaced repetition data supports review planning\n */\nexport const SkillMasteryWidget: React.FC<SkillMasteryWidgetProps> = ({ skills }) => {\n  const [sortBy, setSortBy] = useState<SortOption>('mastery');\n  const [viewMode, setViewMode] = useState<'chart' | 'list'>('chart');\n\n  /**\n   * Empty State Handler\n   */\n  if (!skills || skills.length === 0) {\n    return (\n      <div className={styles.emptyState}>\n        <p>No skills tracked yet</p>\n        <span className={styles.emptyIcon}>üéØ</span>\n      </div>\n    );\n  }\n\n  /**\n   * Get Mastery Level Color\n   *\n   * WHAT: Maps mastery level to visual color\n   * WHERE: Progress bars and badges\n   * WHY: Provides instant visual feedback on skill level\n   */\n  const getMasteryColor = (level: MasteryLevel): string => {\n    const colorMap: Record<MasteryLevel, string> = {\n      novice: '#f44336',\n      beginner: '#ff9800',\n      intermediate: '#ffeb3b',\n      proficient: '#8bc34a',\n      expert: '#4caf50',\n      master: '#2196f3',\n    };\n    return colorMap[level] || '#9e9e9e';\n  };\n\n  /**\n   * Sort Skills\n   *\n   * WHAT: Sorts skills based on selected criterion\n   * WHERE: Skill list display\n   * WHY: Enables users to prioritize viewing\n   */\n  const sortedSkills = [...skills].sort((a, b) => {\n    switch (sortBy) {\n      case 'mastery':\n        return b.mastery_score - a.mastery_score;\n      case 'recent':\n        if (!a.last_practiced_at) return 1;\n        if (!b.last_practiced_at) return -1;\n        return (\n          new Date(b.last_practiced_at).getTime() -\n          new Date(a.last_practiced_at).getTime()\n        );\n      case 'name':\n        return a.skill_topic.localeCompare(b.skill_topic);\n      case 'review':\n        return a.current_interval_days - b.current_interval_days;\n      default:\n        return 0;\n    }\n  });\n\n  /**\n   * Radar Chart Data Configuration\n   *\n   * WHAT: Configures radar chart for top skills\n   * WHERE: Chart view mode\n   * WHY: Provides visual skill profile overview\n   */\n  const topSkills = sortedSkills.slice(0, 8); // Show top 8 skills\n  const radarData = {\n    labels: topSkills.map((skill) => skill.skill_topic),\n    datasets: [\n      {\n        label: 'Mastery Score',\n        data: topSkills.map((skill) => skill.mastery_score),\n        backgroundColor: 'rgba(33, 150, 243, 0.2)',\n        borderColor: '#2196f3',\n        borderWidth: 2,\n        pointBackgroundColor: '#2196f3',\n        pointBorderColor: '#fff',\n        pointBorderWidth: 2,\n        pointRadius: 4,\n        pointHoverRadius: 6,\n      },\n    ],\n  };\n\n  /**\n   * Radar Chart Options\n   */\n  const radarOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      r: {\n        min: 0,\n        max: 100,\n        ticks: {\n          stepSize: 20,\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.1)',\n        },\n      },\n    },\n    plugins: {\n      legend: {\n        display: false,\n      },\n      tooltip: {\n        callbacks: {\n          label: (context: any) => `Mastery: ${context.parsed.r}%`,\n        },\n      },\n    },\n  };\n\n  return (\n    <div className={styles.widgetContainer}>\n      {/* View Mode Toggle */}\n      <div className={styles.controls}>\n        <div className={styles.viewToggle}>\n          <button\n            className={`${styles.toggleBtn} ${viewMode === 'chart' ? styles.active : ''}`}\n            onClick={() => setViewMode('chart')}\n            aria-pressed={viewMode === 'chart'}\n          >\n            Chart View\n          </button>\n          <button\n            className={`${styles.toggleBtn} ${viewMode === 'list' ? styles.active : ''}`}\n            onClick={() => setViewMode('list')}\n            aria-pressed={viewMode === 'list'}\n          >\n            List View\n          </button>\n        </div>\n\n        {/* Sort Options */}\n        <div className={styles.sortSelector}>\n          <label htmlFor=\"sort-skills\">Sort by:</label>\n          <select\n            id=\"sort-skills\"\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value as SortOption)}\n            className={styles.sortSelect}\n          >\n            <option value=\"mastery\">Mastery Level</option>\n            <option value=\"recent\">Recently Practiced</option>\n            <option value=\"name\">Skill Name</option>\n            <option value=\"review\">Review Due</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Chart View */}\n      {viewMode === 'chart' && (\n        <div className={styles.chartView}>\n          <div className={styles.radarChart}>\n            <Radar data={radarData} options={radarOptions} />\n          </div>\n          <p className={styles.chartNote}>Showing top 8 skills by mastery score</p>\n        </div>\n      )}\n\n      {/* List View */}\n      {viewMode === 'list' && (\n        <div className={styles.listView}>\n          {sortedSkills.map((skill) => (\n            <div key={skill.id} className={styles.skillCard}>\n              {/* Skill Header */}\n              <div className={styles.skillHeader}>\n                <h3 className={styles.skillName}>{skill.skill_topic}</h3>\n                <span\n                  className={styles.masteryBadge}\n                  style={{ backgroundColor: getMasteryColor(skill.mastery_level) }}\n                >\n                  {skill.mastery_level.charAt(0).toUpperCase() +\n                    skill.mastery_level.slice(1)}\n                </span>\n              </div>\n\n              {/* Progress Bar */}\n              <div className={styles.progressSection}>\n                <div className={styles.progressBar}>\n                  <div\n                    className={styles.progressFill}\n                    style={{\n                      width: `${skill.mastery_score}%`,\n                      backgroundColor: getMasteryColor(skill.mastery_level),\n                    }}\n                  />\n                </div>\n                <span className={styles.progressValue}>{skill.mastery_score}%</span>\n              </div>\n\n              {/* Skill Metrics */}\n              <div className={styles.skillMetrics}>\n                <div className={styles.metric}>\n                  <span className={styles.metricLabel}>Assessments</span>\n                  <span className={styles.metricValue}>\n                    {skill.assessments_passed}/{skill.assessments_completed}\n                  </span>\n                </div>\n                <div className={styles.metric}>\n                  <span className={styles.metricLabel}>Practice Time</span>\n                  <span className={styles.metricValue}>\n                    {Math.round(skill.total_practice_time_minutes / 60)}h\n                  </span>\n                </div>\n                <div className={styles.metric}>\n                  <span className={styles.metricLabel}>Streak</span>\n                  <span className={styles.metricValue}>{skill.practice_streak_days} days</span>\n                </div>\n              </div>\n\n              {/* Spaced Repetition Info */}\n              <div className={styles.repetitionInfo}>\n                <div className={styles.repetitionMetric}>\n                  <span className={styles.repetitionLabel}>Retention:</span>\n                  <span className={styles.repetitionValue}>\n                    {Math.round(skill.retention_estimate * 100)}%\n                  </span>\n                </div>\n                <div className={styles.repetitionMetric}>\n                  <span className={styles.repetitionLabel}>Review Interval:</span>\n                  <span className={styles.repetitionValue}>\n                    {skill.current_interval_days} days\n                  </span>\n                </div>\n                <div className={styles.repetitionMetric}>\n                  <span className={styles.repetitionLabel}>Ease Factor:</span>\n                  <span className={styles.repetitionValue}>{skill.ease_factor.toFixed(2)}</span>\n                </div>\n              </div>\n\n              {/* Last Practice Date */}\n              {skill.last_practiced_at && (\n                <p className={styles.lastPractice}>\n                  Last practiced:{' '}\n                  {new Date(skill.last_practiced_at).toLocaleDateString('en-US', {\n                    month: 'short',\n                    day: 'numeric',\n                  })}\n                </p>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Summary Stats */}\n      <div className={styles.summaryStats}>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Total Skills</span>\n          <span className={styles.summaryValue}>{skills.length}</span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Avg Mastery</span>\n          <span className={styles.summaryValue}>\n            {Math.round(\n              skills.reduce((sum, skill) => sum + skill.mastery_score, 0) / skills.length\n            )}\n            %\n          </span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Total Practice</span>\n          <span className={styles.summaryValue}>\n            {Math.round(\n              skills.reduce((sum, skill) => sum + skill.total_practice_time_minutes, 0) / 60\n            )}\n            h\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SkillMasteryWidget;\n","/**\n * Learning Path Progress Component\n *\n * WHAT: Visualizes progress through learning paths and tracks\n * WHERE: Learning Analytics Dashboard learning path section\n * WHY: Shows curriculum progress, current position, and completion status\n *\n * BUSINESS CONTEXT:\n * Displays structured learning path information:\n * - Overall path progress percentage\n * - Current course/module position\n * - Milestones completed\n * - Time tracking (actual vs estimated)\n * - Path status (on track, behind, at risk)\n * - Assessment performance\n *\n * TECHNICAL IMPLEMENTATION:\n * - Progress bar visualizations\n * - Status indicators with color coding\n * - Timeline view for milestones\n * - Expandable path details\n * - Responsive card layout\n *\n * @module features/learning-analytics/components/LearningPathProgress\n */\n\nimport React, { useState } from 'react';\nimport type {\n  LearningPathProgress as LearningPathData,\n  LearningPathStatus,\n} from '../../../services/learningAnalyticsService';\nimport styles from './LearningPathProgress.module.css';\n\n/**\n * Component Props Interface\n */\nexport interface LearningPathProgressProps {\n  paths: LearningPathData[];\n}\n\n/**\n * Learning Path Progress Component\n *\n * WHY THIS APPROACH:\n * - Card-based layout for multiple paths\n * - Expandable details for comprehensive view\n * - Status color coding for quick assessment\n * - Milestone timeline shows progress checkpoints\n * - Time tracking compares actual vs estimated\n */\nexport const LearningPathProgress: React.FC<LearningPathProgressProps> = ({ paths }) => {\n  const [expandedPath, setExpandedPath] = useState<string | null>(null);\n\n  /**\n   * Empty State Handler\n   */\n  if (!paths || paths.length === 0) {\n    return (\n      <div className={styles.emptyState}>\n        <p>No active learning paths</p>\n        <span className={styles.emptyIcon}>üõ§Ô∏è</span>\n      </div>\n    );\n  }\n\n  /**\n   * Get Status Color\n   *\n   * WHAT: Maps path status to visual color\n   * WHERE: Status badges and progress bars\n   * WHY: Provides instant visual feedback on path health\n   */\n  const getStatusColor = (status: LearningPathStatus): string => {\n    const colorMap: Record<LearningPathStatus, string> = {\n      not_started: '#9e9e9e',\n      in_progress: '#2196f3',\n      on_track: '#4caf50',\n      behind: '#ff9800',\n      at_risk: '#f44336',\n      completed: '#8bc34a',\n      abandoned: '#757575',\n    };\n    return colorMap[status] || '#9e9e9e';\n  };\n\n  /**\n   * Get Status Label\n   *\n   * WHAT: Converts status enum to display text\n   * WHERE: Status badges\n   * WHY: User-friendly status display\n   */\n  const getStatusLabel = (status: LearningPathStatus): string => {\n    return status\n      .split('_')\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n  };\n\n  /**\n   * Toggle Path Expansion\n   *\n   * WHAT: Expands/collapses path details\n   * WHERE: Path card click handler\n   * WHY: Shows detailed information on demand\n   */\n  const togglePathExpansion = (pathId: string) => {\n    setExpandedPath(expandedPath === pathId ? null : pathId);\n  };\n\n  /**\n   * Calculate Time Difference\n   *\n   * WHAT: Compares actual vs estimated completion time\n   * WHERE: Time tracking display\n   * WHY: Shows if student is ahead or behind schedule\n   */\n  const calculateTimeDifference = (path: LearningPathData): string | null => {\n    if (!path.estimated_completion_at) return null;\n\n    const now = new Date();\n    const estimated = new Date(path.estimated_completion_at);\n    const diffDays = Math.ceil((estimated.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n\n    if (path.actual_completion_at) {\n      const actual = new Date(path.actual_completion_at);\n      const completionDiff = Math.ceil(\n        (actual.getTime() - estimated.getTime()) / (1000 * 60 * 60 * 24)\n      );\n      return completionDiff > 0\n        ? `Completed ${completionDiff} days late`\n        : `Completed ${Math.abs(completionDiff)} days early`;\n    }\n\n    if (diffDays < 0) {\n      return `${Math.abs(diffDays)} days overdue`;\n    } else if (diffDays === 0) {\n      return 'Due today';\n    } else {\n      return `${diffDays} days remaining`;\n    }\n  };\n\n  return (\n    <div className={styles.pathsContainer}>\n      {paths.map((path) => {\n        const isExpanded = expandedPath === path.id;\n        const timeDiff = calculateTimeDifference(path);\n\n        return (\n          <div key={path.id} className={styles.pathCard}>\n            {/* Path Header */}\n            <div\n              className={styles.pathHeader}\n              onClick={() => togglePathExpansion(path.id)}\n              role=\"button\"\n              tabIndex={0}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  togglePathExpansion(path.id);\n                }\n              }}\n            >\n              <div className={styles.pathTitleSection}>\n                <h3 className={styles.pathTitle}>Learning Path {path.track_id}</h3>\n                <span\n                  className={styles.statusBadge}\n                  style={{ backgroundColor: getStatusColor(path.status) }}\n                >\n                  {getStatusLabel(path.status)}\n                </span>\n              </div>\n              <button className={styles.expandButton} aria-expanded={isExpanded}>\n                {isExpanded ? '‚ñº' : '‚ñ∂'}\n              </button>\n            </div>\n\n            {/* Progress Bar */}\n            <div className={styles.progressSection}>\n              <div className={styles.progressBar}>\n                <div\n                  className={styles.progressFill}\n                  style={{\n                    width: `${path.overall_progress}%`,\n                    backgroundColor: getStatusColor(path.status),\n                  }}\n                />\n              </div>\n              <span className={styles.progressValue}>{path.overall_progress.toFixed(1)}%</span>\n            </div>\n\n            {/* Quick Stats */}\n            <div className={styles.quickStats}>\n              <div className={styles.stat}>\n                <span className={styles.statIcon}>‚è±Ô∏è</span>\n                <span className={styles.statText}>\n                  {Math.round(path.total_time_spent_minutes / 60)}h\n                </span>\n              </div>\n              {path.avg_quiz_score !== undefined && (\n                <div className={styles.stat}>\n                  <span className={styles.statIcon}>üìù</span>\n                  <span className={styles.statText}>{path.avg_quiz_score.toFixed(0)}%</span>\n                </div>\n              )}\n              {path.milestones_completed && path.milestones_completed.length > 0 && (\n                <div className={styles.stat}>\n                  <span className={styles.statIcon}>üèÜ</span>\n                  <span className={styles.statText}>\n                    {path.milestones_completed.length} milestones\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Time Difference */}\n            {timeDiff && (\n              <p\n                className={`${styles.timeDiff} ${\n                  timeDiff.includes('overdue') || timeDiff.includes('late')\n                    ? styles.timeDiffWarning\n                    : styles.timeDiffSuccess\n                }`}\n              >\n                {timeDiff}\n              </p>\n            )}\n\n            {/* Expanded Details */}\n            {isExpanded && (\n              <div className={styles.expandedContent}>\n                {/* Current Position */}\n                {path.current_course_id && (\n                  <div className={styles.currentPosition}>\n                    <h4>Current Position</h4>\n                    <p>Course ID: {path.current_course_id}</p>\n                    {path.current_module_order && (\n                      <p>Module: {path.current_module_order}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Dates */}\n                <div className={styles.datesSection}>\n                  <h4>Timeline</h4>\n                  <div className={styles.datesList}>\n                    {path.started_at && (\n                      <div className={styles.dateItem}>\n                        <span className={styles.dateLabel}>Started:</span>\n                        <span className={styles.dateValue}>\n                          {new Date(path.started_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    )}\n                    {path.estimated_completion_at && (\n                      <div className={styles.dateItem}>\n                        <span className={styles.dateLabel}>Est. Completion:</span>\n                        <span className={styles.dateValue}>\n                          {new Date(path.estimated_completion_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    )}\n                    {path.actual_completion_at && (\n                      <div className={styles.dateItem}>\n                        <span className={styles.dateLabel}>Completed:</span>\n                        <span className={styles.dateValue}>\n                          {new Date(path.actual_completion_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    )}\n                    {path.last_activity_at && (\n                      <div className={styles.dateItem}>\n                        <span className={styles.dateLabel}>Last Activity:</span>\n                        <span className={styles.dateValue}>\n                          {new Date(path.last_activity_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Milestones */}\n                {path.milestones_completed && path.milestones_completed.length > 0 && (\n                  <div className={styles.milestonesSection}>\n                    <h4>Completed Milestones</h4>\n                    <div className={styles.milestonesList}>\n                      {path.milestones_completed.map((milestone, index) => (\n                        <div key={index} className={styles.milestoneItem}>\n                          <span className={styles.milestoneIcon}>‚úì</span>\n                          <div className={styles.milestoneContent}>\n                            <p className={styles.milestoneName}>{milestone.name}</p>\n                            <p className={styles.milestoneDate}>\n                              {new Date(milestone.completed_at).toLocaleDateString()}\n                            </p>\n                            {milestone.score !== undefined && (\n                              <p className={styles.milestoneScore}>\n                                Score: {milestone.score}%\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Performance Metrics */}\n                <div className={styles.performanceMetrics}>\n                  <h4>Performance</h4>\n                  <div className={styles.metricsGrid}>\n                    {path.avg_quiz_score !== undefined && (\n                      <div className={styles.metricItem}>\n                        <span className={styles.metricLabel}>Avg Quiz Score</span>\n                        <span className={styles.metricValue}>\n                          {path.avg_quiz_score.toFixed(1)}%\n                        </span>\n                      </div>\n                    )}\n                    {path.avg_assignment_score !== undefined && (\n                      <div className={styles.metricItem}>\n                        <span className={styles.metricLabel}>Avg Assignment Score</span>\n                        <span className={styles.metricValue}>\n                          {path.avg_assignment_score.toFixed(1)}%\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default LearningPathProgress;\n","/**\n * Session Activity Widget Component\n *\n * WHAT: Displays learning session activity metrics and patterns\n * WHERE: Learning Analytics Dashboard session tracking section\n * WHY: Tracks engagement patterns, session duration, and activity types\n *\n * BUSINESS CONTEXT:\n * Provides session-level analytics:\n * - Session duration tracking\n * - Activity type breakdown\n * - Engagement score per session\n * - Content consumption metrics\n * - Daily/weekly activity patterns\n * - Peak learning times\n *\n * TECHNICAL IMPLEMENTATION:\n * - Bar chart for session durations\n * - Activity breakdown pie chart\n * - Session list with detailed metrics\n * - Time-based filtering\n * - Engagement score visualization\n *\n * @module features/learning-analytics/components/SessionActivityWidget\n */\n\nimport React, { useState } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Bar, Pie } from 'react-chartjs-2';\nimport type { SessionActivity } from '../../../services/learningAnalyticsService';\nimport styles from './SessionActivityWidget.module.css';\n\n// Register Chart.js components\nChartJS.register(CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend);\n\n/**\n * Component Props Interface\n */\nexport interface SessionActivityWidgetProps {\n  sessions: SessionActivity[];\n}\n\n/**\n * View Mode Type\n */\ntype ViewMode = 'timeline' | 'breakdown' | 'list';\n\n/**\n * Session Activity Widget Component\n *\n * WHY THIS APPROACH:\n * - Multiple view modes for different insights\n * - Bar chart shows session duration timeline\n * - Pie chart shows activity type breakdown\n * - List view provides detailed session info\n * - Engagement score tracking\n */\nexport const SessionActivityWidget: React.FC<SessionActivityWidgetProps> = ({ sessions }) => {\n  const [viewMode, setViewMode] = useState<ViewMode>('timeline');\n\n  /**\n   * Empty State Handler\n   */\n  if (!sessions || sessions.length === 0) {\n    return (\n      <div className={styles.emptyState}>\n        <p>No session activity recorded</p>\n        <span className={styles.emptyIcon}>üìä</span>\n      </div>\n    );\n  }\n\n  /**\n   * Calculate Activity Breakdown\n   *\n   * WHAT: Aggregates total activities by type\n   * WHERE: Pie chart data\n   * WHY: Shows distribution of learning activities\n   */\n  const activityBreakdown = sessions.reduce(\n    (acc, session) => {\n      acc.contentViewed += session.content_items_viewed;\n      acc.quizzesAttempted += session.quizzes_attempted;\n      acc.labsWorked += session.labs_worked_on;\n      return acc;\n    },\n    { contentViewed: 0, quizzesAttempted: 0, labsWorked: 0 }\n  );\n\n  /**\n   * Timeline Bar Chart Data\n   *\n   * WHAT: Session duration over time\n   * WHERE: Timeline view mode\n   * WHY: Shows learning session patterns\n   */\n  const timelineData = {\n    labels: sessions.map((session) => {\n      const date = new Date(session.started_at);\n      return `${date.getMonth() + 1}/${date.getDate()}`;\n    }),\n    datasets: [\n      {\n        label: 'Session Duration (minutes)',\n        data: sessions.map((session) => session.duration_minutes),\n        backgroundColor: sessions.map((session) => {\n          // Color code by engagement score\n          if (session.engagement_score >= 80) return 'rgba(76, 175, 80, 0.7)';\n          if (session.engagement_score >= 60) return 'rgba(33, 150, 243, 0.7)';\n          if (session.engagement_score >= 40) return 'rgba(255, 152, 0, 0.7)';\n          return 'rgba(244, 67, 54, 0.7)';\n        }),\n        borderColor: sessions.map((session) => {\n          if (session.engagement_score >= 80) return '#4caf50';\n          if (session.engagement_score >= 60) return '#2196f3';\n          if (session.engagement_score >= 40) return '#ff9800';\n          return '#f44336';\n        }),\n        borderWidth: 2,\n        borderRadius: 4,\n      },\n    ],\n  };\n\n  /**\n   * Timeline Chart Options\n   */\n  const timelineOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false,\n      },\n      tooltip: {\n        callbacks: {\n          title: (context: any) => {\n            const session = sessions[context[0].dataIndex];\n            const date = new Date(session.started_at);\n            return date.toLocaleString('en-US', {\n              month: 'short',\n              day: 'numeric',\n              hour: 'numeric',\n              minute: '2-digit',\n            });\n          },\n          afterBody: (context: any) => {\n            const session = sessions[context[0].dataIndex];\n            return [\n              `Engagement: ${session.engagement_score}%`,\n              `Activities: ${session.activities_count}`,\n              `Content Viewed: ${session.content_items_viewed}`,\n            ];\n          },\n        },\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          callback: (value: any) => `${value}m`,\n        },\n      },\n    },\n  };\n\n  /**\n   * Activity Breakdown Pie Chart Data\n   *\n   * WHAT: Distribution of activity types\n   * WHERE: Breakdown view mode\n   * WHY: Shows what students are working on\n   */\n  const breakdownData = {\n    labels: ['Content Viewed', 'Quizzes Attempted', 'Labs Worked On'],\n    datasets: [\n      {\n        data: [\n          activityBreakdown.contentViewed,\n          activityBreakdown.quizzesAttempted,\n          activityBreakdown.labsWorked,\n        ],\n        backgroundColor: [\n          'rgba(33, 150, 243, 0.7)',\n          'rgba(255, 152, 0, 0.7)',\n          'rgba(156, 39, 176, 0.7)',\n        ],\n        borderColor: ['#2196f3', '#ff9800', '#9c27b0'],\n        borderWidth: 2,\n      },\n    ],\n  };\n\n  /**\n   * Breakdown Chart Options\n   */\n  const breakdownOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom' as const,\n      },\n      tooltip: {\n        callbacks: {\n          label: (context: any) => {\n            const label = context.label || '';\n            const value = context.parsed || 0;\n            const total =\n              activityBreakdown.contentViewed +\n              activityBreakdown.quizzesAttempted +\n              activityBreakdown.labsWorked;\n            const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : '0';\n            return `${label}: ${value} (${percentage}%)`;\n          },\n        },\n      },\n    },\n  };\n\n  /**\n   * Calculate Summary Stats\n   */\n  const summaryStats = {\n    totalSessions: sessions.length,\n    totalDuration: sessions.reduce((sum, s) => sum + s.duration_minutes, 0),\n    avgDuration: Math.round(\n      sessions.reduce((sum, s) => sum + s.duration_minutes, 0) / sessions.length\n    ),\n    avgEngagement: Math.round(\n      sessions.reduce((sum, s) => sum + s.engagement_score, 0) / sessions.length\n    ),\n    totalActivities: sessions.reduce((sum, s) => sum + s.activities_count, 0),\n  };\n\n  return (\n    <div className={styles.widgetContainer}>\n      {/* View Mode Toggle */}\n      <div className={styles.viewToggle}>\n        <button\n          className={`${styles.toggleBtn} ${viewMode === 'timeline' ? styles.active : ''}`}\n          onClick={() => setViewMode('timeline')}\n          aria-pressed={viewMode === 'timeline'}\n        >\n          Timeline\n        </button>\n        <button\n          className={`${styles.toggleBtn} ${viewMode === 'breakdown' ? styles.active : ''}`}\n          onClick={() => setViewMode('breakdown')}\n          aria-pressed={viewMode === 'breakdown'}\n        >\n          Breakdown\n        </button>\n        <button\n          className={`${styles.toggleBtn} ${viewMode === 'list' ? styles.active : ''}`}\n          onClick={() => setViewMode('list')}\n          aria-pressed={viewMode === 'list'}\n        >\n          List\n        </button>\n      </div>\n\n      {/* Timeline View */}\n      {viewMode === 'timeline' && (\n        <div className={styles.chartView}>\n          <div className={styles.chartContainer}>\n            <Bar data={timelineData} options={timelineOptions} />\n          </div>\n          <div className={styles.chartLegend}>\n            <div className={styles.legendItem}>\n              <span className={styles.legendDot} style={{ backgroundColor: '#4caf50' }}></span>\n              <span>High Engagement (80%+)</span>\n            </div>\n            <div className={styles.legendItem}>\n              <span className={styles.legendDot} style={{ backgroundColor: '#2196f3' }}></span>\n              <span>Good Engagement (60-79%)</span>\n            </div>\n            <div className={styles.legendItem}>\n              <span className={styles.legendDot} style={{ backgroundColor: '#ff9800' }}></span>\n              <span>Moderate Engagement (40-59%)</span>\n            </div>\n            <div className={styles.legendItem}>\n              <span className={styles.legendDot} style={{ backgroundColor: '#f44336' }}></span>\n              <span>Low Engagement (&lt;40%)</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Breakdown View */}\n      {viewMode === 'breakdown' && (\n        <div className={styles.chartView}>\n          <div className={styles.pieChartContainer}>\n            <Pie data={breakdownData} options={breakdownOptions} />\n          </div>\n          <div className={styles.breakdownStats}>\n            <div className={styles.breakdownItem}>\n              <span className={styles.breakdownLabel}>Content Items</span>\n              <span className={styles.breakdownValue}>{activityBreakdown.contentViewed}</span>\n            </div>\n            <div className={styles.breakdownItem}>\n              <span className={styles.breakdownLabel}>Quizzes</span>\n              <span className={styles.breakdownValue}>{activityBreakdown.quizzesAttempted}</span>\n            </div>\n            <div className={styles.breakdownItem}>\n              <span className={styles.breakdownLabel}>Labs</span>\n              <span className={styles.breakdownValue}>{activityBreakdown.labsWorked}</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* List View */}\n      {viewMode === 'list' && (\n        <div className={styles.listView}>\n          {sessions.map((session) => (\n            <div key={session.session_id} className={styles.sessionCard}>\n              <div className={styles.sessionHeader}>\n                <span className={styles.sessionDate}>\n                  {new Date(session.started_at).toLocaleString('en-US', {\n                    month: 'short',\n                    day: 'numeric',\n                    hour: 'numeric',\n                    minute: '2-digit',\n                  })}\n                </span>\n                <span\n                  className={styles.engagementBadge}\n                  style={{\n                    backgroundColor:\n                      session.engagement_score >= 80\n                        ? '#4caf50'\n                        : session.engagement_score >= 60\n                        ? '#2196f3'\n                        : session.engagement_score >= 40\n                        ? '#ff9800'\n                        : '#f44336',\n                  }}\n                >\n                  {session.engagement_score}% engaged\n                </span>\n              </div>\n              <div className={styles.sessionMetrics}>\n                <div className={styles.sessionMetric}>\n                  <span className={styles.metricIcon}>‚è±Ô∏è</span>\n                  <span>{session.duration_minutes}m</span>\n                </div>\n                <div className={styles.sessionMetric}>\n                  <span className={styles.metricIcon}>üìÑ</span>\n                  <span>{session.content_items_viewed} items</span>\n                </div>\n                <div className={styles.sessionMetric}>\n                  <span className={styles.metricIcon}>üìù</span>\n                  <span>{session.quizzes_attempted} quizzes</span>\n                </div>\n                <div className={styles.sessionMetric}>\n                  <span className={styles.metricIcon}>üíª</span>\n                  <span>{session.labs_worked_on} labs</span>\n                </div>\n              </div>\n              <p className={styles.sessionActivities}>\n                {session.activities_count} total activities\n              </p>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Summary Stats */}\n      <div className={styles.summaryStats}>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Total Sessions</span>\n          <span className={styles.summaryValue}>{summaryStats.totalSessions}</span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Total Time</span>\n          <span className={styles.summaryValue}>\n            {Math.round(summaryStats.totalDuration / 60)}h\n          </span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Avg Duration</span>\n          <span className={styles.summaryValue}>{summaryStats.avgDuration}m</span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Avg Engagement</span>\n          <span className={styles.summaryValue}>{summaryStats.avgEngagement}%</span>\n        </div>\n        <div className={styles.summaryItem}>\n          <span className={styles.summaryLabel}>Total Activities</span>\n          <span className={styles.summaryValue}>{summaryStats.totalActivities}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SessionActivityWidget;\n","/**\n * Learning Analytics Dashboard Component\n *\n * WHAT: Main dashboard for comprehensive learning analytics\n * WHERE: Accessible from student, instructor, and admin dashboards\n * WHY: Provides unified view of learning progress, skill mastery, and engagement metrics\n *\n * BUSINESS CONTEXT:\n * Comprehensive learning analytics interface showing:\n * - Learning path progress and trajectory\n * - Skill mastery levels with spaced repetition recommendations\n * - Session activity and engagement patterns\n * - Progress charts and time-series visualizations\n * - Role-appropriate analytics (student/instructor/admin views)\n *\n * TECHNICAL IMPLEMENTATION:\n * - Uses custom hook for data fetching and state management\n * - Responsive grid layout for widget placement\n * - Chart.js for interactive visualizations\n * - CSS modules for scoped styling\n * - Loading and error states with user-friendly messages\n *\n * @module features/learning-analytics/LearningAnalyticsDashboard\n */\n\nimport React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useLearningAnalytics } from './hooks/useLearningAnalytics';\nimport { LearningProgressChart } from './components/LearningProgressChart';\nimport { SkillMasteryWidget } from './components/SkillMasteryWidget';\nimport { LearningPathProgress } from './components/LearningPathProgress';\nimport { SessionActivityWidget } from './components/SessionActivityWidget';\nimport type { TimeRange } from '../../services/learningAnalyticsService';\nimport styles from './LearningAnalyticsDashboard.module.css';\n\n/**\n * View Type Enum\n * Determines which analytics perspective to display\n */\nexport type LearningAnalyticsViewType = 'student' | 'instructor' | 'org_admin';\n\n/**\n * Dashboard Props Interface\n */\nexport interface LearningAnalyticsDashboardProps {\n  viewType: LearningAnalyticsViewType;\n  studentId?: string;\n  courseId?: string;\n  organizationId?: string;\n}\n\n/**\n * Learning Analytics Dashboard Component\n *\n * WHY THIS APPROACH:\n * - Modular widget design for flexible dashboard composition\n * - Time range selector for adjustable analytics periods\n * - Role-based view customization\n * - Loading states prevent premature rendering\n * - Error boundaries handle API failures gracefully\n */\nexport const LearningAnalyticsDashboard: React.FC<LearningAnalyticsDashboardProps> = ({\n  viewType,\n  studentId,\n  courseId,\n  organizationId,\n}) => {\n  const { studentId: paramStudentId, courseId: paramCourseId } = useParams<{\n    studentId?: string;\n    courseId?: string;\n  }>();\n\n  // Use prop values or fall back to URL params\n  const effectiveStudentId = studentId || paramStudentId;\n  const effectiveCourseId = courseId || paramCourseId;\n\n  const [timeRange, setTimeRange] = useState<TimeRange>('30d');\n\n  const {\n    summary,\n    learningPaths,\n    skillMastery,\n    sessionActivity,\n    progressTimeSeries,\n    isLoading,\n    error,\n    refetch,\n  } = useLearningAnalytics(effectiveStudentId, effectiveCourseId, timeRange);\n\n  /**\n   * Loading State Handler\n   *\n   * WHAT: Displays loading spinner while data fetches\n   * WHERE: Shown during initial load and refetch operations\n   * WHY: Provides feedback to prevent user confusion\n   */\n  if (isLoading) {\n    return (\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner} aria-label=\"Loading analytics\"></div>\n        <p>Loading learning analytics...</p>\n      </div>\n    );\n  }\n\n  /**\n   * Error State Handler\n   *\n   * WHAT: Displays error message if data fetch fails\n   * WHERE: Shown when API call returns error\n   * WHY: Informs user of issue and provides retry option\n   */\n  if (error) {\n    return (\n      <div className={styles.errorContainer}>\n        <h2>Error Loading Learning Analytics</h2>\n        <p>{error}</p>\n        <button onClick={refetch} className={styles.retryButton}>\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  /**\n   * Time Range Options Configuration\n   *\n   * WHAT: Available time range filter options\n   * WHERE: Time range selector buttons\n   * WHY: Provides standard analytics time periods\n   */\n  const timeRangeOptions: { value: TimeRange; label: string }[] = [\n    { value: '7d', label: 'Week' },\n    { value: '30d', label: 'Month' },\n    { value: '90d', label: 'Quarter' },\n    { value: '6m', label: '6 Months' },\n    { value: '1y', label: 'Year' },\n    { value: 'all', label: 'All Time' },\n  ];\n\n  /**\n   * Dashboard Title Logic\n   *\n   * WHAT: Determines appropriate dashboard title\n   * WHERE: Dashboard header\n   * WHY: Provides context-appropriate title based on view type\n   */\n  const getDashboardTitle = () => {\n    switch (viewType) {\n      case 'student':\n        return 'My Learning Analytics';\n      case 'instructor':\n        return 'Student Learning Analytics';\n      case 'org_admin':\n        return 'Organization Learning Analytics';\n      default:\n        return 'Learning Analytics';\n    }\n  };\n\n  return (\n    <div className={styles.dashboardContainer}>\n      {/* Header Section */}\n      <div className={styles.dashboardHeader}>\n        <div className={styles.titleSection}>\n          <h1>{getDashboardTitle()}</h1>\n          <p className={styles.subtitle}>\n            {viewType === 'student' && 'Track your learning progress and skill development'}\n            {viewType === 'instructor' && 'Monitor student learning outcomes and engagement'}\n            {viewType === 'org_admin' && 'Organizational learning insights and trends'}\n          </p>\n        </div>\n\n        {/* Time Range Selector */}\n        <div className={styles.timeRangeSelector}>\n          {timeRangeOptions.map((option) => (\n            <button\n              key={option.value}\n              className={`${styles.timeRangeBtn} ${\n                timeRange === option.value ? styles.active : ''\n              }`}\n              onClick={() => setTimeRange(option.value)}\n              aria-pressed={timeRange === option.value}\n            >\n              {option.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Summary Stats Cards */}\n      {summary && (\n        <div className={styles.summaryGrid}>\n          <div className={styles.statCard}>\n            <span className={styles.statIcon}>üìà</span>\n            <div className={styles.statContent}>\n              <h3>Engagement Score</h3>\n              <p className={styles.statValue}>{summary.overall_engagement_score}%</p>\n              <p className={styles.statLabel}>Overall engagement</p>\n            </div>\n          </div>\n\n          <div className={styles.statCard}>\n            <span className={styles.statIcon}>üéØ</span>\n            <div className={styles.statContent}>\n              <h3>Skills Mastered</h3>\n              <p className={styles.statValue}>\n                {summary.skills_mastered}/{summary.total_skills_tracked}\n              </p>\n              <p className={styles.statLabel}>\n                {summary.total_skills_tracked > 0\n                  ? `${Math.round((summary.skills_mastered / summary.total_skills_tracked) * 100)}% mastery rate`\n                  : 'No skills tracked'}\n              </p>\n            </div>\n          </div>\n\n          <div className={styles.statCard}>\n            <span className={styles.statIcon}>üî•</span>\n            <div className={styles.statContent}>\n              <h3>Current Streak</h3>\n              <p className={styles.statValue}>{summary.current_streak_days} days</p>\n              <p className={styles.statLabel}>\n                Longest: {summary.longest_streak_days} days\n              </p>\n            </div>\n          </div>\n\n          <div className={styles.statCard}>\n            <span className={styles.statIcon}>‚è±Ô∏è</span>\n            <div className={styles.statContent}>\n              <h3>Learning Time</h3>\n              <p className={styles.statValue}>\n                {Math.round(summary.total_learning_time_minutes / 60)}h\n              </p>\n              <p className={styles.statLabel}>Total time invested</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Analytics Widgets */}\n      <div className={styles.widgetsGrid}>\n        {/* Learning Progress Chart */}\n        {progressTimeSeries && progressTimeSeries.length > 0 && (\n          <div className={styles.widgetCard}>\n            <h2>Learning Progress Over Time</h2>\n            <LearningProgressChart data={progressTimeSeries} />\n          </div>\n        )}\n\n        {/* Skill Mastery Widget */}\n        {skillMastery && skillMastery.length > 0 && (\n          <div className={styles.widgetCard}>\n            <h2>Skill Mastery</h2>\n            <SkillMasteryWidget skills={skillMastery} />\n          </div>\n        )}\n\n        {/* Learning Path Progress */}\n        {learningPaths && learningPaths.length > 0 && (\n          <div className={styles.widgetCard}>\n            <h2>Learning Path Progress</h2>\n            <LearningPathProgress paths={learningPaths} />\n          </div>\n        )}\n\n        {/* Session Activity */}\n        {sessionActivity && sessionActivity.length > 0 && (\n          <div className={styles.widgetCard}>\n            <h2>Session Activity</h2>\n            <SessionActivityWidget sessions={sessionActivity} />\n          </div>\n        )}\n      </div>\n\n      {/* Skills Needing Review Section */}\n      {summary && summary.skills_needing_review && summary.skills_needing_review.length > 0 && (\n        <div className={styles.reviewSection}>\n          <h2>Skills Due for Review</h2>\n          <p className={styles.reviewSubtitle}>\n            Based on spaced repetition schedule (SM-2 algorithm)\n          </p>\n          <div className={styles.reviewGrid}>\n            {summary.skills_needing_review.map((skill) => (\n              <div key={skill.id} className={styles.reviewCard}>\n                <h3>{skill.skill_topic}</h3>\n                <div className={styles.reviewMeta}>\n                  <span className={styles.reviewBadge}>\n                    {skill.mastery_level.charAt(0).toUpperCase() + skill.mastery_level.slice(1)}\n                  </span>\n                  <span className={styles.reviewInterval}>\n                    Next review: {skill.current_interval_days} days\n                  </span>\n                </div>\n                <div className={styles.reviewProgress}>\n                  <div className={styles.reviewProgressBar}>\n                    <div\n                      className={styles.reviewProgressFill}\n                      style={{ width: `${skill.mastery_score}%` }}\n                    />\n                  </div>\n                  <span className={styles.reviewScore}>{skill.mastery_score}%</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Recent Milestones */}\n      {summary && summary.recent_milestones && summary.recent_milestones.length > 0 && (\n        <div className={styles.milestonesSection}>\n          <h2>Recent Milestones</h2>\n          <div className={styles.milestonesList}>\n            {summary.recent_milestones.map((milestone, index) => (\n              <div key={index} className={styles.milestoneItem}>\n                <span className={styles.milestoneIcon}>üèÜ</span>\n                <div className={styles.milestoneContent}>\n                  <h3>{milestone.name}</h3>\n                  <p className={styles.milestoneDate}>\n                    Completed: {new Date(milestone.completed_at).toLocaleDateString()}\n                  </p>\n                  {milestone.score && (\n                    <p className={styles.milestoneScore}>Score: {milestone.score}%</p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LearningAnalyticsDashboard;\n"],"names":["LearningAnalyticsService","studentId","apiClient","trackId","courseId","params","skillTopic","timeRange","organizationId","format","learningAnalyticsService","useLearningAnalytics","summary","setSummary","useState","learningPaths","setLearningPaths","skillMastery","setSkillMastery","sessionActivity","setSessionActivity","progressTimeSeries","setProgressTimeSeries","isLoading","setIsLoading","error","setError","fetchLearningAnalytics","summaryData","pathsData","skillsData","sessionsData","progressData","data","err","message","useEffect","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","LearningProgressChart","jsxs","styles","jsx","chartData","point","date","options","context","index","dataPoint","value","Line","sum","RadialLinearScale","SkillMasteryWidget","skills","sortBy","setSortBy","viewMode","setViewMode","getMasteryColor","level","sortedSkills","a","b","topSkills","radarData","skill","radarOptions","e","Radar","LearningPathProgress","paths","expandedPath","setExpandedPath","getStatusColor","status","getStatusLabel","word","togglePathExpansion","pathId","calculateTimeDifference","path","now","estimated","diffDays","actual","completionDiff","isExpanded","timeDiff","milestone","BarElement","ArcElement","SessionActivityWidget","sessions","activityBreakdown","acc","session","timelineData","timelineOptions","breakdownData","breakdownOptions","label","total","percentage","summaryStats","Bar","Pie","LearningAnalyticsDashboard","viewType","paramStudentId","paramCourseId","useParams","effectiveStudentId","effectiveCourseId","setTimeRange","refetch","timeRangeOptions","getDashboardTitle","option"],"mappings":"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"}