{"version":3,"file":"Login-D2Fp0OVU.js","sources":["../../src/features/auth/Login.tsx"],"sourcesContent":["/**\n * Login Page Component\n *\n * BUSINESS CONTEXT:\n * Authenticates users and redirects to appropriate dashboard based on role.\n * Supports instructor, org admin, student, and site admin login.\n *\n * TECHNICAL IMPLEMENTATION:\n * Uses useAuth hook for authentication logic and Redux for state management.\n * Integrates with user-management service (port 8000) for authentication.\n */\n\nimport React, { useState, FormEvent } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport { Card } from '../../components/atoms/Card';\nimport { Button } from '../../components/atoms/Button';\nimport { Heading } from '../../components/atoms/Heading';\nimport { Spinner } from '../../components/atoms/Spinner';\nimport { Input } from '../../components/atoms/Input';\nimport styles from './Login.module.css';\n\n/**\n * Login Page Component\n *\n * WHY THIS APPROACH:\n * - Form validation before submission\n * - Loading states for better UX\n * - Error handling with user feedback\n * - Remember me functionality\n * - Links to registration and password reset\n */\nexport const LoginPage: React.FC = () => {\n  const { login, isLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const [identifier, setIdentifier] = useState('');  // Can be email OR username\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  const [error, setError] = useState('');\n\n  /**\n   * Handle form submission\n   *\n   * BUSINESS LOGIC:\n   * Validates inputs, calls login API, handles success/error states\n   */\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    // Client-side validation\n    if (!identifier || !password) {\n      setError('Please enter your email/username and password');\n      return;\n    }\n\n    if (identifier.length < 3) {\n      setError('Please enter a valid email or username');\n      return;\n    }\n\n    try {\n      // Backend accepts either email or username\n      await login({ username: identifier, password });\n      // Navigation is handled by useAuth hook\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Login failed. Please try again.');\n    }\n  };\n\n  return (\n    <div className={styles['login-container']}>\n      <Card variant=\"elevated\" padding=\"large\" className={styles['login-card']}>\n        {/* Header */}\n        <div className={styles['login-header']}>\n          <Heading level=\"h1\" gutterBottom>\n            Welcome Back\n          </Heading>\n          <p className={styles['subtitle']}>\n            Sign in to your Course Creator Platform account\n          </p>\n        </div>\n\n        {/* Login Form */}\n        <form onSubmit={handleSubmit} className={styles['login-form']}>\n          {/* Error Message */}\n          {error && (\n            <div className={styles['error-message']} role=\"alert\">\n              {error}\n            </div>\n          )}\n\n          {/* Email or Username Input */}\n          <div className={styles['form-group']}>\n            <Input\n              type=\"text\"\n              label=\"Email or Username\"\n              value={identifier}\n              onChange={(e) => setIdentifier(e.target.value)}\n              placeholder=\"you@example.com or username\"\n              disabled={isLoading}\n              autoComplete=\"username\"\n              required\n              fullWidth\n            />\n          </div>\n\n          {/* Password Input */}\n          <div className={styles['form-group']}>\n            <Input\n              type=\"password\"\n              label=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Enter your password\"\n              disabled={isLoading}\n              autoComplete=\"current-password\"\n              required\n              fullWidth\n              showPasswordToggle\n            />\n          </div>\n\n          {/* Remember Me & Forgot Password */}\n          <div className={styles['form-options']}>\n            <label className={styles['checkbox-label']}>\n              <input\n                type=\"checkbox\"\n                checked={rememberMe}\n                onChange={(e) => setRememberMe(e.target.checked)}\n                disabled={isLoading}\n              />\n              <span>Remember me</span>\n            </label>\n\n            <Link\n              to=\"/forgot-password\"\n              className={styles['forgot-password-link']}\n            >\n              Forgot password?\n            </Link>\n          </div>\n\n          {/* Submit Button */}\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            size=\"large\"\n            fullWidth\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <>\n                <Spinner size=\"small\" />\n                Signing in...\n              </>\n            ) : (\n              'Sign In'\n            )}\n          </Button>\n        </form>\n\n        {/* Divider */}\n        <div className={styles['divider']}>\n          <span>or</span>\n        </div>\n\n        {/* Register Link */}\n        <div className={styles['register-section']}>\n          <p className={styles['register-text']}>\n            Don't have an account?{' '}\n            <Link to=\"/register\" className={styles['register-link']}>\n              Sign up now\n            </Link>\n          </p>\n        </div>\n\n        {/* Demo Credentials */}\n        <Card variant=\"outlined\" padding=\"small\" className={styles['demo-info']}>\n          <Heading level=\"h5\" gutterBottom>\n            Demo Credentials\n          </Heading>\n          <div className={styles['demo-credentials']}>\n            <div>\n              <strong>Instructor:</strong> instructor@example.com / password123\n            </div>\n            <div>\n              <strong>Org Admin:</strong> orgadmin@example.com / password123\n            </div>\n            <div>\n              <strong>Student:</strong> student@example.com / password123\n            </div>\n          </div>\n        </Card>\n      </Card>\n    </div>\n  );\n};\n"],"names":["LoginPage","login","isLoading","useAuth","useNavigate","identifier","setIdentifier","useState","password","setPassword","showPassword","setShowPassword","rememberMe","setRememberMe","error","setError","handleSubmit","e","err","jsx","styles","jsxs","Card","Heading","Input","Link","Button","Fragment","Spinner"],"mappings":"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"}