import{j as e}from"./query-vendor-D-Supqfh.js";import{u as y,c as C,a as o,L as i}from"./react-vendor-DF6vRnOe.js";import{u as M,B as N}from"./index-DRoPcouX.js";const $="_navbar_1mabu_20",a={navbar:$,"navbar-container":"_navbar-container_1mabu_35","navbar-logo":"_navbar-logo_1mabu_50","logo-text":"_logo-text_1mabu_64","navbar-links":"_navbar-links_1mabu_76","nav-link":"_nav-link_1mabu_85","nav-link-active":"_nav-link-active_1mabu_112","navbar-right":"_navbar-right_1mabu_139","user-menu-container":"_user-menu-container_1mabu_150","user-menu-trigger":"_user-menu-trigger_1mabu_154","user-avatar":"_user-avatar_1mabu_181","user-avatar-placeholder":"_user-avatar-placeholder_1mabu_188","user-name":"_user-name_1mabu_208","dropdown-icon":"_dropdown-icon_1mabu_218","user-dropdown":"_user-dropdown_1mabu_228","user-info":"_user-info_1mabu_261","user-info-name":"_user-info-name_1mabu_265","user-info-email":"_user-info-email_1mabu_272","user-info-role":"_user-info-role_1mabu_279","dropdown-divider":"_dropdown-divider_1mabu_287","dropdown-item":"_dropdown-item_1mabu_293","dropdown-item-button":"_dropdown-item-button_1mabu_313","mobile-menu-toggle":"_mobile-menu-toggle_1mabu_342","mobile-menu":"_mobile-menu_1mabu_342","mobile-menu-link":"_mobile-menu-link_1mabu_383","mobile-menu-link-active":"_mobile-menu-link-active_1mabu_406"},U=({logo:l="Course Creator",className:b})=>{const{user:r,isAuthenticated:d,logout:h}=M(),k=y(),f=C(),[u,v]=o.useState(!1),[t,m]=o.useState(!1),p=o.useRef(null),x=o.useRef(null);o.useEffect(()=>{const s=n=>{n.key==="Escape"&&(t&&(m(!1),x.current?.focus()),u&&v(!1))};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t,u]),o.useEffect(()=>{const s=n=>{p.current&&!p.current.contains(n.target)&&m(!1)};if(t)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t]);const j=o.useMemo(()=>s=>{const n=f.pathname;return n===s?!0:s==="/dashboard"?n.startsWith("/dashboard"):!!(s!=="/"&&n.startsWith(s+"/"))},[f.pathname]),w=()=>{h(),k("/login")},_=(()=>{if(!d||!r)return[];const s=[{to:"/dashboard",label:"Dashboard"}];switch(r.role){case"site_admin":return[...s,{to:"/admin/organizations",label:"Organizations"},{to:"/admin/users",label:"Users"},{to:"/admin/analytics",label:"Analytics"}];case"org_admin":return[...s,{to:"/organization/members",label:"Members"},{to:"/organization/courses",label:"Courses"},{to:"/organization/analytics",label:"Analytics"}];case"instructor":return[...s,{to:"/courses",label:"My Courses"},{to:"/students",label:"Students"},{to:"/analytics",label:"Analytics"}];case"student":return[...s,{to:"/courses/my-courses",label:"My Courses"},{to:"/labs",label:"Labs"},{to:"/progress",label:"Progress"}];default:return s}})(),g=()=>r?r.firstName&&r.lastName?`${r.firstName} ${r.lastName}`:r.username:"",L=()=>r?r.firstName&&r.lastName?`${r.firstName[0]}${r.lastName[0]}`.toUpperCase():r.username[0].toUpperCase():"?";return e.jsxs("nav",{className:`${a.navbar} ${b||""}`,children:[e.jsxs("div",{className:a["navbar-container"],children:[e.jsx(i,{to:"/",className:a["navbar-logo"],children:typeof l=="string"?e.jsx("span",{className:a["logo-text"],children:l}):l}),d&&_.length>0&&e.jsx("div",{className:a["navbar-links"],children:_.map(s=>{const n=j(s.to);return e.jsx(i,{to:s.to,className:`${a["nav-link"]} ${n?a["nav-link-active"]:""}`,"aria-current":n?"page":void 0,children:s.label},s.to)})}),e.jsx("div",{className:a["navbar-right"],children:d&&r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:p,className:a["user-menu-container"],children:[e.jsxs("button",{ref:x,className:a["user-menu-trigger"],onClick:()=>m(!t),"aria-label":"User menu","aria-expanded":t,"aria-haspopup":"true",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:g(),className:a["user-avatar"]}):e.jsx("div",{className:a["user-avatar-placeholder"],children:L()}),e.jsx("span",{className:a["user-name"],children:g()}),e.jsx("svg",{className:a["dropdown-icon"],width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),t&&e.jsxs("div",{className:a["user-dropdown"],children:[e.jsxs("div",{className:a["user-info"],children:[e.jsx("div",{className:a["user-info-name"],children:g()}),e.jsx("div",{className:a["user-info-email"],children:r.email}),e.jsx("div",{className:a["user-info-role"],children:r.role.replace("_"," ").toUpperCase()})]}),e.jsx("div",{className:a["dropdown-divider"]}),e.jsx(i,{to:"/settings",className:a["dropdown-item"],onClick:()=>m(!1),children:"Settings"}),e.jsx(i,{to:"/profile",className:a["dropdown-item"],onClick:()=>m(!1),children:"Profile"}),e.jsx("div",{className:a["dropdown-divider"]}),e.jsx("button",{className:a["dropdown-item-button"],onClick:w,children:"Logout"})]})]}),e.jsx("button",{className:a["mobile-menu-toggle"],onClick:()=>v(!u),"aria-label":"Toggle mobile menu","aria-expanded":u,children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:u?e.jsx("path",{d:"M6 18L18 6M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}):e.jsx("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{to:"/login",children:e.jsx(N,{variant:"ghost",size:"medium",children:"Login"})}),e.jsx(i,{to:"/register",children:e.jsx(N,{variant:"primary",size:"medium",children:"Sign Up"})})]})})]}),d&&u&&_.length>0&&e.jsx("div",{className:a["mobile-menu"],children:_.map(s=>{const n=j(s.to);return e.jsx(i,{to:s.to,className:`${a["mobile-menu-link"]} ${n?a["mobile-menu-link-active"]:""}`,onClick:()=>v(!1),"aria-current":n?"page":void 0,children:s.label},s.to)})})]})},c={"dashboard-layout":"_dashboard-layout_9ti9k_19","dashboard-container":"_dashboard-container_9ti9k_29","dashboard-main":"_dashboard-main_9ti9k_35","dashboard-with-sidebar":"_dashboard-with-sidebar_9ti9k_46","dashboard-sidebar":"_dashboard-sidebar_9ti9k_53","dashboard-content":"_dashboard-content_9ti9k_70"},D=({children:l,sidebar:b,maxWidth:r="1440px",logo:d,className:h})=>e.jsxs("div",{className:`${c["dashboard-layout"]} ${h||""}`,children:[e.jsx(U,{logo:d}),e.jsx("div",{className:c["dashboard-container"],children:e.jsx("main",{className:c["dashboard-main"],style:{maxWidth:r},children:b?e.jsxs("div",{className:c["dashboard-with-sidebar"],children:[e.jsx("aside",{className:c["dashboard-sidebar"],children:b}),e.jsx("div",{className:c["dashboard-content"],children:l})]}):l})})]});export{D};
//# sourceMappingURL=DashboardLayout-nEWu0G2I.js.map
