{"version":3,"file":"ResourcesPage-BFWOwsDj.js","sources":["../../src/pages/ResourcesPage.tsx"],"sourcesContent":["/**\n * Resources Page\n *\n * BUSINESS CONTEXT:\n * Student-facing page to browse and download learning resources\n * from their enrolled courses. Includes course materials, videos,\n * documentation, and downloadable assets.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Fetches resources from student's enrolled courses\n * - Categorizes by type (video, document, code, etc.)\n * - Download functionality with progress tracking\n * - Search and filter capabilities\n */\n\nimport React, { useState, useMemo } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { DashboardLayout } from '../components/templates/DashboardLayout';\nimport { Card } from '../components/atoms/Card';\nimport { Button } from '../components/atoms/Button';\nimport { Heading } from '../components/atoms/Heading';\nimport { Spinner } from '../components/atoms/Spinner';\nimport { Input } from '../components/atoms/Input';\nimport { apiClient } from '../services/apiClient';\n\ninterface Resource {\n  id: string;\n  title: string;\n  description: string;\n  type: 'video' | 'document' | 'code' | 'slides' | 'dataset' | 'other';\n  course_id: string;\n  course_title: string;\n  file_url: string;\n  file_size_bytes: number;\n  format: string;\n  created_at: string;\n}\n\ninterface ResourcesResponse {\n  resources: Resource[];\n  total: number;\n}\n\n/**\n * Resources Page Component\n *\n * WHY THIS APPROACH:\n * - Organized by resource type for easy navigation\n * - Download-focused with file size indicators\n * - Search functionality for large resource libraries\n * - Course filtering for targeted browsing\n */\nexport const ResourcesPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const downloadMode = searchParams.get('download') === 'true';\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedType, setSelectedType] = useState<string>('all');\n  const [downloadingIds, setDownloadingIds] = useState<Set<string>>(new Set());\n\n  /**\n   * Fetch student's resources from enrolled courses\n   */\n  const { data, isLoading, error } = useQuery<ResourcesResponse>({\n    queryKey: ['studentResources'],\n    queryFn: async () => {\n      const response = await apiClient.get<ResourcesResponse>('/api/v1/resources/my-resources');\n      return response.data;\n    },\n    staleTime: 5 * 60 * 1000,\n    retry: 2,\n  });\n\n  const resources = data?.resources || [];\n\n  /**\n   * Filter resources based on search and type\n   */\n  const filteredResources = useMemo(() => {\n    return resources.filter(resource => {\n      const matchesSearch = searchTerm === '' ||\n        resource.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        resource.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        resource.course_title.toLowerCase().includes(searchTerm.toLowerCase());\n\n      const matchesType = selectedType === 'all' || resource.type === selectedType;\n\n      return matchesSearch && matchesType;\n    });\n  }, [resources, searchTerm, selectedType]);\n\n  /**\n   * Get resource type icon\n   */\n  const getTypeIcon = (type: Resource['type']) => {\n    const icons: Record<string, string> = {\n      video: 'üé•',\n      document: 'üìÑ',\n      code: 'üíª',\n      slides: 'üìä',\n      dataset: 'üìä',\n      other: 'üìÅ',\n    };\n    return icons[type] || 'üìÅ';\n  };\n\n  /**\n   * Format file size\n   */\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  /**\n   * Handle resource download\n   */\n  const handleDownload = async (resource: Resource) => {\n    setDownloadingIds(prev => new Set([...prev, resource.id]));\n\n    try {\n      const response = await apiClient.get(`/api/v1/resources/${resource.id}/download`, {\n        responseType: 'blob',\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${resource.title}.${resource.format}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      console.error('Download failed:', err);\n      alert('Download failed. Please try again.');\n    } finally {\n      setDownloadingIds(prev => {\n        const next = new Set(prev);\n        next.delete(resource.id);\n        return next;\n      });\n    }\n  };\n\n  /**\n   * Get unique resource types for filter\n   */\n  const resourceTypes = useMemo(() => {\n    const types = new Set(resources.map(r => r.type));\n    return Array.from(types);\n  }, [resources]);\n\n  if (isLoading) {\n    return (\n      <DashboardLayout>\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px' }}>\n          <Spinner size=\"large\" />\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout>\n        <main style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto' }}>\n          <Card variant=\"outlined\" padding=\"large\" style={{ textAlign: 'center' }}>\n            <p style={{ color: '#dc2626', marginBottom: '1rem' }}>\n              Unable to load resources. Please try refreshing the page.\n            </p>\n            <Button variant=\"primary\" onClick={() => window.location.reload()}>\n              Refresh Page\n            </Button>\n          </Card>\n        </main>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <main style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: '2rem' }}>\n          <Heading level=\"h1\" gutterBottom={true}>\n            {downloadMode ? 'Download Materials' : 'Learning Resources'}\n          </Heading>\n          <p style={{ color: '#666', fontSize: '0.95rem' }}>\n            {downloadMode\n              ? 'Download course materials for offline access'\n              : 'Access course materials, videos, and documentation'}\n          </p>\n        </div>\n\n        {/* Search and Filter */}\n        <Card variant=\"outlined\" padding=\"medium\" style={{ marginBottom: '1.5rem' }}>\n          <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap', alignItems: 'center' }}>\n            <div style={{ flex: 1, minWidth: '250px' }}>\n              <Input\n                type=\"search\"\n                placeholder=\"Search resources...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n              <Button\n                variant={selectedType === 'all' ? 'primary' : 'secondary'}\n                size=\"small\"\n                onClick={() => setSelectedType('all')}\n              >\n                All\n              </Button>\n              {resourceTypes.map(type => (\n                <Button\n                  key={type}\n                  variant={selectedType === type ? 'primary' : 'secondary'}\n                  size=\"small\"\n                  onClick={() => setSelectedType(type)}\n                >\n                  {getTypeIcon(type)} {type.charAt(0).toUpperCase() + type.slice(1)}\n                </Button>\n              ))}\n            </div>\n          </div>\n        </Card>\n\n        {/* Stats */}\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '1rem', marginBottom: '2rem' }}>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#3b82f6' }}>{resources.length}</div>\n              <div style={{ color: '#666', fontSize: '0.875rem' }}>Total Resources</div>\n            </div>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#10b981' }}>\n                {resources.filter(r => r.type === 'video').length}\n              </div>\n              <div style={{ color: '#666', fontSize: '0.875rem' }}>Videos</div>\n            </div>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#8b5cf6' }}>\n                {resources.filter(r => r.type === 'document').length}\n              </div>\n              <div style={{ color: '#666', fontSize: '0.875rem' }}>Documents</div>\n            </div>\n          </Card>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#f59e0b' }}>\n                {formatFileSize(resources.reduce((sum, r) => sum + r.file_size_bytes, 0))}\n              </div>\n              <div style={{ color: '#666', fontSize: '0.875rem' }}>Total Size</div>\n            </div>\n          </Card>\n        </div>\n\n        {/* Resource List */}\n        {filteredResources.length > 0 ? (\n          <div style={{ display: 'grid', gap: '1rem' }}>\n            {filteredResources.map(resource => (\n              <Card key={resource.id} variant=\"outlined\" padding=\"large\">\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', flexWrap: 'wrap', gap: '1rem' }}>\n                  <div style={{ display: 'flex', gap: '1rem', flex: 1, minWidth: '200px' }}>\n                    <div style={{ fontSize: '2.5rem' }}>{getTypeIcon(resource.type)}</div>\n                    <div>\n                      <Heading level=\"h3\" style={{ fontSize: '1.1rem', marginBottom: '0.25rem' }}>\n                        {resource.title}\n                      </Heading>\n                      <p style={{ color: '#666', fontSize: '0.875rem', marginBottom: '0.5rem' }}>\n                        {resource.description}\n                      </p>\n                      <div style={{ display: 'flex', gap: '1.5rem', fontSize: '0.75rem', color: '#666' }}>\n                        <span>üìö {resource.course_title}</span>\n                        <span>üìÅ {resource.format.toUpperCase()}</span>\n                        <span>üíæ {formatFileSize(resource.file_size_bytes)}</span>\n                        <span>üìÖ {new Date(resource.created_at).toLocaleDateString()}</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div style={{ display: 'flex', gap: '0.5rem' }}>\n                    {resource.type === 'video' ? (\n                      <Link to={`/courses/${resource.course_id}/videos/${resource.id}`}>\n                        <Button variant=\"primary\" size=\"medium\">\n                          ‚ñ∂Ô∏è Watch\n                        </Button>\n                      </Link>\n                    ) : null}\n                    <Button\n                      variant=\"secondary\"\n                      size=\"medium\"\n                      onClick={() => handleDownload(resource)}\n                      disabled={downloadingIds.has(resource.id)}\n                      data-action=\"download\"\n                    >\n                      {downloadingIds.has(resource.id) ? (\n                        <>\n                          <Spinner size=\"small\" /> Downloading...\n                        </>\n                      ) : (\n                        '‚¨áÔ∏è Download'\n                      )}\n                    </Button>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <Card variant=\"outlined\" padding=\"large\" style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>üìö</div>\n            <Heading level=\"h3\" style={{ marginBottom: '0.5rem' }}>\n              {searchTerm || selectedType !== 'all' ? 'No Resources Found' : 'No Resources Available'}\n            </Heading>\n            <p style={{ color: '#666', marginBottom: '1.5rem' }}>\n              {searchTerm || selectedType !== 'all'\n                ? 'Try adjusting your search or filters.'\n                : 'Resources will appear here once your trainer adds them to your enrolled courses.'}\n            </p>\n            {(searchTerm || selectedType !== 'all') && (\n              <Button variant=\"primary\" onClick={() => { setSearchTerm(''); setSelectedType('all'); }}>\n                Clear Filters\n              </Button>\n            )}\n          </Card>\n        )}\n      </main>\n    </DashboardLayout>\n  );\n};\n"],"names":["ResourcesPage","searchParams","useSearchParams","downloadMode","searchTerm","setSearchTerm","useState","selectedType","setSelectedType","downloadingIds","setDownloadingIds","data","isLoading","error","useQuery","apiClient","resources","filteredResources","useMemo","resource","matchesSearch","matchesType","getTypeIcon","type","formatFileSize","bytes","handleDownload","prev","response","url","link","err","next","resourceTypes","types","r","jsx","DashboardLayout","Spinner","jsxs","Card","Button","Heading","Input","e","sum","Link","Fragment"],"mappings":"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"}