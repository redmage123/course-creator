{"version":3,"file":"index-DaNZ2BGL.js","sources":["../../src/features/dashboard/pages/OrgAdminDashboard/OrgAdminDashboard.tsx"],"sourcesContent":["/**\n * Organization Admin Dashboard Page\n *\n * BUSINESS CONTEXT:\n * Main dashboard for organization administrators in corporate IT training context.\n * Manages corporate trainers (instructors), bulk student enrollments, and\n * organization-level training programs. Serves B2B customers who need to train\n * employees in graduate-level IT courses (especially AI-focused training).\n *\n * TECHNICAL IMPLEMENTATION:\n * - Uses DashboardLayout for consistent structure\n * - Fetches real organization analytics from backend API\n * - Displays organization-level training metrics\n * - Quick links to trainer and student enrollment management\n * - Loading states and error handling with React Query\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { SEO } from '../../../../components/common/SEO';\nimport { DashboardLayout } from '../../../../components/templates/DashboardLayout';\nimport { Card } from '../../../../components/atoms/Card';\nimport { Button } from '../../../../components/atoms/Button';\nimport { Heading } from '../../../../components/atoms/Heading';\nimport { Spinner } from '../../../../components/atoms/Spinner';\nimport { useAuth } from '../../../../hooks/useAuth';\nimport { analyticsService, organizationService } from '../../../../services';\nimport styles from './OrgAdminDashboard.module.css';\n\n/**\n * Organization Admin Dashboard Component\n *\n * WHY THIS APPROACH:\n * - Organization-level corporate training overview\n * - Trainer (instructor) and student enrollment management\n * - Bulk student enrollment capabilities\n * - Training program administration and compliance\n * - Real-time analytics from backend API\n */\nexport const OrgAdminDashboard: React.FC = () => {\n  const { user } = useAuth();\n\n  // SEO for Organization Admin Dashboard\n  const seoElement = (\n    <SEO\n      title=\"Organization Admin Dashboard\"\n      description=\"Manage your organization's training programs, instructors, students, and view organization-wide analytics on the Course Creator Platform.\"\n      keywords=\"org admin dashboard, organization management, training programs, instructor management, corporate training\"\n    />\n  );\n\n  /**\n   * Fetch organization data first\n   * Needed to get organization ID for analytics\n   */\n  const { data: organization, isLoading: orgLoading, error: orgError } = useQuery({\n    queryKey: ['organization', 'me'],\n    queryFn: () => organizationService.getMyOrganization(),\n    staleTime: 10 * 60 * 1000, // Cache for 10 minutes\n    retry: 2,\n  });\n\n  /**\n   * Fetch organization analytics using organization ID\n   * Dependent query - only runs after organization is fetched\n   */\n  const { data: analytics, isLoading: analyticsLoading, error: analyticsError } = useQuery({\n    queryKey: ['organizationAnalytics', organization?.id],\n    queryFn: () => analyticsService.getOrganizationAnalytics(organization!.id),\n    enabled: !!organization?.id, // Only run if organization ID is available\n    staleTime: 5 * 60 * 1000, // Cache for 5 minutes\n    retry: 2,\n  });\n\n  const displayName = user?.firstName\n    ? `${user.firstName} ${user.lastName || ''}`\n    : user?.username || 'Admin';\n\n  const orgName = organization?.name || user?.organizationName || 'Your Organization';\n\n  const isLoading = orgLoading || analyticsLoading;\n  const error = orgError || analyticsError;\n\n  /**\n   * Loading State\n   * Show spinner while fetching organization and analytics data\n   */\n  if (isLoading) {\n    return (\n      <>\n        {seoElement}\n        <DashboardLayout>\n          <div className={styles['org-admin-dashboard']}>\n            <div className={styles['welcome-section']}>\n            <Heading level=\"h1\" gutterBottom>\n              Organization Administration\n            </Heading>\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'center', padding: '4rem' }}>\n            <Spinner size=\"large\" />\n          </div>\n        </div>\n        </DashboardLayout>\n      </>\n    );\n  }\n\n  /**\n   * Error State\n   * Show error message if API call fails\n   */\n  if (error) {\n    return (\n      <>\n        {seoElement}\n        <DashboardLayout>\n        <div className={styles['org-admin-dashboard']}>\n          <div className={styles['welcome-section']}>\n            <Heading level=\"h1\" gutterBottom>\n              Organization Administration\n            </Heading>\n            <Card variant=\"outlined\" padding=\"large\">\n              <p style={{ color: 'var(--color-error)', textAlign: 'center' }}>\n                Unable to load dashboard data. Please try refreshing the page.\n              </p>\n            </Card>\n          </div>\n        </div>\n        </DashboardLayout>\n      </>\n    );\n  }\n\n  /**\n   * Success State\n   * Display real analytics data from API\n   */\n  return (\n    <>\n      {seoElement}\n      <DashboardLayout>\n      <div className={styles['org-admin-dashboard']}>\n        {/* Organization Title - Prominent at top */}\n        <div className={styles['org-header']}>\n          <div className={styles['org-title-row']}>\n            <i className=\"fas fa-building\" aria-hidden=\"true\"></i>\n            <h1 className={styles['org-title']}>{orgName}</h1>\n          </div>\n          <p className={styles['org-subtitle']}>Organization Administration Dashboard</p>\n        </div>\n\n        {/* Welcome Section */}\n        <div className={styles['welcome-section']}>\n          <p className={styles['welcome-text']}>\n            Welcome, {displayName}! Manage your corporate trainers, enroll students in IT training programs, and track organizational learning metrics.\n          </p>\n        </div>\n\n        {/* Quick Stats - Real Data from API */}\n        <div className={styles['stats-grid']}>\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div className={styles['stat-card']}>\n              <div className={styles['stat-value']}>{analytics?.total_students || 0}</div>\n              <div className={styles['stat-label']}>Enrolled Students</div>\n            </div>\n          </Card>\n\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div className={styles['stat-card']}>\n              <div className={styles['stat-value']}>{analytics?.total_training_programs || 0}</div>\n              <div className={styles['stat-label']}>Training Programs</div>\n            </div>\n          </Card>\n\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div className={styles['stat-card']}>\n              <div className={styles['stat-value']}>{analytics?.total_trainers || 0}</div>\n              <div className={styles['stat-label']}>Corporate Trainers</div>\n            </div>\n          </Card>\n\n          <Card variant=\"elevated\" padding=\"medium\">\n            <div className={styles['stat-card']}>\n              <div className={styles['stat-value']}>\n                {analytics?.engagement_rate ? Math.round(analytics.engagement_rate) : 0}%\n              </div>\n              <div className={styles['stat-label']}>Engagement Rate</div>\n            </div>\n          </Card>\n        </div>\n\n        {/* Main Content */}\n        <div className={styles['content-grid']}>\n          {/* Trainer & Student Management */}\n          <Card variant=\"elevated\" padding=\"large\">\n            <Heading level=\"h2\" gutterBottom>\n              Trainer & Student Management\n            </Heading>\n            <p className={styles['section-description']}>\n              Manage corporate trainers, organization members, enroll students in bulk, and organize learning tracks\n            </p>\n            <div className={styles['action-buttons']}>\n              <Link to=\"/organization/members\">\n                <Button variant=\"primary\" size=\"medium\">\n                  Manage Members\n                </Button>\n              </Link>\n              <Link to=\"/organization/trainers\">\n                <Button variant=\"secondary\" size=\"medium\">\n                  Manage Trainers\n                </Button>\n              </Link>\n              <Link to=\"/organization/students/enroll\">\n                <Button variant=\"secondary\" size=\"medium\">\n                  Bulk Enroll Students\n                </Button>\n              </Link>\n            </div>\n          </Card>\n\n          {/* Training Programs */}\n          <Card variant=\"elevated\" padding=\"large\">\n            <Heading level=\"h2\" gutterBottom>\n              Training Programs\n            </Heading>\n            <p className={styles['section-description']}>\n              Manage IT training courses, learning tracks, assign programs to students, and track completions\n            </p>\n            <div className={styles['action-buttons']}>\n              <Link to=\"/organization/programs\">\n                <Button variant=\"primary\" size=\"medium\">\n                  View Programs\n                </Button>\n              </Link>\n              <Link to=\"/organization/tracks\">\n                <Button variant=\"secondary\" size=\"medium\">\n                  Manage Tracks\n                </Button>\n              </Link>\n              <Link to=\"/organization/programs/create\">\n                <Button variant=\"secondary\" size=\"medium\">\n                  Create New Program\n                </Button>\n              </Link>\n            </div>\n          </Card>\n\n          {/* Import & Templates */}\n          <Card variant=\"elevated\" padding=\"large\">\n            <Heading level=\"h2\" gutterBottom>\n              Import & AI Automation\n            </Heading>\n            <p className={styles['section-description']}>\n              Import organization templates and let AI automatically create projects and tracks\n            </p>\n            <div className={styles['action-buttons']}>\n              <Link to=\"/organization/import\">\n                <Button variant=\"primary\" size=\"medium\" data-action=\"import\">\n                  Import Template\n                </Button>\n              </Link>\n              <Link to=\"/organization/ai-create\">\n                <Button variant=\"secondary\" size=\"medium\" data-action=\"ai-create-project\">\n                  AI Auto Create Project\n                </Button>\n              </Link>\n              <Link to=\"/organization/templates/download\">\n                <Button variant=\"secondary\" size=\"medium\" data-action=\"download-template\">\n                  Download Template\n                </Button>\n              </Link>\n            </div>\n          </Card>\n\n          {/* Training Analytics */}\n          <Card variant=\"elevated\" padding=\"large\">\n            <Heading level=\"h2\" gutterBottom>\n              Training Analytics & Compliance\n            </Heading>\n            <p className={styles['section-description']}>\n              Track training completion rates, certifications, and compliance metrics\n            </p>\n            <div className={styles['action-buttons']}>\n              <Link to=\"/organization/analytics\">\n                <Button variant=\"primary\" size=\"medium\">\n                  View Reports\n                </Button>\n              </Link>\n            </div>\n          </Card>\n\n          {/* Settings */}\n          <Card variant=\"elevated\" padding=\"large\">\n            <Heading level=\"h2\" gutterBottom>\n              Organization Settings\n            </Heading>\n            <p className={styles['section-description']}>\n              Configure branding, billing, and organizational preferences\n            </p>\n            <div className={styles['action-buttons']}>\n              <Link to=\"/organization/settings\">\n                <Button variant=\"secondary\" size=\"medium\">\n                  Manage Settings\n                </Button>\n              </Link>\n            </div>\n          </Card>\n        </div>\n      </div>\n      </DashboardLayout>\n    </>\n  );\n};\n"],"names":["OrgAdminDashboard","user","useAuth","seoElement","jsx","SEO","organization","orgLoading","orgError","useQuery","organizationService","analytics","analyticsLoading","analyticsError","analyticsService","displayName","orgName","isLoading","error","jsxs","Fragment","DashboardLayout","styles","Heading","Spinner","Card","Link","Button"],"mappings":"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"}