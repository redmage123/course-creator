{"version":3,"file":"OrganizationRegistration-C0rzscRu.js","sources":["../../src/pages/OrganizationRegistration.tsx"],"sourcesContent":["/**\n * Organization Registration Page\n *\n * BUSINESS CONTEXT:\n * Public self-service registration for organizations to join the platform.\n * After registration, the admin user is auto-logged in and redirected to org admin dashboard.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Multi-section form with validation\n * - File upload for organization logo\n * - Auto-generates slug from organization name\n * - Creates organization + admin account in single transaction\n * - JWT token auto-stored after successful registration\n *\n * SECURITY:\n * - Password strength requirements\n * - Email validation\n * - Duplicate org name/slug detection\n * - CSRF protection via API client\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Card } from '../components/atoms/Card';\nimport { Button } from '../components/atoms/Button';\nimport { Heading } from '../components/atoms/Heading';\nimport { Input } from '../components/atoms/Input';\nimport { Textarea } from '../components/atoms/Textarea';\nimport { Select } from '../components/atoms/Select';\nimport { Spinner } from '../components/atoms/Spinner';\nimport { organizationService } from '../services/organizationService';\nimport { authService } from '../services/authService';\nimport styles from './OrganizationRegistration.module.css';\n\n/**\n * Organization Registration Form Data Interface\n */\ninterface OrganizationRegistrationForm {\n  // Organization Details\n  name: string;\n  slug: string;\n  description: string;\n  domain: string;\n  logo: File | null;\n\n  // Organization Address\n  street_address: string;\n  city: string;\n  state_province: string;\n  postal_code: string;\n  country: string;\n\n  // Contact Information\n  contact_phone_country: string;\n  contact_phone: string;\n  contact_email: string;\n\n  // Admin Account\n  admin_full_name: string;\n  admin_username: string;\n  admin_email: string;\n  admin_password: string;\n  admin_password_confirm: string;\n\n  // Terms & Conditions\n  terms_accepted: boolean;\n  privacy_accepted: boolean;\n}\n\n/**\n * Form Validation Errors Interface\n */\ninterface FormErrors {\n  [key: string]: string;\n}\n\n/**\n * Organization Registration Page Component\n *\n * WHY THIS APPROACH:\n * - Multi-section form for better UX (organization, contact, admin, terms)\n * - Real-time validation feedback\n * - Auto-slug generation from organization name\n * - Logo preview before upload\n * - Comprehensive error handling\n */\nexport const OrganizationRegistration: React.FC = () => {\n  const navigate = useNavigate();\n  const logoInputRef = useRef<HTMLInputElement>(null);\n\n  // Form state\n  const [formData, setFormData] = useState<OrganizationRegistrationForm>({\n    name: '',\n    slug: '',\n    description: '',\n    domain: '',\n    logo: null,\n    street_address: '',\n    city: '',\n    state_province: '',\n    postal_code: '',\n    country: '',\n    contact_phone_country: '+1',\n    contact_phone: '',\n    contact_email: '',\n    admin_full_name: '',\n    admin_username: '',\n    admin_email: '',\n    admin_password: '',\n    admin_password_confirm: '',\n    terms_accepted: false,\n    privacy_accepted: false,\n  });\n\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [slugGenerated, setSlugGenerated] = useState(false);\n\n  /**\n   * Auto-generate slug from organization name\n   */\n  useEffect(() => {\n    if (formData.name && !slugGenerated) {\n      const generatedSlug = formData.name\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '');\n\n      setFormData(prev => ({ ...prev, slug: generatedSlug }));\n    }\n  }, [formData.name, slugGenerated]);\n\n  /**\n   * Handle input changes\n   */\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\n  ) => {\n    const { name, value, type } = e.target;\n    const checked = (e.target as HTMLInputElement).checked;\n\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n\n    // Clear error for this field when user starts typing\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n\n    // If user manually edits slug, mark as manually edited\n    if (name === 'slug') {\n      setSlugGenerated(true);\n    }\n  };\n\n  /**\n   * Handle Select component changes\n   * Select components pass value directly, not as an event\n   */\n  const handleSelectChange = (name: string) => (value: string | string[]) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n\n    // Clear error for this field\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  /**\n   * Handle logo file selection\n   */\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n\n    if (file) {\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        setErrors(prev => ({ ...prev, logo: 'Please select an image file' }));\n        return;\n      }\n\n      // Validate file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        setErrors(prev => ({ ...prev, logo: 'Logo file must be less than 5MB' }));\n        return;\n      }\n\n      setFormData(prev => ({ ...prev, logo: file }));\n\n      // Generate preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setLogoPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      // Clear logo error\n      if (errors.logo) {\n        setErrors(prev => {\n          const newErrors = { ...prev };\n          delete newErrors.logo;\n          return newErrors;\n        });\n      }\n    }\n  };\n\n  /**\n   * Remove selected logo\n   */\n  const handleRemoveLogo = () => {\n    setFormData(prev => ({ ...prev, logo: null }));\n    setLogoPreview(null);\n    if (logoInputRef.current) {\n      logoInputRef.current.value = '';\n    }\n  };\n\n  /**\n   * Validate form fields\n   */\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    // Required organization fields\n    if (!formData.name.trim()) {\n      newErrors.name = 'Organization name is required';\n    }\n    if (!formData.slug.trim()) {\n      newErrors.slug = 'Organization slug is required';\n    }\n    if (!formData.domain.trim()) {\n      newErrors.domain = 'Organization domain is required';\n    }\n    if (!formData.country) {\n      newErrors.country = 'Country is required';\n    }\n\n    // Required contact fields\n    if (!formData.contact_email.trim()) {\n      newErrors.contact_email = 'Contact email is required';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.contact_email)) {\n      newErrors.contact_email = 'Invalid email format';\n    }\n\n    // Required admin fields\n    if (!formData.admin_full_name.trim()) {\n      newErrors.admin_full_name = 'Admin name is required';\n    }\n    if (!formData.admin_username.trim()) {\n      newErrors.admin_username = 'Admin username is required';\n    }\n    if (!formData.admin_email.trim()) {\n      newErrors.admin_email = 'Admin email is required';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.admin_email)) {\n      newErrors.admin_email = 'Invalid email format';\n    }\n\n    // Password validation\n    if (!formData.admin_password) {\n      newErrors.admin_password = 'Password is required';\n    } else if (formData.admin_password.length < 8) {\n      newErrors.admin_password = 'Password must be at least 8 characters';\n    } else if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(formData.admin_password)) {\n      newErrors.admin_password = 'Password must contain uppercase, lowercase, and number';\n    }\n\n    if (formData.admin_password !== formData.admin_password_confirm) {\n      newErrors.admin_password_confirm = 'Passwords do not match';\n    }\n\n    // Terms acceptance\n    if (!formData.terms_accepted) {\n      newErrors.terms_accepted = 'You must accept the Terms of Service';\n    }\n    if (!formData.privacy_accepted) {\n      newErrors.privacy_accepted = 'You must accept the Privacy Policy';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      setSubmitError('Please fix the errors above before submitting');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setSubmitError(null);\n\n    try {\n      // Create FormData for file upload\n      const submitData = new FormData();\n\n      // Append organization fields\n      submitData.append('name', formData.name);\n      submitData.append('slug', formData.slug);\n      submitData.append('description', formData.description);\n      submitData.append('domain', formData.domain);\n      if (formData.logo) {\n        submitData.append('logo', formData.logo);\n      }\n\n      // Append address fields\n      submitData.append('street_address', formData.street_address);\n      submitData.append('city', formData.city);\n      submitData.append('state_province', formData.state_province);\n      submitData.append('postal_code', formData.postal_code);\n      submitData.append('country', formData.country);\n\n      // Append contact fields\n      submitData.append('contact_phone_country', formData.contact_phone_country);\n      submitData.append('contact_phone', formData.contact_phone);\n      submitData.append('contact_email', formData.contact_email);\n\n      // Append admin fields\n      submitData.append('admin_full_name', formData.admin_full_name);\n      submitData.append('admin_username', formData.admin_username);\n      submitData.append('admin_email', formData.admin_email);\n      submitData.append('admin_password', formData.admin_password);\n\n      // Call organization registration API\n      const response = await organizationService.registerOrganization(submitData);\n\n      // Registration successful - redirect to login page\n      // Note: Backend creates admin user but doesn't return access token for security\n      // User must log in manually with the credentials they provided\n      navigate('/login?message=registration_success');\n    } catch (error: any) {\n      console.error('Organization registration error:', error);\n\n      if (error.response?.data?.detail) {\n        setSubmitError(error.response.data.detail);\n      } else if (error.response?.data?.message) {\n        setSubmitError(error.response.data.message);\n      } else {\n        setSubmitError('Failed to register organization. Please try again.');\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className={styles.registrationContainer}>\n      <Link to=\"/\" className={styles.backLink}>\n        <i className=\"fas fa-arrow-left\"></i>\n        Back to Homepage\n      </Link>\n\n      <Card className={styles.registrationCard}>\n        <div className={styles.registrationHeader}>\n          <Heading level=\"h1\" className={styles.title}>\n            Register Your Organization\n          </Heading>\n          <p className={styles.subtitle}>\n            Join the Course Creator Platform and start delivering world-class training programs\n          </p>\n          <div className={styles.professionalBadge}>\n            <i className=\"fas fa-check-circle\"></i>\n            Professional Training Platform\n          </div>\n        </div>\n\n        <form onSubmit={handleSubmit} className={styles.form}>\n          {/* Organization Details Section */}\n          <div className={styles.formSection}>\n            <div className={styles.sectionTitle}>\n              <i className=\"fas fa-building\"></i>\n              Organization Details\n            </div>\n\n            <div className={styles.formGrid}>\n              <Input\n                label=\"Organization Name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleInputChange}\n                error={errors.name}\n                required\n                placeholder=\"Enter your organization name\"\n              />\n\n              <Input\n                label=\"Organization Slug\"\n                name=\"slug\"\n                value={formData.slug}\n                onChange={handleInputChange}\n                error={errors.slug}\n                required\n                placeholder=\"organization-slug\"\n                helpText=\"Used in URLs. Auto-generated from name.\"\n              />\n            </div>\n\n            <div className={styles.formGridSingle}>\n              <Textarea\n                label=\"Organization Description\"\n                name=\"description\"\n                value={formData.description}\n                onChange={handleInputChange}\n                error={errors.description}\n                placeholder=\"Brief description of your organization\"\n                helpText=\"Optional: Tell us about your organization\"\n              />\n\n              <Input\n                label=\"Organization Domain\"\n                name=\"domain\"\n                value={formData.domain}\n                onChange={handleInputChange}\n                error={errors.domain}\n                required\n                placeholder=\"example.com\"\n                helpText=\"Your organization's website domain\"\n              />\n            </div>\n\n            {/* Logo Upload */}\n            <div className={styles.formGroup}>\n              <label className={styles.formLabel}>\n                Organization Logo\n                <span className={styles.optional}>(Optional)</span>\n              </label>\n\n              <div className={styles.logoUploadArea} onClick={() => logoInputRef.current?.click()}>\n                {logoPreview ? (\n                  <div className={styles.logoPreview}>\n                    <img src={logoPreview} alt=\"Logo preview\" className={styles.previewImage} />\n                    <Button\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleRemoveLogo();\n                      }}\n                      variant=\"danger\"\n                      size=\"small\"\n                      className={styles.removeLogo}\n                    >\n                      <i className=\"fas fa-times\"></i>\n                      Remove\n                    </Button>\n                  </div>\n                ) : (\n                  <div className={styles.uploadPlaceholder}>\n                    <i className=\"fas fa-cloud-upload-alt fa-3x\"></i>\n                    <p>Click to upload logo or drag and drop</p>\n                    <small>PNG, JPG, GIF up to 5MB</small>\n                  </div>\n                )}\n              </div>\n\n              <input\n                ref={logoInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleLogoChange}\n                className={styles.hiddenFileInput}\n              />\n\n              {errors.logo && <p className={styles.error}>{errors.logo}</p>}\n            </div>\n          </div>\n\n          {/* Organization Address Section */}\n          <div className={styles.formSection}>\n            <div className={styles.sectionTitle}>\n              <i className=\"fas fa-map-marker-alt\"></i>\n              Organization Address\n            </div>\n\n            <div className={styles.formGridSingle}>\n              <Input\n                label=\"Street Address\"\n                name=\"street_address\"\n                value={formData.street_address}\n                onChange={handleInputChange}\n                error={errors.street_address}\n                placeholder=\"Street address\"\n              />\n            </div>\n\n            <div className={styles.formGrid}>\n              <Input\n                label=\"City\"\n                name=\"city\"\n                value={formData.city}\n                onChange={handleInputChange}\n                error={errors.city}\n                placeholder=\"City\"\n              />\n\n              <Input\n                label=\"State/Province\"\n                name=\"state_province\"\n                value={formData.state_province}\n                onChange={handleInputChange}\n                error={errors.state_province}\n                placeholder=\"State or Province\"\n              />\n\n              <Input\n                label=\"Postal Code\"\n                name=\"postal_code\"\n                value={formData.postal_code}\n                onChange={handleInputChange}\n                error={errors.postal_code}\n                placeholder=\"Postal code\"\n              />\n\n              <Select\n                label=\"Country\"\n                name=\"country\"\n                value={formData.country}\n                onChange={handleSelectChange('country')}\n                error={errors.country}\n                required\n                options={[\n                  { value: '', label: 'Select Country' },\n                  { value: 'US', label: 'United States' },\n                  { value: 'CA', label: 'Canada' },\n                  { value: 'GB', label: 'United Kingdom' },\n                  { value: 'AU', label: 'Australia' },\n                  { value: 'DE', label: 'Germany' },\n                  { value: 'FR', label: 'France' },\n                  { value: 'IN', label: 'India' },\n                  { value: 'JP', label: 'Japan' },\n                  { value: 'Other', label: 'Other' },\n                ]}\n              />\n            </div>\n          </div>\n\n          {/* Contact Information Section */}\n          <div className={styles.formSection}>\n            <div className={styles.sectionTitle}>\n              <i className=\"fas fa-phone\"></i>\n              Contact Information\n            </div>\n\n            <div className={styles.formGrid}>\n              <div className={styles.phoneGroup}>\n                <Select\n                  label=\"Phone Country\"\n                  name=\"contact_phone_country\"\n                  value={formData.contact_phone_country}\n                  onChange={handleSelectChange('contact_phone_country')}\n                  required\n                  options={[\n                    { value: '+1', label: '+1 (US/CA)' },\n                    { value: '+44', label: '+44 (UK)' },\n                    { value: '+61', label: '+61 (AU)' },\n                    { value: '+49', label: '+49 (DE)' },\n                    { value: '+33', label: '+33 (FR)' },\n                    { value: '+91', label: '+91 (IN)' },\n                    { value: '+81', label: '+81 (JP)' },\n                  ]}\n                  className={styles.countryCodeSelect}\n                />\n\n                <Input\n                  label=\"Phone Number\"\n                  name=\"contact_phone\"\n                  value={formData.contact_phone}\n                  onChange={handleInputChange}\n                  error={errors.contact_phone}\n                  placeholder=\"Phone number\"\n                  type=\"tel\"\n                />\n              </div>\n\n              <Input\n                label=\"Contact Email\"\n                name=\"contact_email\"\n                value={formData.contact_email}\n                onChange={handleInputChange}\n                error={errors.contact_email}\n                required\n                placeholder=\"contact@example.com\"\n                type=\"email\"\n              />\n            </div>\n          </div>\n\n          {/* Admin Account Section */}\n          <div className={styles.formSection}>\n            <div className={styles.sectionTitle}>\n              <i className=\"fas fa-user-shield\"></i>\n              Administrator Account\n            </div>\n\n            <p className={styles.sectionDescription}>\n              Create the primary administrator account for your organization. This account will have full access to manage users, courses, and settings.\n            </p>\n\n            <div className={styles.formGrid}>\n              <Input\n                label=\"Full Name\"\n                name=\"admin_full_name\"\n                value={formData.admin_full_name}\n                onChange={handleInputChange}\n                error={errors.admin_full_name}\n                required\n                placeholder=\"John Doe\"\n              />\n\n              <Input\n                label=\"Username\"\n                name=\"admin_username\"\n                value={formData.admin_username}\n                onChange={handleInputChange}\n                error={errors.admin_username}\n                required\n                placeholder=\"admin_username\"\n              />\n\n              <Input\n                label=\"Email\"\n                name=\"admin_email\"\n                value={formData.admin_email}\n                onChange={handleInputChange}\n                error={errors.admin_email}\n                required\n                placeholder=\"admin@example.com\"\n                type=\"email\"\n              />\n\n              <div></div> {/* Empty grid cell for layout */}\n\n              <Input\n                label=\"Password\"\n                name=\"admin_password\"\n                value={formData.admin_password}\n                onChange={handleInputChange}\n                error={errors.admin_password}\n                required\n                placeholder=\"Create a strong password\"\n                type=\"password\"\n                helpText=\"Min 8 chars, uppercase, lowercase, and number\"\n              />\n\n              <Input\n                label=\"Confirm Password\"\n                name=\"admin_password_confirm\"\n                value={formData.admin_password_confirm}\n                onChange={handleInputChange}\n                error={errors.admin_password_confirm}\n                required\n                placeholder=\"Confirm your password\"\n                type=\"password\"\n              />\n            </div>\n          </div>\n\n          {/* Terms & Conditions */}\n          <div className={styles.formSection}>\n            <div className={styles.sectionTitle}>\n              <i className=\"fas fa-file-contract\"></i>\n              Terms & Conditions\n            </div>\n\n            <div className={styles.checkboxGroup}>\n              <label className={styles.checkboxLabel}>\n                <input\n                  type=\"checkbox\"\n                  name=\"terms_accepted\"\n                  checked={formData.terms_accepted}\n                  onChange={handleInputChange}\n                  className={styles.checkbox}\n                />\n                <span>\n                  I accept the <a href=\"/terms\" target=\"_blank\" rel=\"noopener noreferrer\">Terms of Service</a>\n                  <span className={styles.required}>*</span>\n                </span>\n              </label>\n              {errors.terms_accepted && <p className={styles.error}>{errors.terms_accepted}</p>}\n\n              <label className={styles.checkboxLabel}>\n                <input\n                  type=\"checkbox\"\n                  name=\"privacy_accepted\"\n                  checked={formData.privacy_accepted}\n                  onChange={handleInputChange}\n                  className={styles.checkbox}\n                />\n                <span>\n                  I accept the <a href=\"/privacy\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>\n                  <span className={styles.required}>*</span>\n                </span>\n              </label>\n              {errors.privacy_accepted && <p className={styles.error}>{errors.privacy_accepted}</p>}\n            </div>\n          </div>\n\n          {/* Submit Section */}\n          <div className={styles.submitSection}>\n            {submitError && (\n              <div className={styles.submitError}>\n                <i className=\"fas fa-exclamation-circle\"></i>\n                {submitError}\n              </div>\n            )}\n\n            <Button\n              type=\"submit\"\n              variant=\"primary\"\n              size=\"large\"\n              disabled={isSubmitting}\n              className={styles.submitButton}\n            >\n              {isSubmitting ? (\n                <>\n                  <Spinner size=\"small\" />\n                  Creating Organization...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-check-circle\"></i>\n                  Complete Registration\n                </>\n              )}\n            </Button>\n\n            <p className={styles.loginLink}>\n              Already have an account? <Link to=\"/login\">Sign in here</Link>\n            </p>\n          </div>\n        </form>\n      </Card>\n    </div>\n  );\n};\n"],"names":["OrganizationRegistration","navigate","useNavigate","logoInputRef","useRef","formData","setFormData","useState","errors","setErrors","logoPreview","setLogoPreview","isSubmitting","setIsSubmitting","submitError","setSubmitError","slugGenerated","setSlugGenerated","useEffect","generatedSlug","prev","handleInputChange","e","name","value","type","checked","newErrors","handleSelectChange","handleLogoChange","file","reader","handleRemoveLogo","validateForm","handleSubmit","submitData","response","organizationService","error","jsxs","styles","Link","jsx","Card","Heading","Input","Textarea","Button","Select","Fragment","Spinner"],"mappings":"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"}