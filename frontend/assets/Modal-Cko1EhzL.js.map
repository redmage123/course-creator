{"version":3,"file":"Modal-Cko1EhzL.js","sources":["../../src/components/atoms/Modal/Modal.tsx"],"sourcesContent":["/**\n * Modal Component - Tami Design System\n *\n * BUSINESS CONTEXT:\n * Dialog component for confirmations, forms, and important messages across the platform.\n * Used for course creation, user registration, settings, and critical user actions.\n *\n * TECHNICAL IMPLEMENTATION:\n * React Portal-based modal with focus trap, keyboard navigation, and backdrop.\n * Includes accessibility features (ARIA, focus management, ESC key handling).\n *\n * DESIGN PRINCIPLES:\n * - Uses platform blue (#2563eb) for primary actions\n * - 12px border radius for modal container\n * - Smooth fade-in/fade-out animations\n * - Focus trap keeps keyboard navigation within modal\n * - WCAG 2.1 AA+ compliant\n */\n\nimport React, { useEffect, useRef, ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nexport type ModalSize = 'small' | 'medium' | 'large' | 'fullscreen';\n\nexport interface ModalProps {\n  /**\n   * Whether modal is open\n   */\n  isOpen: boolean;\n\n  /**\n   * Callback when modal should close\n   */\n  onClose: () => void;\n\n  /**\n   * Modal title\n   */\n  title?: string;\n\n  /**\n   * Modal content\n   */\n  children: ReactNode;\n\n  /**\n   * Modal footer (typically action buttons)\n   */\n  footer?: ReactNode;\n\n  /**\n   * Modal size\n   * - small: 400px max width\n   * - medium: 600px max width (default)\n   * - large: 800px max width\n   * - fullscreen: 90% viewport\n   */\n  size?: ModalSize;\n\n  /**\n   * Close modal when clicking backdrop\n   * @default true\n   */\n  closeOnBackdropClick?: boolean;\n\n  /**\n   * Close modal when pressing ESC key\n   * @default true\n   */\n  closeOnEscape?: boolean;\n\n  /**\n   * Prevent closing modal (for critical actions)\n   * @default false\n   */\n  preventClose?: boolean;\n\n  /**\n   * Custom className for modal container\n   */\n  className?: string;\n\n  /**\n   * ARIA label for accessibility\n   */\n  ariaLabel?: string;\n}\n\n/**\n * Modal Component\n *\n * WHY THIS APPROACH:\n * - React Portal renders outside DOM hierarchy (prevents z-index issues)\n * - Focus trap keeps keyboard navigation accessible\n * - ESC key handling follows standard UX patterns\n * - Body scroll lock prevents background scrolling\n * - CSS Modules prevent style conflicts\n *\n * @example\n * ```tsx\n * // Simple confirmation modal\n * <Modal isOpen={isOpen} onClose={handleClose} title=\"Confirm Action\">\n *   <p>Are you sure you want to proceed?</p>\n * </Modal>\n *\n * // Modal with footer actions\n * <Modal\n *   isOpen={isOpen}\n *   onClose={handleClose}\n *   title=\"Create Course\"\n *   footer={\n *     <>\n *       <Button variant=\"ghost\" onClick={handleClose}>Cancel</Button>\n *       <Button variant=\"primary\" onClick={handleSubmit}>Create</Button>\n *     </>\n *   }\n * >\n *   <form>...</form>\n * </Modal>\n *\n * // Large modal that cannot be closed\n * <Modal\n *   isOpen={isOpen}\n *   onClose={handleClose}\n *   size=\"large\"\n *   preventClose\n *   title=\"Important Information\"\n * >\n *   <p>Critical content that user must read</p>\n * </Modal>\n * ```\n */\nexport const Modal: React.FC<ModalProps> = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  footer,\n  size = 'medium',\n  closeOnBackdropClick = true,\n  closeOnEscape = true,\n  preventClose = false,\n  className,\n  ariaLabel,\n}) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  // Lock body scroll when modal is open\n  useEffect(() => {\n    if (isOpen) {\n      previousActiveElement.current = document.activeElement as HTMLElement;\n      document.body.style.overflow = 'hidden';\n\n      // Focus modal container\n      setTimeout(() => {\n        modalRef.current?.focus();\n      }, 100);\n\n      return () => {\n        document.body.style.overflow = '';\n        // Restore focus to previous element\n        previousActiveElement.current?.focus();\n      };\n    }\n  }, [isOpen]);\n\n  // Handle ESC key\n  useEffect(() => {\n    if (!isOpen || preventClose || !closeOnEscape) return;\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isOpen, onClose, preventClose, closeOnEscape]);\n\n  // Handle backdrop click\n  const handleBackdropClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (\n      closeOnBackdropClick &&\n      !preventClose &&\n      event.target === event.currentTarget\n    ) {\n      onClose();\n    }\n  };\n\n  // Trap focus within modal\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (event.key !== 'Tab') return;\n\n    const focusableElements = modalRef.current?.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    if (!focusableElements || focusableElements.length === 0) return;\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    if (event.shiftKey && document.activeElement === firstElement) {\n      event.preventDefault();\n      lastElement.focus();\n    } else if (!event.shiftKey && document.activeElement === lastElement) {\n      event.preventDefault();\n      firstElement.focus();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const modalClasses = [\n    styles.modal,\n    styles[`modal-${size}`],\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const modalContent = (\n    <div className={styles.backdrop} onClick={handleBackdropClick}>\n      <div\n        ref={modalRef}\n        className={modalClasses}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby={title ? 'modal-title' : undefined}\n        aria-label={ariaLabel || title}\n        tabIndex={-1}\n        onKeyDown={handleKeyDown}\n      >\n        {/* Header */}\n        {title && (\n          <div className={styles['modal-header']}>\n            <h2 id=\"modal-title\" className={styles['modal-title']}>\n              {title}\n            </h2>\n            {!preventClose && (\n              <button\n                className={styles['modal-close']}\n                onClick={onClose}\n                aria-label=\"Close modal\"\n                type=\"button\"\n              >\n                <svg\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M15 5L5 15M5 5L15 15\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                  />\n                </svg>\n              </button>\n            )}\n          </div>\n        )}\n\n        {/* Body */}\n        <div className={styles['modal-body']}>{children}</div>\n\n        {/* Footer */}\n        {footer && <div className={styles['modal-footer']}>{footer}</div>}\n      </div>\n    </div>\n  );\n\n  // Render in portal\n  return createPortal(modalContent, document.body);\n};\n\nModal.displayName = 'Modal';\n"],"names":["Modal","isOpen","onClose","title","children","footer","size","closeOnBackdropClick","closeOnEscape","preventClose","className","ariaLabel","modalRef","useRef","previousActiveElement","useEffect","handleEscape","event","handleBackdropClick","handleKeyDown","focusableElements","firstElement","lastElement","modalClasses","styles","modalContent","jsx","jsxs","createPortal"],"mappings":"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"}