import{j as s}from"./query-vendor-D-Supqfh.js";import{u as y,h as N,a as l,L as w}from"./react-vendor-DF6vRnOe.js";import{I as m}from"./Input-BNgj3fzd.js";import{H as h,C as k,B as x,b as q}from"./index-DcdZfoXS.js";import"./state-vendor-CcNjB5Go.js";const e={"reset-password-page":"_reset-password-page_12oxv_20","reset-password-container":"_reset-password-container_12oxv_34","reset-password-header":"_reset-password-header_12oxv_46","reset-password-subtitle":"_reset-password-subtitle_12oxv_51","reset-password-form":"_reset-password-form_12oxv_65","reset-password-error-banner":"_reset-password-error-banner_12oxv_75","password-requirements":"_password-requirements_12oxv_108","requirements-title":"_requirements-title_12oxv_116","requirements-list":"_requirements-list_12oxv_124","reset-password-success":"_reset-password-success_12oxv_148","success-icon":"_success-icon_12oxv_158","success-message":"_success-message_12oxv_174","success-note":"_success-note_12oxv_183","go-to-login":"_go-to-login_12oxv_192","reset-password-link":"_reset-password-link_12oxv_203","reset-password-footer":"_reset-password-footer_12oxv_229"},B=()=>{const g=y(),[f]=N(),o=f.get("token"),[a,_]=l.useState({password:"",confirmPassword:""}),[i,t]=l.useState({}),[d,u]=l.useState(!1),[v,j]=l.useState(!1);l.useEffect(()=>{o||t({submit:"Invalid or missing reset token. Please request a new password reset."})},[o]);const P=()=>{const r={};return a.password?a.password.length<8?r.password="Password must be at least 8 characters":/(?=.*[a-z])/.test(a.password)?/(?=.*[A-Z])/.test(a.password)?/(?=.*\d)/.test(a.password)||(r.password="Password must contain at least one number"):r.password="Password must contain at least one uppercase letter":r.password="Password must contain at least one lowercase letter":r.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",t(r),Object.keys(r).length===0},b=async r=>{if(r.preventDefault(),!o){t({submit:"Invalid or missing reset token. Please request a new password reset."});return}if(t(n=>({...n,submit:void 0})),!!P()){u(!0);try{await q.confirmPasswordReset({token:o,newPassword:a.password}),j(!0),g("/login")}catch(n){t({submit:n instanceof Error?n.message:"Failed to reset password. The token may be expired."})}finally{u(!1)}}},p=r=>n=>{_(c=>({...c,[r]:n.target.value})),i[r]&&t(c=>({...c,[r]:void 0}))};return s.jsx("div",{className:e["reset-password-page"],children:s.jsxs("div",{className:e["reset-password-container"],children:[s.jsxs("div",{className:e["reset-password-header"],children:[s.jsx(h,{level:"h1",align:"center",gutterBottom:!1,children:"Reset Password"}),s.jsx("p",{className:e["reset-password-subtitle"],children:"Enter your new password below"})]}),s.jsx(k,{variant:"elevated",padding:"large",children:v?s.jsxs("div",{className:e["reset-password-success"],children:[s.jsx("div",{className:e["success-icon"],"aria-hidden":"true",children:s.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[s.jsx("circle",{cx:"32",cy:"32",r:"32",fill:"#dcfce7"}),s.jsx("path",{d:"M20 32L28 40L44 24",stroke:"#16a34a",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),s.jsx(h,{level:"h2",align:"center",gutterBottom:!0,children:"Password Reset Successful"}),s.jsx("p",{className:e["success-message"],children:"Your password has been successfully reset. You can now sign in with your new password."}),s.jsx("p",{className:e["success-note"],children:"Redirecting to login page in 3 seconds..."}),s.jsx(w,{to:"/login",className:e["go-to-login"],children:s.jsx(x,{variant:"primary",size:"large",fullWidth:!0,children:"Go to Login"})})]}):s.jsxs("form",{onSubmit:b,className:e["reset-password-form"],noValidate:!0,children:[i.submit&&s.jsxs("div",{className:e["reset-password-error-banner"],role:"alert",children:[i.submit,s.jsx("div",{style:{marginTop:"12px"},children:s.jsx(w,{to:"/forgot-password",className:e["reset-password-link"],children:"Request a new password reset"})})]}),s.jsx(m,{type:"password",label:"New Password",placeholder:"Enter your new password",value:a.password,onChange:p("password"),error:i.password,required:!0,autoComplete:"new-password",autoFocus:!0,disabled:d||!o}),s.jsx(m,{type:"password",label:"Confirm Password",placeholder:"Re-enter your new password",value:a.confirmPassword,onChange:p("confirmPassword"),error:i.confirmPassword,required:!0,autoComplete:"new-password",disabled:d||!o}),s.jsxs("div",{className:e["password-requirements"],children:[s.jsx("p",{className:e["requirements-title"],children:"Password must contain:"}),s.jsxs("ul",{className:e["requirements-list"],children:[s.jsx("li",{children:"At least 8 characters"}),s.jsx("li",{children:"One uppercase letter"}),s.jsx("li",{children:"One lowercase letter"}),s.jsx("li",{children:"One number"})]})]}),s.jsx(x,{type:"submit",variant:"primary",size:"large",fullWidth:!0,loading:d,disabled:d||!o,children:d?"Resetting Password...":"Reset Password"}),s.jsx("div",{className:e["reset-password-footer"],children:s.jsx(w,{to:"/login",className:e["reset-password-link"],children:"‚Üê Back to Login"})})]})})]})})};export{B as ResetPasswordPage};
//# sourceMappingURL=ResetPassword-1hGfjSkQ.js.map
