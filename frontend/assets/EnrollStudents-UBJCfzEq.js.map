{"version":3,"file":"EnrollStudents-UBJCfzEq.js","sources":["../../src/pages/EnrollStudents.tsx"],"sourcesContent":["/**\n * Enroll Students Page\n *\n * BUSINESS CONTEXT:\n * Instructor feature for enrolling students in training programs.\n * Provides search interface to find and select students for enrollment.\n *\n * TECHNICAL IMPLEMENTATION:\n * - Student search with real-time results\n * - Multi-select with checkboxes\n * - Real-time validation and error handling\n * - Success notifications and navigation\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { DashboardLayout } from '../components/templates/DashboardLayout';\nimport { Card } from '../components/atoms/Card';\nimport { Button } from '../components/atoms/Button';\nimport { Heading } from '../components/atoms/Heading';\nimport { Input } from '../components/atoms/Input';\nimport { Checkbox } from '../components/atoms/Checkbox';\nimport { Spinner } from '../components/atoms/Spinner';\nimport { enrollmentService } from '../services/enrollmentService';\nimport { trainingProgramService, TrainingProgram } from '../services/trainingProgramService';\nimport { useAppSelector } from '../store/hooks';\n\ninterface Student {\n  id: string;\n  name: string;\n  email: string;\n}\n\n/**\n * Enroll Students Page Component\n *\n * WHY THIS APPROACH:\n * - Search interface for finding students\n * - Multi-select with checkboxes for batch enrollment\n * - Real-time validation prevents enrollment errors\n * - Clear feedback on success/failure\n */\nexport const EnrollStudents: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const user = useAppSelector(state => state.user.profile);\n\n  // Get course ID from URL params\n  const courseIdFromParams = searchParams.get('courseId');\n\n  // Training programs list\n  const [programs, setPrograms] = useState<TrainingProgram[]>([]);\n  const [isLoadingPrograms, setIsLoadingPrograms] = useState(true);\n  const [selectedCourseId, setSelectedCourseId] = useState(courseIdFromParams || '');\n\n  // Student search\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Student[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [enrolledStudentIds, setEnrolledStudentIds] = useState<string[]>([]);\n\n  // Selected students for enrollment\n  const [selectedStudentIds, setSelectedStudentIds] = useState<string[]>([]);\n\n  // Operation state\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  /**\n   * Load instructor's training programs\n   */\n  useEffect(() => {\n    const loadPrograms = async () => {\n      if (!user?.id) return;\n\n      try {\n        setIsLoadingPrograms(true);\n        const response = await trainingProgramService.getTrainingPrograms({\n          instructor_id: user.id,\n          published: true\n        });\n        setPrograms(response.data);\n      } catch (err) {\n        console.error('Failed to load training programs:', err);\n        setError('Failed to load your training programs. Please refresh the page.');\n      } finally {\n        setIsLoadingPrograms(false);\n      }\n    };\n\n    loadPrograms();\n  }, [user?.id]);\n\n  /**\n   * Load enrolled students when course is selected\n   */\n  useEffect(() => {\n    const loadEnrolledStudents = async () => {\n      if (!selectedCourseId) return;\n\n      try {\n        const enrolled = await enrollmentService.getEnrolledStudents(selectedCourseId);\n        setEnrolledStudentIds(enrolled);\n      } catch (err) {\n        console.error('Failed to load enrolled students:', err);\n      }\n    };\n\n    loadEnrolledStudents();\n  }, [selectedCourseId]);\n\n  /**\n   * Handle student search\n   */\n  useEffect(() => {\n    const searchStudents = async () => {\n      if (!searchQuery.trim()) {\n        setSearchResults([]);\n        return;\n      }\n\n      try {\n        setIsSearching(true);\n        const results = await enrollmentService.searchStudents(searchQuery);\n        setSearchResults(results);\n      } catch (err) {\n        console.error('Failed to search students:', err);\n        setSearchResults([]);\n      } finally {\n        setIsSearching(false);\n      }\n    };\n\n    // Debounce search\n    const timeoutId = setTimeout(searchStudents, 300);\n    return () => clearTimeout(timeoutId);\n  }, [searchQuery]);\n\n  /**\n   * Toggle student selection\n   */\n  const handleStudentToggle = (studentId: string) => {\n    setSelectedStudentIds(prev =>\n      prev.includes(studentId)\n        ? prev.filter(id => id !== studentId)\n        : [...prev, studentId]\n    );\n  };\n\n  /**\n   * Handle enrollment submission\n   */\n  const handleEnrollment = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(null);\n\n    // Validation\n    if (!selectedCourseId) {\n      setError('Please select a course.');\n      return;\n    }\n\n    if (selectedStudentIds.length === 0) {\n      setError('Please select at least one student to enroll.');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      const result = await enrollmentService.enrollStudents({\n        courseId: selectedCourseId,\n        studentIds: selectedStudentIds,\n      });\n\n      // Check for partial failures\n      const failedCount = result.failed?.length || 0;\n      if (failedCount > 0) {\n        // Partial success - some enrolled, some failed\n        setSuccess(`${result.enrolledCount} student(s) enrolled, ${failedCount} failed.`);\n      } else {\n        // Complete success\n        setSuccess(`Successfully enrolled ${result.enrolledCount} student(s)!`);\n      }\n\n      setSelectedStudentIds([]);\n      setSearchQuery('');\n      setSearchResults([]);\n\n      // Reload enrolled students\n      const enrolled = await enrollmentService.getEnrolledStudents(selectedCourseId);\n      setEnrolledStudentIds(enrolled);\n\n      // Navigate back after 2 seconds\n      setTimeout(() => {\n        navigate('/instructor/students');\n      }, 2000);\n    } catch (err: any) {\n      console.error('Failed to enroll students:', err);\n      setError(err.response?.data?.message || err.message || 'Failed to enroll students. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Only show loading spinner if we're loading programs AND don't have a courseId from URL\n  if (isLoadingPrograms && !courseIdFromParams) {\n    return (\n      <DashboardLayout>\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px' }}>\n          <Spinner size=\"large\" />\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <main style={{ padding: '2rem', maxWidth: '900px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: '2rem' }}>\n          <Heading level=\"h1\" gutterBottom={true}>\n            Enroll Students\n          </Heading>\n          <p style={{ color: '#666', fontSize: '0.95rem' }}>\n            Search for students and enroll them in your training programs\n          </p>\n        </div>\n\n        {/* Error/Success Messages */}\n        {error && (\n          <Card\n            variant=\"outlined\"\n            padding=\"medium\"\n            style={{ marginBottom: '1.5rem', borderColor: '#ef4444', backgroundColor: '#fee2e2' }}\n          >\n            <p style={{ color: '#dc2626', margin: 0, fontWeight: 500 }} role=\"alert\">{error}</p>\n          </Card>\n        )}\n\n        {success && (\n          <Card\n            variant=\"outlined\"\n            padding=\"medium\"\n            style={{ marginBottom: '1.5rem', borderColor: '#10b981', backgroundColor: '#d1fae5' }}\n          >\n            <p style={{ color: '#065f46', margin: 0, fontWeight: 500 }} role=\"alert\">{success}</p>\n          </Card>\n        )}\n\n        {/* Enrollment Form */}\n        <Card variant=\"outlined\" padding=\"large\">\n          <form onSubmit={handleEnrollment}>\n            {/* Course Selection */}\n            <div style={{ marginBottom: '1.5rem' }}>\n              <label htmlFor=\"course\" style={{ display: 'block', fontWeight: 600, marginBottom: '0.5rem' }}>\n                Select Course\n              </label>\n              <select\n                id=\"course\"\n                value={selectedCourseId}\n                onChange={(e) => setSelectedCourseId(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.375rem',\n                  fontSize: '1rem',\n                }}\n                required\n              >\n                <option value=\"\">Choose a course...</option>\n                {programs.map(program => (\n                  <option key={program.id} value={program.id}>\n                    {program.title}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Student Search */}\n            <div style={{ marginBottom: '1.5rem' }}>\n              <label htmlFor=\"search\" style={{ display: 'block', fontWeight: 600, marginBottom: '0.5rem' }}>\n                Search Students\n              </label>\n              <Input\n                id=\"search\"\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search students by name, email, or ID\"\n                disabled={!selectedCourseId}\n              />\n              {!selectedCourseId && (\n                <p style={{ fontSize: '0.875rem', color: '#666', marginTop: '0.5rem' }}>\n                  Please select a course first\n                </p>\n              )}\n            </div>\n\n            {/* Search Results */}\n            {isSearching && (\n              <div style={{ textAlign: 'center', padding: '2rem' }}>\n                <Spinner size=\"medium\" />\n              </div>\n            )}\n\n            {!isSearching && searchResults.length > 0 && (\n              <div style={{ marginBottom: '1.5rem' }}>\n                <p style={{ fontWeight: 600, marginBottom: '0.75rem' }}>\n                  Search Results ({searchResults.length})\n                </p>\n                <div style={{ maxHeight: '300px', overflowY: 'auto', border: '1px solid #d1d5db', borderRadius: '0.375rem' }}>\n                  {searchResults.map(student => {\n                    const isAlreadyEnrolled = enrolledStudentIds.includes(student.id);\n                    const isSelected = selectedStudentIds.includes(student.id);\n\n                    return (\n                      <div\n                        key={student.id}\n                        style={{\n                          padding: '0.75rem 1rem',\n                          borderBottom: '1px solid #e5e7eb',\n                          backgroundColor: isSelected ? '#eff6ff' : 'white',\n                          opacity: isAlreadyEnrolled ? 0.6 : 1,\n                        }}\n                      >\n                        <Checkbox\n                          label={\n                            <div>\n                              <div style={{ fontWeight: 500 }}>{student.name}</div>\n                              <div style={{ fontSize: '0.875rem', color: '#666' }}>{student.email}</div>\n                              {isAlreadyEnrolled && (\n                                <div style={{ fontSize: '0.75rem', color: '#f59e0b', marginTop: '0.25rem' }}>\n                                  Already enrolled\n                                </div>\n                              )}\n                            </div>\n                          }\n                          checked={isSelected}\n                          onChange={() => handleStudentToggle(student.id)}\n                          disabled={isAlreadyEnrolled}\n                        />\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {!isSearching && searchQuery && searchResults.length === 0 && (\n              <div style={{ textAlign: 'center', padding: '2rem', color: '#666' }}>\n                No students found matching \"{searchQuery}\"\n              </div>\n            )}\n\n            {/* Selected Students Summary */}\n            {selectedStudentIds.length > 0 && (\n              <div style={{ marginBottom: '1.5rem', padding: '1rem', backgroundColor: '#f3f4f6', borderRadius: '0.375rem' }}>\n                <p style={{ fontWeight: 600, marginBottom: '0.5rem' }}>\n                  Selected Students: {selectedStudentIds.length}\n                </p>\n                <div style={{ fontSize: '0.875rem', color: '#666' }}>\n                  {selectedStudentIds.map(id => {\n                    const student = searchResults.find(s => s.id === id);\n                    return student ? (\n                      <div key={id} style={{ marginBottom: '0.25rem' }}>\n                        â€¢ {student.name} ({student.email})\n                      </div>\n                    ) : null;\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\n              <Button\n                type=\"button\"\n                variant=\"secondary\"\n                onClick={() => navigate('/instructor/students')}\n                disabled={isSubmitting}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                variant=\"primary\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? (\n                  <>\n                    <Spinner size=\"small\" />\n                    Enrolling...\n                  </>\n                ) : (\n                  selectedStudentIds.length > 0\n                    ? `Enroll ${selectedStudentIds.length} Student${selectedStudentIds.length !== 1 ? 's' : ''}`\n                    : 'Enroll Students'\n                )}\n              </Button>\n            </div>\n          </form>\n        </Card>\n      </main>\n    </DashboardLayout>\n  );\n};\n"],"names":["EnrollStudents","navigate","useNavigate","searchParams","useSearchParams","user","useAppSelector","state","courseIdFromParams","programs","setPrograms","useState","isLoadingPrograms","setIsLoadingPrograms","selectedCourseId","setSelectedCourseId","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","enrolledStudentIds","setEnrolledStudentIds","selectedStudentIds","setSelectedStudentIds","isSubmitting","setIsSubmitting","error","setError","success","setSuccess","useEffect","response","trainingProgramService","err","enrolled","enrollmentService","timeoutId","results","handleStudentToggle","studentId","prev","id","handleEnrollment","e","result","failedCount","jsx","DashboardLayout","Spinner","jsxs","Heading","Card","program","Input","student","isAlreadyEnrolled","isSelected","Checkbox","s","Button","Fragment"],"mappings":"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"}