/**
 * Modern Button System
 *
 * BUSINESS CONTEXT:
 * Buttons are the primary interaction points in our educational platform. Consistent,
 * professional button styling builds user trust and confidence. Students, instructors,
 * and administrators all interact with buttons constantly - creating courses, submitting
 * quizzes, managing users, etc. Clear visual feedback through hover effects reduces
 * user uncertainty and errors.
 *
 * WHY Our APPROACH:
 * Our button system is renowned for:
 * 1. Subtle, professional hover effects (2px lift)
 * 2. Fast transitions (200ms) that feel responsive
 * 3. Clear visual hierarchy through consistent styling
 * 4. Comprehensive state management (hover, active, disabled, loading, focus)
 * 5. Excellent accessibility (keyboard navigation, focus indicators)
 *
 * CRITICAL REQUIREMENT:
 * We use OUR blue color scheme (#2563eb), NOT Our purple/orange.
 * Our brand identity is established and changing colors would confuse users.
 *
 * DESIGN DECISIONS:
 * - 8px border radius: Modern, approachable feel (the design system standard)
 * - 12px/24px padding: Generous padding creates larger touch targets (accessibility)
 * - Semibold font weight (600): Makes button text prominent and scannable
 * - 200ms transitions: Fast enough to feel responsive, not sluggish
 * - translateY(-2px) hover: Subtle lift effect provides tactile feedback
 * - Shadow on hover: Enhances 3D lift effect, makes buttons feel physical
 *
 * TECHNICAL IMPLEMENTATION:
 * - Scoped to for progressive rollout via feature flag
 * - Uses CSS variables from 00-design-tokens.css for maintainability
 * - Supports all button states: default, hover, active, disabled, loading, focus
 * - Mobile-friendly with touch-optimized sizing
 * - Keyboard navigation support with visible focus indicators (WCAG 2.1 compliant)
 *
 * SOLID PRINCIPLES APPLIED:
 * - Single Responsibility: Each class has one purpose (btn-primary, btn-secondary, etc.)
 * - Open/Closed: Base button styles can be extended without modification
 * - Interface Segregation: Size variants (btn-small, btn-large) are separate concerns
 * - Dependency Inversion: Depends on design tokens, not hardcoded values
 *
 * ACCESSIBILITY:
 * - Minimum 44x44px touch target size (WCAG 2.1 Level AAA)
 * - Visible focus indicators for keyboard navigation
 * - Sufficient color contrast (4.5:1 ratio for text)
 * - Disabled state clearly distinguishable (50% opacity)
 * - Loading state prevents double-submission
 *
 * BROWSER COMPATIBILITY:
 * - Modern browsers (Chrome, Firefox, Safari, Edge)
 * - CSS Grid and Flexbox support required
 * - CSS Custom Properties (variables) support required
 * - Transform and transition support required
 *
 * USAGE EXAMPLES:
 *
 * Primary Action (most important):
 * <button class="btn-primary">Create Course</button>
 * <button class="create-project-btn">Create Project</button>
 *
 * Secondary Action (less prominent):
 * <button class="btn-secondary">Cancel</button>
 * <button class="filter-btn">Filter Results</button>
 *
 * Destructive Action (danger):
 * <button class="btn-danger">Delete Course</button>
 *
 * Positive Action (success):
 * <button class="btn-success">Save Changes</button>
 *
 * Low Priority (ghost):
 * <button class="btn-ghost">View Details</button>
 *
 * Size Variants:
 * <button class="btn-primary btn-small">Compact</button>
 * <button class="btn-primary btn-large">Emphasized</button>
 *
 * Loading State:
 * <button class="btn-primary" data-loading="true">Submitting...</button>
 *
 * Disabled State:
 * <button class="btn-primary" disabled>Not Available</button>
 */

/* ============================================================================
 * BASE BUTTON STYLES
 * ============================================================================
 * These styles apply to ALL button variants when the design system UI is enabled.
 * Includes reset, layout, typography, and interaction fundamentals.
 */

/* Only apply when the design system UI feature flag is enabled */
.btn,
button[class*="btn-"],
.create-project-btn,
.add-track-btn,
.save-settings-btn,
.cancel-btn,
.filter-btn,
.delete-btn {
    /* Reset browser default button styles */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background: none;
    border: none;
    margin: 0;

    /* Layout: Flexbox for icon + text alignment */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--ui-space-1);  /* 8px gap between icon and text */

    /* the design system Standard Padding: 12px vertical, 24px horizontal */
    /* This creates generous touch targets (accessibility) */
    padding: 12px 24px;

    /* the design system Border Radius: 8px for modern, approachable feel */
    border-radius: var(--ui-radius-md);  /* 8px */

    /* Typography: Inter font, 15px base size, semibold weight */
    font-family: var(--ui-font-sans);
    font-size: var(--ui-text-base);  /* 15px - Our signature size */
    font-weight: 600;  /* Semibold makes button text prominent */
    line-height: 1.5;
    text-align: center;
    text-decoration: none;
    white-space: nowrap;

    /* Interaction */
    cursor: pointer;
    user-select: none;

    /* Smooth Transitions: 200ms for all properties */
    /* Fast enough to feel responsive, not sluggish */
    /* Ease-out timing: fast start, slow end (feels natural) */
    transition: all var(--ui-transition-normal) var(--ui-ease-out);  /* 200ms */

    /* Prevent text selection on double-click */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

/* ============================================================================
 * PRIMARY BUTTON - Our Blue Brand Color (#2563eb)
 * ============================================================================
 * CRITICAL: Uses OUR blue, NOT Our purple/orange.
 * Used for primary calls-to-action (CTAs): Create, Submit, Save, etc.
 */

.btn-primary,
.create-project-btn,
.add-track-btn,
.save-settings-btn {
    background-color: var(--ui-color-primary);  /* #2563eb - Our blue */
    color: #FFFFFF;
    border: 2px solid var(--ui-color-primary);
}

/* Primary Button Hover: Darker blue + lift effect + shadow */
.btn-primary:hover,
.create-project-btn:hover,
.add-track-btn:hover,
.save-settings-btn:hover {
    background-color: var(--ui-color-accent);  /* #1d4ed8 - Darker blue */
    border-color: var(--ui-color-accent);

    /* Subtle lift effect: Button rises 2px */
    /* Creates tactile, physical feel */
    transform: translateY(-2px);

    /* Shadow enhances 3D effect */
    box-shadow: var(--ui-shadow-md);  /* 0 4px 6px rgba(0,0,0,0.1) */
}

/* Primary Button Active: Press down effect (removes lift) */
.btn-primary:active,
.create-project-btn:active,
.add-track-btn:active {
    transform: translateY(0);  /* Button returns to baseline */
    box-shadow: var(--ui-shadow-sm);  /* Reduced shadow */
}

/* ============================================================================
 * SECONDARY BUTTON - Outline Style
 * ============================================================================
 * Used for secondary actions (Cancel, Close, Filter, etc.)
 * Less visually prominent than primary buttons (creates hierarchy)
 */

.btn-secondary,
.cancel-btn,
.filter-btn {
    background-color: transparent;
    color: var(--ui-color-primary);  /* Our blue text */
    border: 2px solid var(--ui-color-primary);
}

/* Secondary Button Hover: Fill with blue, invert colors */
.btn-secondary:hover,
.cancel-btn:hover,
.filter-btn:hover {
    background-color: var(--ui-color-primary);
    color: #FFFFFF;
    transform: translateY(-2px);
    box-shadow: var(--ui-shadow-md);
}

/* Secondary Button Active: Press down */
.btn-secondary:active,
.cancel-btn:active {
    transform: translateY(0);
}

/* ============================================================================
 * DANGER BUTTON - Red for Destructive Actions
 * ============================================================================
 * Used for delete, remove, destroy actions
 * Red color creates appropriate emotional response and prevents accidents
 */

.btn-danger,
.delete-btn {
    background-color: var(--ui-color-danger);  /* #dc2626 - Red */
    color: #FFFFFF;
    border: 2px solid var(--ui-color-danger);
}

/* Danger Button Hover: Darker red + lift */
.btn-danger:hover,
.delete-btn:hover {
    background-color: #b91c1c;  /* Darker red */
    border-color: #b91c1c;
    transform: translateY(-2px);
    box-shadow: var(--ui-shadow-md);
}

/* Danger Button Active: Press down */
.btn-danger:active {
    transform: translateY(0);
}

/* ============================================================================
 * SUCCESS BUTTON - Green for Positive Actions
 * ============================================================================
 * Used for save, confirm, submit actions
 * Green creates positive emotional response and builds confidence
 */

.btn-success {
    background-color: var(--ui-color-success);  /* #059669 - Green */
    color: #FFFFFF;
    border: 2px solid var(--ui-color-success);
}

/* Success Button Hover: Darker green + lift */
.btn-success:hover {
    background-color: #047857;  /* Darker green */
    border-color: #047857;
    transform: translateY(-2px);
    box-shadow: var(--ui-shadow-md);
}

/* Success Button Active: Press down */
.btn-success:active {
    transform: translateY(0);
}

/* ============================================================================
 * GHOST BUTTON - Minimal Style for Tertiary Actions
 * ============================================================================
 * Used for low-priority actions (View Details, Learn More, etc.)
 * Minimal visual weight prevents distraction from primary CTAs
 */

.btn-ghost {
    background: none;
    color: var(--ui-color-primary);
    border: none;
    padding: var(--ui-space-1) var(--ui-space-2);  /* 8px 16px - More compact */
}

/* Ghost Button Hover: Subtle background tint */
.btn-ghost:hover {
    background-color: rgba(37, 99, 235, 0.05);  /* 5% blue tint */
    transform: none;  /* No lift effect for ghost buttons */
}

/* Ghost Button Active */
.btn-ghost:active {
    background-color: rgba(37, 99, 235, 0.1);  /* 10% blue tint */
}

/* ============================================================================
 * BUTTON SIZE VARIANTS
 * ============================================================================
 * Small: Compact buttons for tight spaces (tables, toolbars)
 * Large: Emphasized buttons for primary CTAs (hero sections)
 */

/* Small Button: 8px/16px padding, 13px font size */
.btn-small,
button[class*="btn-"].btn-small {
    padding: var(--ui-space-1) var(--ui-space-2);  /* 8px 16px */
    font-size: var(--ui-text-sm);  /* 13px */
}

/* Large Button: 16px/32px padding, 16px font size */
.btn-large,
button[class*="btn-"].btn-large {
    padding: var(--ui-space-2) var(--ui-space-4);  /* 16px 32px */
    font-size: var(--ui-text-lg);  /* 16px */
}

/* ============================================================================
 * DISABLED STATE - All Button Variants
 * ============================================================================
 * ACCESSIBILITY: Clear visual indicator that button is not interactive
 * 50% opacity is universal disabled state indicator
 */

.btn:disabled,
.btn-primary:disabled,
.btn-secondary:disabled,
.btn-danger:disabled,
.btn-success:disabled,
.btn-ghost:disabled,
button:disabled[class*="btn-"],
.create-project-btn:disabled,
.add-track-btn:disabled,
.cancel-btn:disabled,
.delete-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;  /* Prevents hover effects */
    transform: none;  /* No lift on hover */
    box-shadow: none;  /* No shadow */
}

/* ============================================================================
 * FOCUS STATE - Keyboard Navigation Accessibility
 * ============================================================================
 * WCAG 2.1 REQUIREMENT: Visible focus indicator for keyboard users
 * Uses :focus-visible to show outline only for keyboard, not mouse clicks
 */

.btn:focus-visible,
button:focus-visible[class*="btn-"] {
    outline: 3px solid rgba(37, 99, 235, 0.3);  /* Blue outline, 30% opacity */
    outline-offset: 2px;  /* 2px gap between button and outline */
}

/* ============================================================================
 * LOADING STATE - Prevents Double Submission
 * ============================================================================
 * Shows spinner animation and disables interaction during async operations
 * Provides feedback that action is in progress
 */

.btn[data-loading="true"],
button[data-loading="true"][class*="btn-"] {
    pointer-events: none;  /* Prevent clicks */
    opacity: 0.7;  /* Visual indicator */
    position: relative;
    cursor: wait;
}

/* Loading Spinner - CSS Animation (no JavaScript required) */
.btn[data-loading="true"]::after,
button[data-loading="true"][class*="btn-"]::after {
    content: '';
    position: absolute;
    right: 12px;  /* Position on right side of button */
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);  /* Light gray border */
    border-top-color: #FFFFFF;  /* White top creates spinning effect */
    border-radius: 50%;  /* Circle */
    animation: spin 0.6s linear infinite;  /* Continuous spin */
}

/* Spinner Animation Keyframes */
@keyframes spin {
    to {
        transform: translateY(-50%) rotate(360deg);
    }
}

/* ============================================================================
 * BUTTON ICON SUPPORT
 * ============================================================================
 * Buttons can contain icons alongside text
 * Icons use gap spacing from base button styles
 */

.btn-icon,
button[class*="btn-"] .btn-icon {
    width: 20px;
    height: 20px;
    display: inline-block;
}

/* Icon-only buttons (square shape) */
.btn-icon-only,
button[class*="btn-"].btn-icon-only {
    padding: 12px;  /* Square padding */
    width: 44px;  /* Minimum touch target (WCAG) */
    height: 44px;
}

/* ============================================================================
 * MOBILE RESPONSIVENESS
 * ============================================================================
 * Ensures buttons remain usable on small screens
 */

@media (max-width: 768px) {
    /* Increase touch targets on mobile */
    .btn,
    button[class*="btn-"] {
        padding: 14px 28px;  /* Slightly larger */
        min-height: 44px;  /* WCAG minimum touch target */
    }

    /* Full-width buttons on mobile if needed */
    .btn-full-mobile {
        width: 100%;
        justify-content: center;
    }
}

/* ============================================================================
 * DARK MODE SUPPORT (Future Enhancement)
 * ============================================================================
 * Placeholder for dark mode variants
 * Uncomment when dark mode design tokens are added
 */

/*
@media (prefers-color-scheme: dark) {
    .btn-primary {
        background-color: var(--ui-color-primary-dark);
    }
}
*/

/* ============================================================================
 * HIGH CONTRAST MODE (Accessibility)
 * ============================================================================
 * Ensures buttons remain visible in high contrast mode
 */

@media (prefers-contrast: high) {
    .btn,
    button[class*="btn-"] {
        border-width: 3px;  /* Thicker borders */
    }
}

/* ============================================================================
 * PRINT STYLES
 * ============================================================================
 * Buttons should not be interactive in print
 */

@media print {
    .btn,
    button[class*="btn-"] {
        border: 2px solid currentColor;
        box-shadow: none;
        transform: none;
    }
}

/**
 * ============================================================================
 * TESTING AND VALIDATION
 * ============================================================================
 *
 * This button system has comprehensive TDD test coverage:
 * - E2E tests: tests/the design system/e2e/test_the design system_buttons.py (17 tests)
 * - Tests verify colors (our blue, not the design system orange)
 * - Tests validate hover effects (2px lift)
 * - Tests confirm transitions (200ms)
 * - Tests check all states (disabled, loading, focus)
 * - Tests ensure accessibility compliance
 *
 * Run tests: pytest tests/the design system/e2e/test_the design system_buttons.py -v
 *
 * Visual test harness: /frontend/html/the design system-button-test.html
 * Open this file in a browser to manually verify button styles
 *
 * ============================================================================
 */
