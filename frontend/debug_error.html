<!DOCTYPE html>
<html>
<head>
    <title>Debug JavaScript Error</title>
</head>
<body>
    <h1>Debugging JavaScript Error</h1>
    <div id="log"></div>
    
    <script>
        function log(message) {
            document.getElementById('log').innerHTML += message + '<br>';
            console.log(message);
        }
        
        // Test the exact line that's causing issues
        try {
            log('Testing the problematic line...');
            
            // Mock window object for testing
            var mockWindow = {
                document: {
                    write: function(str) { 
                        log('Write: ' + str); 
                    },
                    close: function() { 
                        log('Document closed'); 
                    }
                }
            };
            
            // This is the exact code from line 1839
            mockWindow.document.write('</' + 'script></body></html>');
            
            log('✅ Line 1839 executed successfully');
            
            // Now let's test if the issue is elsewhere
            log('Testing surrounding code...');
            
            mockWindow.document.write('});');
            mockWindow.document.write('</' + 'script></body></html>');
            mockWindow.document.close();
            
            log('✅ All code executed successfully');
            
        } catch (error) {
            log('❌ Error caught: ' + error.message);
            log('❌ Stack: ' + error.stack);
        }
        
        // If we get here, the syntax is fine
        log('Script completed without syntax errors');
    </script>
</body>
</html>